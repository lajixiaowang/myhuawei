ec.pkg("ec.product.remark");ec.load("ajax");ec.load("ec.box",{loadType:"lazy"});ec.remark={};ec.remark.prefix=domainRms+"/comment";var loadEvaluate=false;var bFirstLoadEvaluate=false;var pageSize=10;$(function(){$("#j-gbomcode4comments").change(function(){ec.product.remark.loadEvaluate({pageNumber:1,type:0,extraType:$("#productCommentId .product-comment-tab li.current a").attr("extratype"),gbomCode:ec.product.remark.getGbomCode()})})});ec.product.remark.getGbomCode=function(){var sku=ec.product.getSkuInfo(ec.product.getSku());var gbomCode="";if(sku&&sku.pro_sbomList){for(var i=0;i<sku.pro_sbomList.length;i++){if(sku.pro_sbomList[i].sbomCode===sku.code){gbomCode=sku.pro_sbomList[i].gbomCode;break}}}return $("#j-gbomcode4comments").attr("checked")?gbomCode:""};ec.product.remark.loadEvaluate=function(page){$.ajax({url:openApiDomain+"/rms/comment/getCommentList.json?t="+(new Date).getTime(),data:JSON.stringify({pid:ec.product.id,gbomCode:page.gbomCode?page.gbomCode:"",type:page.type?page.type:0,extraType:page.extraType?page.extraType:1,pageSize:pageSize,pageNum:page.pageNumber}),type:"POST",dataType:"json",beforeSend:function(xhr){xhr.withCredentials=true},success:function(json){if(json.resultCode!="0"){commentFlag=true;$("#pro-tab-evaluate").hide();return}if(!json.data.comments||json.data.comments.length==0){commentFlag=true;$("#pro-tab-evaluate span").text("("+(json.data.count||0)+")");$("#pro-tab-evaluate").show();$("#pro-msg-list").hide();$("#pro-msg-pager").hide();$("#evaluatePageNumber").hide();if(page.extraType=="0"&&json.data.defaultGoodCount!=null&&json.data.defaultGoodCount>0){$("#product-remark-comment-no").html(+json.data.defaultGoodCount+"位用户进行了默认好评")}else{$("#product-remark-comment-no").html("该商品暂无评价")}$("#product-remark-comment-no").show();return}commentFlag=false;$("#pro-tab-evaluate-content").show();$("#productCommentId").show();$("#pro-tab-evaluate").show();$("#product-remark-comment-no").hide();loadEvaluate=true;var html=[],p,v;for(var i=0;i<json.data.comments.length;i++){p=json.data.comments[i];html.push('<li class="clearfix"><div class="product-comment-user"><p class="product-comment-user-img">');var userPng=imagePath+"/echannel/misc/defaultface_user_small.png";if(p.headImage&&$.trim(p.headImage)!=""){userPng=p.headImage}html.push('<img src="'+ec.encodeForHTML(userPng)+'" alt="'+ec.encodeForHTML(userPng)+'">');var grade=p.gradeCode==null?0:p.gradeCode;html.push('<i class="icon-vip-level-'+grade+'"></i></p>');html.push('<p class="product-comment-user-name">'+ec.autoEncodeAttr(p.userName)+"</p></div>");html.push('<div class="product-user-comment"><div class="product-user-comment-detial"><div class="h clearfix">');html.push('<div class="product-star"><span class="starRating-area"><s style="width:'+p.score*20+'%"></s></span>');html.push('</div><div class="product-user-comment-impress">');html.push("<dl>");for(var j=0;j<p.tags.length;j++){html.push("<dd>"+ec.autoEncodeAttr(p.tags[j])+"</dd>")}html.push("</dl></div>");var custmerLikeNum=p.likes;if(!custmerLikeNum||custmerLikeNum==null||$.trim(custmerLikeNum)==""){custmerLikeNum=0}html.push('<div class="fr"><div class="product-user-comment-time">'+p.creationTime.substring(0,19)+'</div><a href="javascript:;" class="product-praise-btn" pid="'+p.productId+'" commentId="'+p.commentId+'" type="0"><span>'+parseInt(custmerLikeNum)+"</span></a></div>");html.push("</div>");html.push('<div class="product-user-comment-word" id="'+p.productId+"-"+p.commentId+'">');html.push(htmlspecialcharsOnce(p.content)||"");html.push("</div>");if(p.images.length>0){html.push('<div class="user-comment-img">                           ');html.push('\t<p class="img-small clearfix">                                  ');for(var j=0;j<p.images.length;j++){var pic=p.images[j];html.push('<a href="javascript:;" '+ec.remark.common.privewMin()+' class="img-wrap" ><img id="'+pic.id+'" image-large="'+ec.encodeForHTML(pic.large)+'" src="'+ec.encodeForHTML(pic.small)+'"></a> ')}html.push("\t</p>                                                         ");html.push('\t<div class="clearfix">                                       ');html.push(ec.remark.common.privewImg("view"));html.push("\t</div>                                                       ");html.push("</div>                                                        ")}html.push('<div class="product-user-comment-sku hide">');html.push(p.skuAttrs);html.push("</div></div>");html.push('<div class="product-reply">');if(p.canReply==1){html.push('<div class="product-reply-input">');html.push('<input id="reply-'+p.commentId+'" type="text" placeholder="回复评论"><a href="javascript:void(0)" productId="'+p.productId+'" commentId="'+p.commentId+'" type="remark" onclick="ec.product.addReply.addCheck(this)">回复</a>');html.push("</div>")}html.push('<div class="product-reply-detail" replyCount='+p.replyCount+">");for(var j=0;j<p.replies.length;j++){v=p.replies[j];html.push('<div class="product-admin-reply clearfix" >');html.push('<div class="admin-user-img">');html.push('<img src="'+(ec.autoEncodeAttr(v.headImage)||"")+'">');html.push("</div>");html.push("<dl>");if(v.type==0){html.push('<dt class="red">'+(ec.autoEncodeAttr(v.replyerName)||"")+"</dt>");html.push("<dd>"+(htmlspecialcharsOnce(v.replyContent)||"")+"</dd>");var likeNum=v.likes;if(!likeNum||likeNum==null||$.trim(likeNum)==""){likeNum=0}html.push('<dd><a href="javascript:;" class="product-admin-praise-btn" pid="'+p.productId+'" commentId="'+p.commentId+'" replyId="'+v.replyId+'" type="1">赞客服（<span>'+parseInt(likeNum)+"</span>）</a><dd>")}else{html.push("<dt>"+(ec.autoEncodeAttr(v.replyerName)||"")+"</dt>");html.push("<dd>"+(htmlspecialcharsOnce(v.replyContent)||"")+"</dd>")}html.push("</dl></div>")}if(p.replyCount>3){html.push('<div class="product-reply-btn"><a target="_blank" href="/product/viewReply/'+p.productId+"/"+p.commentId+"?t="+(new Date).getTime()+'">查看全部<span>'+p.replyCount+"</span>条回复</a></div>")}else{html.push('<div class="product-reply-btn" style="display:none;"><a target="_blank" href="/product/viewReply/'+p.productId+"/"+p.commentId+"?t="+(new Date).getTime()+'">查看全部<span>'+p.replyCount+"</span>条回复</a></div>")}html.push("</div>");html.push("</div></li>")}if(page.extraType=="0"){if(json.data.defaultGoodCount!=null&&json.data.defaultGoodCount>0&&json.data.page.pageNum==json.data.page.totalPage){html.push('<div class="product-comment-default">还有<span>'+json.data.defaultGoodCount+"</span>位用户给了默认好评</div>")}}var proMsgList=$("#pro-msg-list");proMsgList.html(html.join(""));if(json.data.comments.length==0){proMsgList.hide();$("#product-remark-comment-no").show()}else{proMsgList.show()}$("#pro-tab-evaluate span").text("("+(json.data.count||0)+")");if(json.data.page.totalPage>1){$("#pro-msg-pager").show();$("#pro-msg-pager").pager({pageNumber:json.data.page.pageNum,pageCount:json.data.page.totalPage,recordCount:json.data.page.totalRow,type:0,extraType:page.extraType?page.extraType:1,gbomCode:ec.product.remark.getGbomCode(),qpageSize:10,text:{first:"|&lt;",pre:"&lt",next:"&gt;",last:"&gt;|"},item:["first","pre","qpage","next","last","quickPager"],callBack:ec.product.remark.loadEvaluate})}else{$("#pro-msg-pager").hide()}$("#pro-msg-pager li.link").click(function(){$("html,body").animate({scrollTop:$("#pro-tab-evaluate-content").offset().top-$("#product-tab").height()},100)});$(".product-admin-praise-btn,.product-praise-btn").bind("click",function(){ec.product.remark.likes($(this))});$("#pro-msg-list li").each(function(){var $this=$(this),index=0,$a=$(this).find(".img-wrap"),$img=$(this).find(".img-big img"),$imgBig=$(this).find(".img-big"),prev=$(this).find(".cursor-prev"),next=$(this).find(".cursor-next");if($a.length){$a.click(function(){var $imgSrc=$(this).find("img").attr("image-large");index=$(this).index();$imgBig.removeClass("none");$a.eq(index).addClass("selected").siblings().removeClass("selected");showImg($a,$img,index);showBtn(index,$a.length,prev,next)});$(this).bind("click",function(e){var className=e.target.className.split(" ")[0];switch(className){case"cursor-small":$(this).find(".img-big").addClass("none");$a.removeClass("selected");index=0;break;case"cursor-prev":index<=0?0:--index;$a.eq(index).addClass("selected").siblings().removeClass("selected");showImg($a,$img,index);showBtn(index,$a.length,prev,next);break;case"cursor-next":index>=$a.length-1?$a.length-1:++index;$a.eq(index).addClass("selected").siblings().removeClass("selected");showImg($a,$img,index);showBtn(index,$a.length,prev,next);break;default:break}})}});function showImg(a,img,index){var src=a.eq(index).find("img").attr("image-large");img.attr("src",src)}function showBtn(index,len,btnpre,btnnext){index==len-1?btnnext.hide():btnnext.show();index==0?btnpre.hide():btnpre.show()}},error:function(){commentFlag=true;$("#pro-tab-evaluate-content").hide();$("#productCommentId").hide();$("#pro-tab-evaluate").hide();$(".product-comment-tab").hide()}})};ec.product.remark.loadEvaluateScore=function(){$.ajax({url:openApiDomain+"/rms/comment/getCommentScore.json?t="+(new Date).getTime(),type:"POST",dataType:"json",data:JSON.stringify({pid:ec.product.id}),beforeSend:function(xhr){xhr.withCredentials=true},success:function(json){if(json&&json.resultCode=="0"&&json.data){if(json.data.goodRate){$("#pro-evaluate-avgSorce").html(parseInt(json.data.goodRate*100)+"<em>%</em>")}if(json.data.hotTags){var html0=[];for(var i=0;i<json.data.hotTags.length;i++){var p=json.data.hotTags[i];if(p.count>0){var temp='<li><a href="javascript:;"><em>'+ec.encodeForHTML(p.tagName)+"</em><span>"+p.count+"</span></a></li>";html0.push(temp)}}$("#pro-score-impress").html(html0.join(""))}}else{return}}})};ec.product.remark.bindEvent=function(){$(".product-comment-tab").find("a").bind("click",function(){var exType=$(this).attr("extraType");$(this).parent().addClass("current").siblings().removeClass("current");ec.product.remark.loadEvaluate({pageNumber:1,type:0,extraType:exType,gbomCode:ec.product.remark.getGbomCode()})})};ec.product.remark.likes=function(obj){var productId=obj.attr("pid");var remarkId=obj.attr("commentId");var repId=obj.attr("replyId");var type=obj.attr("type");$.ajax({url:openApiDomain+"/rms/comment/like.json?t="+(new Date).getTime(),type:"POST",data:JSON.stringify({pid:productId,commentId:remarkId,replyId:repId,type:type}),dataType:"json",beforeSend:function(xhr){xhr.withCredentials=true},success:function(json){if(json&&json!=undefined&&json.resultCode){var resultCode=json.resultCode;switch(resultCode){case"0":var likeNum=obj.find("span").text();obj.find("span").text(parseInt(likeNum)+1);obj.addClass("click");obj.unbind("click");break;case"42003":ec.account.loginName="";ec.account.afterLogin(function(){ec.product.remark.likes(obj)});break;case"60008":ec.product.remark.showErrorMsg();break;default:break}return}}})};ec.product.remark.loadProductInfoEvaluateScore=function(){$.ajax({url:openApiDomain+"/rms/comment/getCommentCount.json",type:"POST",dataType:"json",data:JSON.stringify({pid:ec.product.id}),beforeSend:function(xhr){xhr.withCredentials=true},success:function(json){if(json&&json!=undefined&&json.resultCode=="0"&&json.data){$("#prd-remark-scoreAverage").attr("style","width:"+json.data.averageScore*20+"%");$("#prd-remark-scoreAverage").show();$("#prd-remark-jmptoremark").attr("title","共 "+json.data.count+" 条评论");$("#prd-remark-jmptoremark").text("共&nbsp;"+json.data.totalPrdCount+"&nbsp;条评论");$("#prd-remark-jmptoremark").show();$("#prd-remark-span-tab-evaluate").html("用户评价<em>（"+json.data.totalPrdCount+"）</em>");$("#prd-remark-span-tab-evaluate").show()}}})};ec.product.remark.showErrorMsg=function(){var html=[];html.push('<div class="box-errors-1">');html.push("<span>不能重复点赞</span>");html.push("</div>");html.push('<div class="box-button"><a href="javascript:;" class="box-ok"><span>确定</span></a></div>');var box=new ec.box(html.join(""),{boxid:"box_reply_error_msg",boxclass:"ol_box_4 small",title:"",showButton:false,onopen:function(box){box.setPosition()},onok:function(box){box.close()},onclose:function(){}}).open()};ec.pkg("ec.product.addReply");ec.load("ajax");ec.load("ec.box",{loadType:"lazy"});ec.product.addReply.addCheck=function(b){ec.product.addReply.productId=$(b).attr("productId");ec.product.addReply.commentId=$(b).attr("commentId");ec.product.addReply.type=$(b).attr("type");ec.product.addReply.content=$.trim($("#reply-"+ec.product.addReply.commentId).val());if(!ec.product.addReply.checkIllegalChar(ec.product.addReply.content)){ec.product.addReply.showErrorMsg("回复内容不能包含“[]><&#”等特殊字符");return}var a=ec.product.addReply.length($.trim($("#reply-"+ec.product.addReply.commentId).val()));if(a>600){ec.product.addReply.showErrorMsg("评论最多不能超过600个字符");return}if(a==0){ec.product.addReply.showErrorMsg("回复不能为空");return}ec.product.addReply.add(ec.product.addReply.productId,ec.product.addReply.commentId,ec.product.addReply.type)};ec.product.addReply.add=function(c,a,b){$.ajax({url:openApiDomain+"/rms/comment/saveReply.json?t="+new Date().getTime(),type:"POST",data:JSON.stringify({productId:c,commentId:a,userClient:1,content:ec.product.addReply.content}),dataType:"json",timeout:10000,beforeSend:function(d){ec.ui.loading.show;d.withCredentials=true},success:function(e){if(e!=""&&e!=undefined){var d=ec.product.addReply.result(e,true);if(d.result){ec.product.addReply.showErrorMsg("回复成功",1)}else{ec.ui.loading.hide();if(d.code=="42003"){ec.account.loginName=ec.util.cookie.set("ac_loNa",null,{domain:"vmall.com"});ec.account.afterLogin(function(){ec.product.addReply.add(c,a,b)})}else{ec.product.addReply.showErrorMsg(d.msg);return}}}else{ec.product.addReply.showErrorMsg("添加回复失败，请稍后重试");return}},error:function(){ec.product.addReply.showErrorMsg("添加回复失败，请稍后重试");return}});$("#reply-"+a).val("")};ec.product.addReply.showErrorMsg=function(e,d){var a=[];a.push('<div id="pro-add-success-mask" style="visibility:hidden;font-size:18px;width:348px;position: absolute;"></div>');var c=ec.product.addReply.compute($("#pro-add-success-mask"),e);if(d!=null){a.push('<div class="box-right-1">')}else{if(c.h>27){a.push('<div class="box-errors-2">')}else{a.push('<div class="box-errors-1">')}}a.push("<span>"+e+"</span>");a.push("</div>");a.push('<div class="box-button"><a href="javascript:;"  class="box-ok"><span>确定</span></a></div>');var b=new ec.box(a.join(""),{boxid:"box_reply_error_msg",boxclass:"ol_box_4 small",title:"",showButton:false,onopen:function(f){f.setPosition()},onok:function(f){f.close();if(d!=null){ec.product.addReply.addComment()}},onclose:function(){}}).open()};ec.product.addReply.compute=function(b,a){b.text(a);return{w:b[0].offsetWidth,h:b[0].offsetHeight}};ec.product.addReply.result=function(e,b){var d={};var a=false;var f="";var c="";if(e!=""&&e!=undefined){c=e.resultCode;switch(c){case"0":a=true;break;case"42003":f="系统繁忙，请稍后重试";break;case"42005":f="系统繁忙，请稍后重试";break;case"42019":f="系统繁忙，请稍后重试";break;case"60043":f="回复已超过最长字数限制";break;case"60044":f="回复内容不能包含“[]><&#”等特殊字符";break;case"60048":f="您回复的次数超过限制，无法再次回复";break;case"60049":f="您发布不当言论过多，被禁止发布回复";break;case"42019":f="系统繁忙，请稍后重试";break;case"50999":f="系统繁忙，请稍后重试";break;default:f="系统繁忙，请稍后重试";break}}else{f="系统繁忙，请稍后重试"}d.result=a;d.msg=f;d.code=c;return d};ec.product.addReply.length=function(d){var a=0;var b=d.length;var c=-1;for(var e=0;e<b;e++){c=d.charCodeAt(e);if(c>=0&&c<=128){a+=1}else{a+=2}}return a};ec.product.addReply.getUserHeadUrl=function(){var a;new ec.ajax().get({url:domainMain+"/member/accountInfo.json",dataType:"json",timeout:10000,async:false,timeoutFunction:function(){alert("操作超时，请重试！")},successFunction:function(b){if(!b.success&&b.code=="login"){ec.account.loginName="";ec.account.afterLogin(function(){})}else{if(b.customerInfo.headPictureURL){a=b.customerInfo.headPictureURL}else{a=imagePath+"/echannel/misc/img_logged_in.png"}}},error:function(){alert("操作超时，请重试！")}});return a};ec.product.addReply.addComment=function(){var b=$("#reply-"+ec.product.addReply.commentId).closest("li").find(".product-reply-detail");var e=0;var d=ec.product.addReply.getUserHeadUrl();if(ec.util.isEmpty(d)||d==undefined){d=imagePath+"/echannel/misc/img_logged_in.png"}e=b.children().find(".red").length;var c='<div class="product-admin-reply clearfix"><div class="admin-user-img"><img src="'+ec.encodeForHTML(d)+'"></div><dl><dt>'+ec.encodeForHTML(ec.account.loginName)+"</dt><dd>"+htmlspecialcharsOnce(ec.product.addReply.content)+"</dd></dl></div>";var a=b.attr("replyCount");a=parseInt(a)+1;b.attr("replyCount",a);if(ec.product.addReply.type=="remark"){b.find(".product-reply-btn span").text(a);if(a>3){if(b.find(".product-reply-btn").size()==0){$(b.children()[2]).after('<div class="product-reply-btn"><a target="_blank" href="/product/viewReply/'+ec.product.addReply.productId+"/"+ec.product.addReply.commentId+"?t="+new Date().getTime()+'">查看全部<span>'+a+"</span>条回复</a></div>")}else{b.find(".product-reply-btn").show()}}if(e<3){if(b.children().length>2){$(b.children()[2]).remove()}if(e==0){b.prepend(c)}else{$(b.children()[e-1]).after(c)}}}else{if(e==0){b.prepend(c)}else{$(b.children()[e-1]).after(c)}}};ec.product.addReply.checkIllegalChar=function(b){var a=/(\[|\]|>|<|\\|"|&|#|')/;if(b!=""&&b!=null&&a.test(b)){return false}return true};/**
 * 商品操作
 * Last Update:2012-12-28
 */
ec.pkg("ec.product");ec.load("ajax");ec.load("ec.box",{loadType:"lazy"});ec.load("ec.index");ec.load("cloud-zoom",function(){setTimeout(function(){$("#product-img").CloudZoom()},200)});ec.load("ec.product.gift");ec.load("ec.product.coupon");ec.load("rush");ec.load("deposit");ec.load("jquery.fixed",function(){$(function(){$("#pro-tab-all").fixed()})});ec.ui.countdown2=function(b,a){var c,e,d,f,g=$(b),h=g.data("countdown"),l=0,w,n=a.now.getTime()-(new Date).getTime(),k=0,r=function(){if(l>=a.times.length)return!1;w=a.times[l];l++;return!0},m=function(){k=Math.round((ec.util.parseDate(w).getTime()-(new Date).getTime()-n)/1E3);return k=0>=k?0:k},q=function(){k--;0>=k&&(k=0);c=Math.floor(k/86400);e=0<=a.html.indexOf("{#day}")?Math.floor(k/60/60)%24:Math.floor(k/60/60);d=Math.floor(k/60)%60;f=k%60;var b=a.html.replace(/{#day}/g,9<c?c:"0"+c).replace(/{#hours}/g,9<e?e:"0"+e).replace(/{#minutes}/g,9<d?d:"0"+d).replace(/{#seconds}/g,9<f?f:"0"+f);g.html(b);return 0>=k?!1:!0};a.times||(a.times=[a.endTime]);for(clearInterval(h);r()&&0>=m(););q()&&(h=setInterval(function(){q()||(a.callback&&a.callback(a),r()?m():clearInterval(h))},1E3),g.data("countdown",h))};var detailContentHeigh=0,productParameterHeight=0,packageServiceHeight=0,customerServiceHeight=0,tit1=0,tit2=0,tit3=0,tit4=0,oTop=0,clickFlag=!1,packFlag=!1,commentFlag=!1,scollFlag=!1,upDownButton="",finished=!0;ec.product.packageList={};ec.product.warranty={};var playerArray=[];$(function(){$(window).resize(function(){var b=ec.product.getSku(),a=ec.product.getSkuInfo(b);"true"==upDownButton&&$("#pro-detail-content-"+a.id).height($("#kindPicture-"+a.id).height()+$("#pro-detail-up-btn-"+a.id).height()+40);2E3>=$("#kindPicture-"+a.id).height()?($("#pro-detail-content-"+a.id).height($("#kindPicture-"+a.id).height()),$("#detail-content-button-"+a.id).hide(),$("#pro-detail-up-btn-"+a.id).css("display","none")):"true"==upDownButton?($("#detail-content-button-"+a.id).hide(),$("#pro-detail-up-btn-"+a.id).css("display","block")):"false"==upDownButton?($("#detail-content-button-"+a.id).show(),$("#pro-detail-up-btn-"+a.id).css("display","none")):($("#pro-detail-content-"+a.id).height("2000"),$("#detail-content-button-"+a.id).show(),$("#pro-detail-down-btn-"+a.id).click(function(){$("#pro-detail-content-"+a.id).height($("#kindPicture-"+a.id).height()+$("#pro-detail-up-btn-"+a.id).height()+40);$("#detail-content-button-"+a.id).hide();$("#pro-detail-up-btn-"+a.id).css("display","block");"true"==upDownButton}),$("#pro-detail-up-btn-"+a.id).click(function(){$("#pro-detail-content-"+a.id).height("2000");$("#detail-content-button-"+a.id).show();$("#pro-detail-up-btn-"+a.id).css("display","none");$("body,html").animate({scrollTop:tit1+1575},0);"false"==upDownButton}))});$("#myConsultation").click(function(){$("#myConsultation").hide();$("#upUserAdvisory").removeClass("hide").addClass("show");$("#stopConsultationId").show()});oTop=$(".product-tab").offset().top;$("#pro-tab-feature").click(function(){clickFlag||(tit1=$(".tit1").offset().top-150,scollFlag&&(tit1=$(".tit1").offset().top-50),clickFlag=!0);$("#pro-tab-feature").addClass("selected").siblings().removeClass("selected");$("body,html").animate({scrollTop:tit1+75},0)});$("#pro-tab-parameter").click(function(){clickFlag||(tit1=$(".tit1").offset().top-150,scollFlag&&(tit1=$(".tit1").offset().top-50),clickFlag=!0);$("#pro-tab-parameter").addClass("selected").siblings().removeClass("selected");tit2=tit1+$("#pro-tab-feature-content").height()+$("#hr60Detail").height();$("body,html").animate({scrollTop:tit2},0)});$("#pro-tab-package-service").click(function(){clickFlag||(tit1=$(".tit1").offset().top-150,scollFlag&&(tit1=$(".tit1").offset().top-50),clickFlag=!0);$("#pro-tab-package-service").addClass("selected").siblings().removeClass("selected");tit3=tit1+$("#pro-tab-feature-content").height()+$("#hr60Detail").height()+$("#productParameter").height()+$("#hr60Detail").height();$("body,html").animate({scrollTop:tit3},0)});$("#pro-tab-evaluate").click(function(){clickFlag||(tit1=$(".tit1").offset().top-150,scollFlag&&(tit1=$(".tit1").offset().top-50),clickFlag=!0);$("#pro-tab-evaluate").addClass("selected").siblings().removeClass("selected");tit4=tit1+$("#pro-tab-feature-content").height()+$("#hr60Detail").height()+$("#productParameter").height()+$("#hr60Detail").height()+$("#packagId").height()+$("#customerServiceLocation").height()+$("#productDetailstips").height();$("body,html").animate({scrollTop:tit4},0)});$(window).scroll(function(){var b=$(this).scrollTop()+1;detailContentHeight=$("#pro-tab-feature-content").height()+$("#hr60Detail").height();productParameterHeight=$("#productParameter").height()+$("#hr60Detail").height();packageServiceHeight=$("#packagId").height();customerServiceHeight=$("#customerServiceLocation").height()+$("#productDetailstips").height();b>oTop?($(".product-tab").addClass("product-tab-top").css({position:"fixed",top:"0",background:"#fff",width:"100%","z-index":"100"}),$(".product-tab-btn").css({display:"block"}),clickFlag||(tit1=$(".tit1").offset().top-50),scollFlag=!0):($(".product-tab").css({position:"static"}),$(".product-tab-btn").css({display:"none"}),$(".product-tab").removeClass("product-tab-top"),clickFlag||(tit1=$(".tit1").offset().top-150),scollFlag=!1);b>=tit1+75&&b<tit1+detailContentHeight&&$("#pro-tab-feature").addClass("selected").siblings().removeClass("selected");1==packFlag?b>=tit1+detailContentHeight&&b<tit1+detailContentHeight+productParameterHeight+$("#productDetailstips").height()&&$("#pro-tab-parameter").addClass("selected").siblings().removeClass("selected"):b>=tit1+detailContentHeight&&b<tit1+detailContentHeight+productParameterHeight&&$("#pro-tab-parameter").addClass("selected").siblings().removeClass("selected");0==packFlag&&b>=tit1+detailContentHeight+productParameterHeight&&b<tit1+detailContentHeight+productParameterHeight+packageServiceHeight+customerServiceHeight&&$("#pro-tab-package-service").addClass("selected").siblings().removeClass("selected");b>=tit1+detailContentHeight+productParameterHeight+packageServiceHeight+customerServiceHeight&&$("#pro-tab-evaluate").addClass("selected").siblings().removeClass("selected")})});ec.ui.proNumer=function(b,a){var c=$(b);a=$.extend({max:null,min:null,showButton:!0,minusBtn:'\x3ca id\x3d"pro-quantity-minus" href\x3d"javascript:;"\x3e\x26minus;\x3c/a\x3e',plusBtn:'\x3ca id\x3d"pro-quantity-plus" href\x3d"javascript:;"\x3e\x26#43;\x3c/a\x3e'},a);var e=function(b){var c=b.which,e=parseInt(this.value,10),e=1>e?1:e;if((37>c||40<c)&&8!=c&&46!=c&&(e>a.max||e<a.min||(48>c||57<c)&&(96>c||105<c)&&9!=c))return b.preventDefault(),!1};c.each(function(){var b=$.extend({},a),c=$(this).css("ime-mode","disabled"),g=c.attr("max");g&&(a.max=b.max=parseInt(g,10)||b.max);if(g=c.attr("min"))a.min=b.min=parseInt(g,10)||b.min;if(b.showButton){var g=$(b.minusBtn).click(function(){var a=c.val()||0,a=parseInt(a,10)-1;"number"==typeof b.min&&a<b.min||c.val(a).trigger("blur")}),h=$(b.plusBtn).click(function(){var a=c.val()||0,a=parseInt(a,10)+1;"number"==typeof b.max&&a>b.max||c.val(a).trigger("blur")}),g=$('\x3cp class\x3d"product-stock-btn"\x3e\x3c/p\x3e').append(h).append(g);c.after(g);1>=this.value?$("#pro-quantity-minus").removeClass().addClass("disabled"):$("#pro-quantity-minus").removeClass()}c.data("ovalue",c.val()||0).keydown(e).keyup(function(){var a=parseInt(this.value||0);"number"==typeof b.min&&a<b.min?this.value=b.min:"number"==typeof b.max&&a>b.max&&(this.value=b.max)}).blur(function(){1>=this.value?$("#pro-quantity-minus").removeClass().addClass("disabled"):$("#pro-quantity-minus").removeClass();if("function"===typeof b.onchange){var a=c.data("ovalue"),e=this.value||0,a=parseInt(e,10)-parseInt(a,10);0!=a&&(c.data("ovalue",e),b.onchange.call(this,e,a))}})})};ec.product.prefix="/product";ec.product.email=ec.autoEncodeAttr(ec.account.email);ec.product.mobile=ec.autoEncodeAttr(ec.account.mobile);var _skuForGetFeature={},_giftBuyItemId=[];(function(){var b=null,a=!0,c={},e={},d={},f={},g=[],h=[],l={},w={},n={},k={},r,m={},q={},x={};ec.product.getSkuPointWeight=function(a){return q[a]};ec.product.setSkuPointWeight=function(a,b){q[a]=b};ec.product.getSkuPointWeightDetail=function(a){return x[a]};ec.product.setSkuPointWeightDetail=function(a,b){x[a]=b};_proGallerysMouseOver=function(){var a=$(this);a.parent().parent().addClass("current").siblings().removeClass("current");clearTimeout(r);r=setTimeout(function(){var b=a.attr("src");$("#product-img").attr("href",b.replace("78_78","800_800")).find("img").attr("src",b.replace("78_78","428_428"));$("#product-img").CloudZoom()},150)};_updateSelect=function(){var a="";$("#pro-skus").find(".selected").each(function(){0< !$(this).parents("#giftPackageList").length&&0< !$(this).parents("#packageList").length&&(a+=ec.autoEncodeAttr($(this).children().children("a").attr("title"))+" / ")});a=a.substring(0,a.length-2);0<$("#packageSelect").length&&$("#packageSelect ul li").each(function(){if($(this).hasClass("selected")){var b=ec.autoEncodeAttr($(this).attr("data-attrname"));a+='\x3cdiv id\x3d"package-selected" class\x3d"inline"\x3e\x26nbsp;/\x26nbsp;'+b+"\x3c/div\x3e"}});0<$("#giftBuy_dl").length&&$("#giftBuy_dl ul li").each(function(){if($(this).hasClass("selected")){var b=$(this).find("a").attr("title");a+='\x3cdiv id\x3d"giftBuy-selected" class\x3d"inline"\x3e\x26nbsp;/\x26nbsp;'+b+"\x3c/div\x3e"}});a+="";$("#pro-select-sku").html(a);$("#pro-select-sku").parent().show()};_upadteSkuPrice=function(a){2!=a.priceMode&&(a.price=parseFloat(a.price).toFixed(2));parseFloat(a.originPrice)!=parseFloat(a.price)&&2!=a.priceMode?($("#pro-price-label").html("\u62a2\u8d2d\u4ef7"),$("#pro-price-label").removeClass("f24").addClass("type"),$("#pro-price").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+a.price),$("#pro-price-old").html("\x26yen;\x26nbsp;"+a.originPrice),$("#pro-price-label").show(),$("#pro-price").show(),$("#pro-price-old").show(),4!=ec.product.productType&&22!=parseInt(a.buttonMode)||$("#pro-price-hide").val(a.price)):($("#pro-price-old").hide(),$("#pro-price-label").hide(),$("#pro-price-old").html(""),$("#pro-price-label").html(""),0<a.price?4==ec.product.productType||22==parseInt(a.buttonMode)?($("#pro-price-hide").val(a.price),$("#pro-price").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+a.price),$("#pro-price").show(),$("#pro-price-label-deposit").hide(),$("#pro-price-deposit").hide(),$("#pro-price-label-amount").hide(),$("#pro-price-amount").hide(),$("#buyProcessIDD").hide(),$("#goAddressId").hide()):($("#pro-price").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+a.price),$("#pro-price").show()):($("#pro-price").html(""),$("#pro-price").hide(),$("#pro-price-label").html("\u6682\u65e0\u62a5\u4ef7"),$("#pro-price-label").hasClass("type")&&$("#pro-price-label").removeClass("type").addClass("f24"),$("#pro-price-label").show()));if(2==a.priceMode||0>=a.price)$("#pro-price").hide(),$("#pro-price-old").hide(),$("#pro-price-label").html("\u6682\u65e0\u62a5\u4ef7"),$("#pro-price-label").show()};_updateSkuInfo=function(){var a=ec.product.getSku(),c;if(a&&b!=a){ec.product.videoHide();$("#extendSelect").next().is("a")&&$("#extendSelect").next().remove();$("#extendSelect").parent().removeClass("selected");$("#accidentSelect").next().is("a")&&$("#accidentSelect").next().remove();$("#accidentSelect").parent().removeClass("selected");$("#ucareSelect").next().is("a")&&$("#ucareSelect").next().remove();$("#ucareSelect").parent().removeClass("selected");$("#package_dl").remove();$("#packageList").html("");$("#packageCode").val("");$("#giftPackageList").html("");ec.product.gift.packageGiftMap[a]==[];ec.product.setSkuId=b=a;$("#product-tips").hide();$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");$("#pro-quantity-area").show();$("#pro-quantity-area-nochange").hide();$("#product-operation").hide();ec.diypkg.init();ec.product.remark.getGbomCode()&&ec.product.remark.loadEvaluate({pageNumber:1,type:0,extraType:$("#productCommentId .product-comment-tab li.current a").attr("extratype"),gbomCode:ec.product.remark.getGbomCode()});a=e[a];ec.product.setType(a.type);_upadteSkuPrice(a);var d=[];d.push('\x3ca href\x3d"javascript:;" class\x3d"product-slogan-btn"\x3e\x3c/a\x3e');if(0<$.trim(a.timerPromWord).length){0<$.trim(a.timerPromLink4PC).length&&(c='\x3ca href\x3d"'+a.timerPromLink4PC+'" target\x3d"_blank" class\x3d"product-slogan-link"\x3e'+a.timerPromWord+"\x3c/a\x3e");var f=ec.product.getSysDate(),g=new Date;g.setTime(ec.util.parseDate(a.timerPromStarttime));var h=new Date;h.setTime(ec.util.parseDate(a.timerPromEndtime));0<=f-g&&0<=h-f&&d.push(c||'\x3cspan class\x3d"product-slogan-link"\x3e'+a.timerPromWord+"\x3c/span\x3e")}0<$.trim(a.skuPromWord).length&&d.push("\x3cspan\x3e"+a.skuPromWord+"\x3c/span\x3e");0<d.length?($("#skuPromWord").html(d.join(" ")),$("#skuPromWord").css("display","block"),$(".product-slogan-btn").hide(),$("#skuPromWord").attr("class","product-slogan"),40<$("#skuPromWord").height()&&($("#skuPromWord").attr("class","product-slogan product-slogan-hide"),$(".product-slogan-btn").show(),$(".product-slogan-btn").mouseenter(function(){$("#skuPromWord").hasClass("product-slogan-show")?$("#skuPromWord").attr("class","product-slogan product-slogan-hide"):$("#skuPromWord").attr("class","product-slogan product-slogan-show");ec.product.refreshStyle()}),$("#skuPromWord").mouseleave(function(){$("#skuPromWord").hasClass("product-slogan-show")&&($("#skuPromWord").attr("class","product-slogan product-slogan-hide"),ec.product.refreshStyle())}))):($("#skuPromWord").html(""),$("#skuPromWord").hide());0< !$.trim(a.skuPromWord).length&&0< !$.trim(a.timerPromWord).length&&$("#skuPromWord").hide();$("#pro-sku-code").val(a.code);$("#pro-sku-code2").text(a.code);$("#pro-name").html(a.name);$("#bread-pro-name").html(a.name);ec.product.execute("renderInventory",[ec.product.inventory.haveInventory(a.id)]);ec.product.showPosters();d=[];if(a.giftList&&0!=a.giftList.length)for(isShowGifts=!1,c=0;c<a.giftList.length;c++){if(1==a.giftList[c].displayType){isShowGifts=!0;break}}else isShowGifts=!1;isShowGifts?($("#product-info-list-new").show(),$("#pro-match-gift").show(),$("#pro-gift-list-select").html(ec.product.gift.ftl(ec.product.getSku()))):($("#product-prom-all").find("product-prom-item").length=1,"pro-match-gift"==$("#product-prom-all").find("product-prom-item").attr("id")&&$("#product-info-list-new").hide(),$("#pro-match-gift").hide());d=[];htmldetail=[];if(a.promotionLst&&0!=a.promotionLst.length){if($(".product-prom").parent().hasClass("hide")||"none"==$(".product-prom").parent().css("display"))$(".product-prom").parent().removeClass("hide"),$(".product-prom").parent().css("display","");$(".product-prom-item").eq(0).siblings().remove();1>$("#product-prom-all .product-prom-item:visible").length&&$("#product-info-list-new").hide();htmldetail.push(' \x3cdiv class\x3d"product-prom-item clearfix relative hide" id\x3d"promBtn"\x3e');htmldetail.push('\x3cp class\x3d"fl"\x3e');for(c=0;c<a.promotionLst.length;c++)htmldetail.push('\x3cem class\x3d"tag"\x3e'+a.promotionLst[c].promoLabel+"\x3c/em\x3e"),d.push('\x3cdiv class\x3d"product-prom-item clearfix" \x3e'),d.push('\x3cem class\x3d"tag"\x3e'+a.promotionLst[c].promoLabel+"\x3c/em\x3e"),d.push('\x3cdiv class\x3d"product-prom-con" title\x3d"'+a.promotionLst[c].ruleDescription+'"\x3e'),d.push(' \x3cspan class\x3d"product-prom-word"\x3e'),d.push(a.promotionLst[c].ruleDescription),d.push(" \x3c/span\x3e"),"1"==a.promotionLst[c].isRealNameAuth&&d.push('\x3ca href\x3d"/authmember/accesstoken" target\x3d"_blank"  class\x3d"product-prom-link"\x3e\u9650\u5b9e\u540d\u7528\u6237\u53c2\u52a0 \x3e\x3c/a\x3e'),d.push("\x3c/div\x3e"),d.push("\x3c/div\x3e");htmldetail.push('\x3c/p\x3e\x3cdiv class\x3d"product-prom-btn" id\x3d"show-all-prom"  \x3e\u5c55\u5f00\u4fc3\u9500\x3c/div\x3e\x3c/div\x3e');$(".product-prom").append(d.join(""));$(".product-prom .product-prom-item").hide();if(0<$("#pro-gift-list-select").find("a").length&&isShowGifts)if(4<$("#product-prom-all").children().length){for(c=0;3>c;c++)$(".product-prom-item").eq(c).show();$(".product-prom").append(htmldetail.join(""));$("#promBtn").show();for(c=0;2>c;c++)$("#promBtn em").eq(c).hide()}else $(".product-prom .product-prom-item").show(),$(".product-prom").append(htmldetail.join(""));else if(5<$("#product-prom-all").children().length){for(c=1;4>c;c++)$(".product-prom-item").eq(c).show();$(".product-prom").append(htmldetail.join(""));$("#promBtn").show();for(c=0;3>c;c++)$("#promBtn em").eq(c).hide()}else $(".product-prom .product-prom-item").show(),$(".product-prom").append(htmldetail.join(""));(0< !$("#pro-gift-list-select").find("a").length||!isShowGifts)&&$("#pro-match-gift").hide()}else $(".product-prom-item").eq(0).siblings().remove(),(0>$("#pro-gift-list-select").children().length||!a.giftList||0==a.giftList.length)&&$("#product-info-list-new").hide(),1>$("#product-prom-all .product-prom-item:visible").length&&$("#product-info-list-new").hide();d=[];ec.product.seCode!=ec.product.productSeCode?d.push("\x3cp\x3e\u5df2\u5305\u90ae\x3cem\x3e\x3c/em\x3e\u7531"+ec.product.productshopName+"\u53d1\u8d27\uff0c\u5e76\u63d0\u4f9b\u552e\u540e\u670d\u52a1\x3c/p\x3e"):(0<parseFloat(ec.product.deliveryModeValueFreeBase)&&0==ec.product.productType?2!=a.priceMode&&(parseFloat(a.price)>=parseFloat(ec.product.deliveryModeValueFreeBase)?d.push("\x3cp\x3e\u5df2\u6ee1"+ec.product.deliveryModeValueFreeBase+"\u5143\u5df2\u514d\u8fd0\u8d39\x3cem\x3e\x3c/em\x3e"):d.push("\x3cp\x3e\u6ee1"+ec.product.deliveryModeValueFreeBase+"\u5143\u5373\u514d\u8fd0\u8d39\uff0c\u5feb\u53bb\u51d1\u5355\u5427\x3cem\x3e\x3c/em\x3e")):d.push("\x3cp\x3e"),d.push("\u7531\u534e\u4e3a\u5546\u57ce\u8d1f\u8d23\u53d1\u8d27\uff0c\u5e76\u63d0111\u4f9b\u552e\u540e\u670d\u52a1\x3c/p\x3e"));void 0!=$("#pro-select-gift-service")&&($("#pro-select-gift-service").remove(),_giftBuyItemId=[]);void 0!=$("#giftBuy_dl")&&$("#giftBuy_dl").remove();c=!1;"11"==a.buttonMode&&(c=!0);$("#isPriority").val();$("#package_dl").remove();$("#packageList").html("");$("#packageCode").val("");if(null!=a.pro_sbomList&&""!=a.pro_sbomList&&0<a.pro_sbomList.length&&ec.product.inventory.haveInventory(a.id)){d=[];f=a.pro_sbomList;for(g=0;g<f.length;g++)if(a.code==f[g].sbomCode)if(h=f[g].sbomPackageList,null!=h&&""!=h&&0<h.length){ec.product.hidebundleView();d.push('\x3cdl class\x3d"product-choose clearfix" id\x3d"package_dl"\x3e\x3clabel\x3e\u9009\u62e9\u5957\u9910\x3c/label\x3e\x3cdiv class\x3d"product-choose-detail relative" id \x3d "packageSelect"\x3e\x3cul\x3e');d.push('\x3cli class\x3d"selected" data-attrname\x3d"\u5355\u54c1"\x3e');d.push('\x3cdiv class\x3d"sku"\x3e');d.push('\x3ca href\x3d"javascript:;" title\x3d"\u5355\u54c1" onclick\x3d"ec.product.newpackageView(this,null,\''+a.code+"')\"\x3e\x3cp\x3e\x3cspan\x3e\u5355\u54c1\x3c/span\x3e\x3c/p\x3e\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e");for(var l=0;l<h.length;l++)d.push('\x3cli class\x3d"" data-attrname\x3d"'+h[l].name+'"\x3e'),d.push('\x3cdiv class\x3d"sku"\x3e\x3ca href\x3d"javascript:;" attr-package\x3d'+h[l].packageCode+' title\x3d"'+h[l].name+'" onclick\x3d"ec.product.newpackageView(this,\''+h[l].packageCode+"','"+a.code+"')\"\x3e\x3cp\x3e\x3cspan attr-package\x3d"+h[l].packageCode+"\x3e"+h[l].name+"\x3c/span\x3e\x3c/p\x3e\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e");d.push('\x3c/ul\x3e\x3cdiv id\x3d"packageList"\x3e\x3c/div\x3e\x3c/dl\x3e')}else $("#bundlePackage").removeClass("hide");0<$("#bundlePackage").length?$("#bundlePackage").after(d.join("")):$("#pro-skus").after(d.join(""))}else $("#packageList").html("");if(0<a.giftBuyLstX.length){d=[];d.push('\x3cdl class\x3d"product-choose clearfix" id\x3d"giftBuy_dl"\x3e\x3clabel\x3e\u589e\u503c\u4e1a\u52a1\x3c/label\x3e\x3cdiv class\x3d"product-choose-detail"\x3e\x3cul\x3e');d.push('\x3cli class\x3d"selected" data-attrname\x3d"\u65e0\u589e\u503c\u670d\u52a1"\x3e');d.push('\x3ca href\x3d"javascript:;" title\x3d"\u65e0\u589e\u503c\u670d\u52a1"\x3e\x3cp\x3e\x3cspan\x3e\u65e0\u589e\u503c\u670d\u52a1\x3c/span\x3e\x3c/p\x3e\x3c/a\x3e\x3c/li\x3e');for(f=0;f<a.giftBuyLstX.length;f++)g=a.giftBuyLstX[f],d.push('\x3cli class\x3d"'+("false"==g.hasInv||c?"disabled":"")+'" data-skuid\x3d"'+g.id+'"\x3e'),d.push('\x3ca href\x3d"javascript:;" title\x3d"'+g.name+'" data-code\x3d"'+g.sbomCode+'"interest-price\x3d"'+g.price+'" data-pid\x3d"'+g.productId+'"\x3e\x3cp\x3e\x3cspan\x3e'+g.name+"\x3c/span\x3e\x3c/p\x3e\x3c/a\x3e\x3c/li\x3e");d.push('\x3ca href\x3d"javascript:;" target\x3d"_blank" class\x3d"btn-product-more hidden" id\x3d"gift-service-detail-link"\x3e\x3cspan\x3e\u4e86\u89e3\u8be6\u60c5\x3c/span\x3e\x26gt;\x3c/a\x3e');d.push("\x3c/ul\x3e\x3c/div\x3e\x3c/dl\x3e");0<$("#conRelItemList").length?$("#conRelItemList").after(d.join("")):$("#contractLst").after(d.join(""));c=[];c.push('\x3cdiv id\x3d"giftBuy-selected" class\x3d"inline"\x3e\x26nbsp;/\x26nbsp;\u65e0\u589e\u503c\u670d\u52a1\x3c/div\x3e');d=$("#pro-select-sku").html();$("#pro-select-sku").html(d+c.join(""));ec.product.hasRemovedCartButton=!1;$("#giftBuy_dl li").find("a").each(function(){$(this).parent().hasClass("disabled")||$(this).click(function(){$(this).parent().addClass("selected").siblings().removeClass("selected");var a=$(this).attr("data-code");void 0!=$("#pro-select-gift-service")&&$("#pro-select-gift-service").remove();if(void 0!=a&&0<a.length){ec.diypkg.hide();_giftBuyItemId=[];_giftBuyItemId.push(a);pushProGiftBuySerMsg();$("#gift-service-detail-link").attr("href","/product/"+$(this).attr("data-pid")+".html");$("#gift-service-detail-link").show();$("#giftBuy-selected").remove();a=[];a.push('\x3cdiv id\x3d"giftBuy-selected" class\x3d"inline"\x3e\x26nbsp;/\x26nbsp;'+$(this).attr("title")+"\x3c/div\x3e");var b=$("#pro-select-sku").html();$("#pro-select-sku").html(b+a.join(""));2!=$("#pro-operation").find("a").length||"\u52a0\u5165\u8d2d\u7269\u8f66"!=$("#pro-operation").find("a").first().find("span").html()||$("#pro-operation").find("a").first().hasClass("disabled")||($("#pro-operation").find("a").first().remove(),$("#pro-operation").attr("data-gift",2),ec.product.hasRemovedCartButton=!0)}else ec.diypkg.render(),_giftBuyItemId=[],$("#gift-service-detail-link").attr("href",""),$("#gift-service-detail-link").hide(),$("#pro-operation").attr("data-gift",0),1==$("#pro-operation").find("a").length&&!$("#pro-operation").find("a").hasClass("disabled")&&ec.product.hasRemovedCartButton&&($("#pro-operation").find("a").before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button01"\x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e'),ec.product.hasRemovedCartButton=!1),void 0!=$("#pro-select-gift-service")&&$("#pro-select-gift-service").remove(),$("#giftBuy-selected").remove(),a=[],a.push('\x3cdiv id\x3d"giftBuy-selected" class\x3d"inline"\x3e\x26nbsp;/\x26nbsp;\u65e0\u589e\u503c\u670d\u52a1\x3c/div\x3e'),b=$("#pro-select-sku").html(),$("#pro-select-sku").html(b+a.join(""));ec.product.interest.queryFreeDetail()})})}else void 0!=$("#giftBuy_dl")&&$("#giftBuy_dl").remove();if(0<a.prolongLst.length){var k,d=[],n=[],f=[],r=[],w=[],m=0,g=[],h=[],q=[],l=[],I=[],J=[],y=0,d=[],F=[],G=[];for(c=0;c<a.prolongLst.length;c+=1)k=a.prolongLst[c],1==k.serviceType&&(w[m]=k.id,F[m]=k.sbomCode,n[m]=k.productId,r[m]=k.brifeName,q[m]=k.price,I[m]=k.orderPrice,m+=1),2==k.serviceType&&(h[y]=k.id,G[y]=k.sbomCode,f[y]=k.productId,g[y]=k.brifeName,l[y]=k.price,J[y]=k.orderPrice,y+=1),0==k.serviceType&&d.push(k);$("#extendProtected").find("ul").html("");$("#accidentProtected").find("ul").html("");$("#pro-service").hide();$("#extendSelect").attr("skuid","");$("#extendSelect").attr("data-scode","");$("#extendSelect").attr("interest-price","");$("#accidentSelect").attr("skuid","");$("#accidentSelect").attr("data-scode","");$("#accidentSelect").attr("interest-price","");$("#extendSelect").html("");$("#accidentSelect").html("");$(".product-operation-main").css("min-height","49px");0<m||0<y||0<d.length?$("#pro-service").show():$("#pro-service").hide();if(0<m){$("#extendProtected").parent().parent().show();for(c=0;c<m;c++){if(q[c]<I[c]){k='\x26nbsp;\x3cs class\x3d"fl"\x3e\uffe5'+I[c]+"\x3c/s\x3e";var K='\x3cem class\x3d"product-service-icon"\x3e\u4f18\u60e0\x3c/em\x3e'}else K=k="";k=$('\x3cli\x3e\x3cdiv class\x3d"fl" onclick\x3d"checkedThis(this,\''+F[c]+'\',\'extendedName\',\'extendProtected\');"\x3e\x3cinput type\x3d"checkbox" name\x3d"extendedName"\x3e\x3cdiv id\x3d"'+F[c]+'" class\x3d"product-service-listcon" title\x3d"'+r[c]+'"  skuID\x3d"'+w[c]+'"data-scode\x3d"'+F[c]+'"data-price\x3d"'+q[c]+'"\x3e'+K+'\x3cspan class\x3d"fl max-w"\x3e'+r[c]+'\x3c/span\x3e\x3cp class\x3d"f1"\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+q[c]+"\x3c/span\x3e"+k+'\x3ca target\x3d"_blank" href\x3d"/product/'+n[c]+'.html"\x3e\u8be6\u60c5\x26nbsp;\x26gt;\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e');k.appendTo($("#extendProtected").find("ul"))}c='\x3cspan class\x3d"fl max-w"\x3e'+r[0]+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+q[0]+"\x3c/span\x3e";$("#extendProtected").parent().before('\x3ca href\x3d"javascript:;"  onclick\x3d"ec.product.click_function(this)"  class\x3d"product-service-btn"\x3e'+c+"\x3c/a\x3e")}else $("#extendProtected").parent().parent().hide();if(0<y){$("#accidentProtected").parent().parent().show();for(c=0;c<y;c++)l[c]<J[c]?(n='\x26nbsp;\x3cs class\x3d"fl"\x3e\uffe5'+J[c]+"\x3c/s\x3e",r='\x3cem class\x3d"product-service-icon"\x3e\u4f18\u60e0\x3c/em\x3e'):r=n="",n=$('\x3cli\x3e\x3cdiv class\x3d"fl" onclick\x3d"checkedThis(this,\''+G[c]+'\',\'accidentName\',\'accidentProtected\');"\x3e\x3cinput type\x3d"checkbox" name\x3d"accidentName" \x3e\x3cdiv id\x3d"'+G[c]+'" class\x3d"product-service-listcon" title\x3d"'+g[c]+'"  skuID\x3d"'+h[c]+'" data-scode\x3d"'+G[c]+'"data-price\x3d"'+l[c]+'"\x3e'+r+'\x3cspan class\x3d"fl max-w"\x3e'+g[c]+'\x3c/span\x3e\x3cp class\x3d"fl"\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+l[c]+"\x3c/span\x3e"+n+'\x3ca target\x3d"_blank" href\x3d"/product/'+f[c]+'.html"\x3e\u8be6\u60c5\x26nbsp;\x26gt;\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e'),n.appendTo($("#accidentProtected").find("ul"));c='\x3cspan class\x3d"fl max-w"\x3e'+g[0]+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+l[0]+"\x3c/span\x3e";$("#accidentProtected").parent().before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.click_function(this)" class\x3d"product-service-btn"\x3e'+c+"\x3c/a\x3e")}else $("#accidentProtected").parent().parent().hide();if(0<d.length){$("#ucareProtected").find("ul").html("");$("#j-ucare").show();for(c=0;c<d.length;c++)d[c].price<d[c].orderPrice?(n='\x26nbsp;\x3cs class\x3d"fl"\x3e\uffe5'+d[c].orderPrice+"\x3c/s\x3e",r='\x3cem class\x3d"product-service-icon"\x3e\u4f18\u60e0\x3c/em\x3e'):r=n="",n=$('\x3cli\x3e\x3cdiv class\x3d"fl" onclick\x3d"checkedThis(this,\''+d[c].sbomCode+'\',\'ucareName\',\'ucareProtected\');"\x3e\x3cinput type\x3d"checkbox" name\x3d"ucareName" \x3e\x3cdiv id\x3d"'+d[c].sbomCode+'" class\x3d"product-service-listcon" title\x3d"'+d[c].brifeName+'"  skuID\x3d"'+d[c].id+'" data-scode\x3d"'+d[c].sbomCode+'"data-price\x3d"'+d[c].price+'"\x3e'+r+'\x3cspan class\x3d"fl max-w"\x3e'+d[c].brifeName+'\x3c/span\x3e\x3cp class\x3d"fl"\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+d[c].price+"\x3c/span\x3e"+n+'\x3ca target\x3d"_blank" href\x3d"/product/'+d[c].productId+'.html"\x3e\u8be6\u60c5\x26nbsp;\x26gt;\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e'),n.appendTo($("#ucareProtected").find("ul"));c='\x3cspan class\x3d"fl max-w"\x3e'+d[0].brifeName+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+d[0].price+"\x3c/span\x3e";$("#ucareProtected").parent().before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.click_function(this)" class\x3d"product-service-btn"\x3e'+c+"\x3c/a\x3e");$("#j-ucare").mouseover(function(){$("#j-ucare").addClass("hover")}).mouseout(function(){$("#j-ucare").removeClass("hover")})}else $("#j-ucare").hide()}else $("#pro-service").hide(),$("#extendSelect").attr("skuid",""),$("#extendSelect").attr("data-scode",""),$("#extendSelect").attr("interest-price",""),$("#accidentSelect").attr("skuid",""),$("#accidentSelect").attr("data-scode",""),$("#accidentSelect").attr("interest-price",""),$("#extendSelect").html(""),$("#accidentSelect").html(""),$("#extendProtected ul").each(function(a){$(this).html("")}),$("#accidentProtected ul").each(function(a){$(this).html("")});ec.product.showSbomInterest(a);_updateSelect();$("#integral").html(a.integral);ec.product.renderGroup(b);a=ec.product.getSkuInfo(ec.product.getSku());4==ec.product.productType&&22!=parseInt(a.buttonMode)?ec.product.depositActivity(ec.product.getSku()):22==parseInt(a.buttonMode)?ec.product.depositNewActivity(ec.product.getSku()):($("#goAddressId").hide(),$("#buyProcessIDD").hide(),ec.product.depositInfoNew={},ec.product.depositInfo={},$("#product-deposit-agreement-area")&&$("#product-deposit-agreement-area").hide(),$("#buyProcessIDD").hide(),$("#pro-price-label-deposit").html(""),$("#pro-price-label-deposit").show(),$("#pro-price-deposit").html(""),$("#pro-price-deposit").show(),$("#pro-price-label-amount").hide(),$("#pro-price-amount").hide(),$("#pro-global-parameter").attr("data-skulist-rushbuy")&&ec.product.rushbuyActivity());packFlag=!1;upDownButton="";ec.product.getFeature(a.id);ec.product.getParameter(a.id,a.code);ec.product.getPackageAndService(a.id);ec.product.switchSku();$(".product-tab-btn").css({display:"none"});""!=$("#packageCode").val()?ec.product.hiddenTips():ec.product.processSupportDisplayDilieryTime(a);ec.product.queryPointWeight(ec.product.setSkuId||ec.product.defaultSku);if((d=ec.product.coupon.sbomCouponList[a.code])||""==d)if($("#couponBtn").show(),$("#couponTag").html(""),""!=d){f=[];if(3<d.length)for(c=0;c<d.length&&!(3>c&&null!=d[c].couponTag&&f.push("\x3cspan onclick\x3d\"ec.product.coupon.clickBtn('"+a.code+'\')" class\x3d"product-ticket"\x3e'+d[c].couponTag+"\x3c/span\x3e"),3<=c);c++);else for(c=0;c<d.length;c++)null!=d[c].couponTag&&f.push("\x3cspan onclick\x3d\"ec.product.coupon.clickBtn('"+a.code+'\')" class\x3d"product-ticket"\x3e'+d[c].couponTag+"\x3c/span\x3e");f.push(' \x3ca href\x3d"javascript:;" id\x3d"immediatelyReceiveID" class\x3d"product-ticket-link" onclick\x3d"ec.product.coupon.clickBtn(\''+a.code+"')\"\x3e\u7acb\u5373\u9886\u53d6\x26nbsp;\x26gt;\x3c/a\x3e");$("#couponTag").html(f.join(" "))}else $("#couponBtn").hide();else ec.product.coupon.loadCoupon(a.code);$("#product-prom-all").live("mouseenter",function(){$(".product-prom").addClass("show");$("#promBtn").css("display","none");$(".product-prom-item").hide();$(".product-prom-item").show();isShowGifts||$("#pro-match-gift").hide();$("#promBtn").hide()});$(".product-prom").live("mouseleave",function(){if(isShowGifts){if(5>$("#product-prom-all").children().length)return}else if(6>$("#product-prom-all").children().length)return;$(".product-prom").removeClass("show");$("#promBtn").css("display","block");$(".product-prom .product-prom-item").hide();if(isShowGifts){for(var a=0;3>a;a++)$(".product-prom-item").eq(a).show();$("#promBtn").show();for(a=0;2>a;a++)$("#promBtn em").eq(a).hide()}else{for(a=1;4>a;a++)$(".product-prom-item").eq(a).show();$("#promBtn").show();for(a=0;3>a;a++)$("#promBtn em").eq(a).hide()}})}};ec.product.tabSkuInfo=function(a){$("#pro-tab-feature-content-"+a+", #pro-tab-feature-content2-"+a+", #pro-tab-parameter-content-"+a+", #pro-tab-package-content-"+a+", #pro-tab-service-content-"+a).show().siblings().hide();var b=ec.product.getSkuInfo(a);parseFloat(b.price);$("#combList-list-"+a).show().siblings().hide();$("#combList-list-"+a).children().eq(0).hasClass("current")||$("#combList-list-"+a).children().eq(0).addClass("current").siblings().removeClass("current")};ec.product.addSkuAttr=function(a,b,c,d,n){var A=e[a];A?A.attrIds.push(d):e[a]={attrIds:[d]};f[d]=a;(A=l[c])?-1==A.indexOf(n)&&A.push(n):(h.push(c),g.push(b),l[c]=[n]);(c=w[b+"-"+n])?c.push(d):w[b+"-"+n]=[d];k[n]||(k[n]=[]);k[n].push(a)};ec.product.setSku=function(a,b){b=b||{};b.id=a;$.extend(e[a]||(e[a]={}),b)};ec.product.getAllSku=function(){return e};ec.product.getSku=function(){var a;$.each(n,function(){if(a){for(var b=[],c=0;c<a.length;c++)for(var d=0;d<this.length;d++)a[c]==this[d]&&b.push(a[c]);a=b}else a=this});return a&&1==a.length?a[0]:b||ec.product.defaultSku};ec.product.getSkuInfo=function(a){return e[a]};ec.product.setSkuForParement=function(a){c[a]=a};ec.product.getSkuForParement=function(a){return c[a]};ec.product.setSkuForFeature=function(a){_skuForGetFeature[a]=a};ec.product.getSkuForFeature=function(a){return _skuForGetFeature[a]};ec.product.setSkuShowType=function(a,b){d[a]=b};ec.product.setSkuPriority=function(a){m[a]=!0};ec.product.getSkuPriority=function(a){return m[a]};ec.product.selectBySku=function(a){var b=e[a];b&&b.attrIds?$("#pro-skus").find(".attr"+b.attrIds.join(",.attr")).children(".sku").trigger("click"):(_upadteSkuPrice(b),4==ec.product.productType?ec.product.depositActivity(a):($("#goAddressId").hide(),$("#pro-global-parameter").attr("data-skulist-rushbuy")&&ec.product.rushbuyActivity()),ec.product.showPosters(),ec.product.refreshStyle())};ec.product.queryPointWeight=function(a){var b=e[a];if((b||b.code)&&1!=ec.product.productType&&2!=ec.product.productType&&5!=ec.product.productType&&6!=ec.product.productType&&"VMALL-HUAWEIDEVICE"==ec.product.seCode)if(void 0!=ec.product.getSkuPointWeight(b.code)){$("#promBtn p").append(ec.product.getSkuPointWeightDetail(b.code));a=[];a.push('\x3cdiv class\x3d"product-prom-item clearfix relative" id\x3d"promBtn"\x3e');a.push($("#promBtn").html());a.push("\x3c/div\x3e");$("#promBtn").remove();$(".product-prom").append(ec.product.getSkuPointWeight(b.code));$(".product-prom .product-prom-item").hide();if(0<$("#pro-gift-list-select").find("a").length&&isShowGifts)if(4<$("#product-prom-all").children().length){for(var c=0;3>c;c++)$(".product-prom-item").eq(c).show();$(".product-prom").append(a.join(""));$("#promBtn").show();for(c=0;2>c;c++)$("#promBtn em").eq(c).hide()}else $(".product-prom .product-prom-item").show();else if(5<$("#product-prom-all").children().length){for(c=1;4>c;c++)$(".product-prom-item").eq(c).show();$(".product-prom").append(a.join(""));$("#promBtn").show();for(c=0;3>c;c++)$("#promBtn em").eq(c).hide()}else $(".product-prom .product-prom-item").show();if($(".product-prom").parent().hasClass("hide")||"none"==$(".product-prom").parent().css("display"))$(".product-prom").parent().removeClass("hide"),$(".product-prom").parent().css("display","");(0< !$("#pro-gift-list-select").find("a").length||!isShowGifts)&&$("#pro-match-gift").hide();$("#pro-promotions-list").parent().parent().hasClass("hide")&&$("#pro-promotions-list").parent().parent().removeClass("hide");ec.product.refreshStyle()}else $.ajax({url:openApiDomain+"/point/queryPointWeight.json?skuCodes\x3d["+b.code+"]",dataType:"json",timeout:1E4,beforeSend:function(a){a.withCredentials=!0},success:function(a){var c=1;if("200000"==a.resultCode&&(a.pointWeightMap=a.data,null!=a.pointWeightMap))for(var d in a.pointWeightMap)null!=a.pointWeightMap[d]&&(c=a.pointWeightMap[d]);a=[];d=[];if(0!=c){1==c?(d.push('\x3cem class\x3d"tag"\x3e\u8d60\u9001\u79ef\u5206\x3c/em\x3e'),a.push('\x3cdiv class\x3d"product-prom-item clearfix" \x3e'),a.push('\x3cem class\x3d"tag"\x3e\u8d60\u9001\u79ef\u5206\x3c/em\x3e'),a.push('\x3cdiv class\x3d"product-prom-con"\x3e'),a.push("\u8d2d\u4e70\u5373\u8d60\u5546\u57ce\u79ef\u5206\uff0c\u79ef\u5206\u53ef\u62b5\u73b0~"),a.push("\x3c/div\x3e"),a.push("\x3c/div\x3e")):1<c&&(d.push('\x3cem class\x3d"tag"\x3e\u79ef\u5206\u7ffb\u500d\x3c/em\x3e'),a.push('\x3cdiv class\x3d"product-prom-item clearfix" \x3e'),a.push('\x3cem class\x3d"tag"\x3e\u79ef\u5206\u7ffb\u500d\x3c/em\x3e'),a.push('\x3cdiv class\x3d"product-prom-con"\x3e'),a.push("\u6d3b\u52a8\u8d60\u9001\u7ffb\u500d\u79ef\u5206\uff0c\u79ef\u5206\u53ef\u62b5\u73b0~"),a.push("\x3c/div\x3e"),a.push("\x3c/div\x3e"));$("#promBtn p").append(d.join(""));c=[];c.push('\x3cdiv class\x3d"product-prom-item clearfix relative" id\x3d"promBtn"\x3e');c.push($("#promBtn").html());c.push("\x3c/div\x3e");$("#promBtn").remove();$(".product-prom").append(a.join(""));$(".product-prom .product-prom-item").hide();if(0<$("#pro-gift-list-select").find("a").length&&isShowGifts)if(4<$("#product-prom-all").children().length){for(var e=0;3>e;e++)$(".product-prom-item").eq(e).show();$(".product-prom").append(c.join(""));$("#promBtn").show();for(e=0;2>e;e++)$("#promBtn em").eq(e).hide()}else $(".product-prom .product-prom-item").show();else if(5<$("#product-prom-all").children().length){for(e=1;4>e;e++)$(".product-prom-item").eq(e).show();$(".product-prom").append(c.join(""));$("#promBtn").show();for(e=0;3>e;e++)$("#promBtn em").eq(e).hide()}else $(".product-prom .product-prom-item").show();if($(".product-prom").parent().hasClass("hide")||"none"==$(".product-prom").parent().css("display"))$(".product-prom").parent().removeClass("hide"),$(".product-prom").parent().css("display","");(0< !$("#pro-gift-list-select").find("a").length||!isShowGifts)&&$("#pro-match-gift").hide();ec.product.setSkuPointWeight(b.code,a.join(" "));ec.product.setSkuPointWeightDetail(b.code,d.join(" "));ec.product.refreshStyle()}}})};ec.product.refreshStyle=function(){function a(){ec.product.refreshStyle()}var b=$(".product-operation-main").height();$(".product-property").css("min-height",536-b+"px").css("height","auto").css("padding-bottom",b+30+"px");$(".product-operation-main").removeClass("product-operation-location").addClass("product-operation-location");$(".product-choose li").unbind("click").click(a);$(".product-service-detail input").unbind("change").change(a)};ec.ready(function(){ec.product.hiddenTips();$(".product-tab-btn").css({display:"none"});for(var c=[],r,m,q,x,v=0;v<h.length;v++){r=g[v];x="2"==d[r];m=h[v];q='\x3cdl class\x3d"product-choose clearfix ';q=x?"\u5957\u9910"==m.transHtmlAttribute()||"\u7c7b\u578b"==m.transHtmlAttribute()?q+'" id \x3d "bundlePackage" \x3e':q+'"\x3e':"\u5957\u9910"==m.transHtmlAttribute()||"\u7c7b\u578b"==m.transHtmlAttribute()?q+' product-choosepic" id \x3d "bundlePackage" \x3e':q+' product-choosepic"\x3e';q+="\x3clabel\x3e\u9009\u62e9"+m+'\x3c/label\x3e\x3cdiv class\x3d"product-choose-detail ';q="\u5957\u9910"==m.transHtmlAttribute()||"\u7c7b\u578b"==m.transHtmlAttribute()?q+' relative" id \x3d "bundlePackageSelect" \x3e':q+'"\x3e';q+="\x3cul\x3e";c.push(q);for(var B=l[m],z=0;z<B.length;z++)if(q=w[r+"-"+B[z]],c.push('\x3cli class\x3d" attr'+q.join(" attr")+'" data-attrName\x3d"'+m+'" data-attrCode\x3d"'+r+'" data-attrId\x3d"'+q.join(",")+'" data-skuId\x3d"'+k[B[z]].join(",")+'"\x3e\x3cdiv class\x3d"sku"\x3e\x3ca  href\x3d"javascript:;" title\x3d"'+B[z]+'"\x3e'),x)c.push("\x3cp\x3e\x3cspan\x3e"),c.push(B[z]),c.push("\x3c/span\x3e\x3c/p\x3e\x3c/a\x3e");else{var u=e[f[q[0]]];c.push('\x3cimg src\x3d"'+ec.mediaPath+u.photoPath+"40_40_"+u.photoName+'" alt\x3d"'+B[z]+'"/\x3e');c.push("\x3cp\x3e\x3cspan\x3e"+B[z]+"\x3c/span\x3e\x3c/p\x3e\x3c/a\x3e")}c.push("\x3c/ol\x3e\x3c/dd\x3e\x3c/dl\x3e")}var D=$(c.join("")),H=function(a,c){var b=c.attr("data-skuId");if(0<c.parents("#packageSelect").length||0<c.parents("#giftPackageList").length)return!0;for(var d=!1,e=0,f=a.length;e<f;e++)if(-1<b.indexOf(a[e]+"")){d=!0;break}return d},L=function(a){var c=[],d=!0,e=null;$.each(a.find("li.selected").not($("#package_dl").find("li.selected")),function(){var a=$(this),f=a.find("a").attr("title"),g=ec.autoEncodeAttr(f),a="package_dl"==a.closest("dl").next().attr("id")?a.closest("dl").next().next().find("li").not($("#giftPackageList").find("li")):a.closest("dl").next().find("li").not($("#giftPackageList").find("li"));if(d)c=k[f]||k[g],$.each(a,function(){var a=$(this);H(c,a)?a.removeClass("disabled"):a.addClass("disabled").removeClass("selected")}),d=!1,e=b||ec.product.defaultSku;else{for(var h=[],f=k[f]||k[g],g=0;g<c.length;g++)for(var l=0;l<f.length;l++)c[g]==f[l]&&h.push(c[g]);c=h;1!=c.length?(e=b||ec.product.defaultSku,1<c.length&&$.each(a,function(){var a=$(this);H(c,a)?a.removeClass("disabled"):a.addClass("disabled").removeClass("selected")})):($.each(a,function(){var a=$(this);H(c,a)?a.removeClass("disabled"):a.addClass("disabled").removeClass("selected")}),e=c[0])}});return e};D.find(".sku").click(function(){var c=$(this).parent();if(c.hasClass("disabled"))return!1;for(var b=c.attr("data-attrId").split(","),d=c.attr("data-attrName"),g=[],h=0;h<b.length;h++)g.push(f[b[h]]);n[d]=g;c.addClass("selected").siblings().removeClass("selected");$("#layoutRelative p a").each(function(){if("none"!=$(this).css("display"))return $(this).addClass("selected").siblings().removeClass("selected"),!1});var c=L(D),l=null,k=!0;$.each(D.find("ul"),function(){var a=$(this);if(0<a.parents("#giftPackageList").length||0<a.parents("#packageList").length)return!0;if(1!=a.find("li.selected").length&&(l=a.find("li").not(a.find("li.disabled")).first(),1<=l.length))return k=!1;"\u589e\u503c\u4e1a\u52a1"==a.parents("#giftBuy_dl").text()&&ec.product.interest.queryFreeDetail()});k?(u=e[c],_updateSkuInfo(),_updateSelect(),a=!1,ec.product.refreshStyle(),ec.product.gift.showGiftPackageView($("#bundlePackageSelect").find(".selected").find("a"),!0)):l&&(a||$(l).find(".sku").trigger("click"))});0==$(".hot-area").find("li").size()&&($(".hot-area").hide(),$("#pro-seg-hot").hide());$("#pro-skus").html(D);v=[];v.push('\x3cdiv id\x3d"giftPackageList" class\x3d"hide"\x3e\x3c/div\x3e');$("#bundlePackageSelect").append(v.join(""));c=[];skuId=ec.product.getSku();u=ec.product.getSkuInfo(skuId);ec.product.seCode!=ec.product.productSeCode?c.push("\u5df2\u5305\u90ae\x3cem\x3e\x3c/em\x3e"+ec.product.productshopName+"\u53d1\u8d27\uff0c\u5e76\u63d0\u4f9b\u552e\u540e\u670d\u52a1"):(0<parseFloat(ec.product.deliveryModeValueFreeBase)&&0==ec.product.productType&&2!=u.priceMode&&(parseFloat(u.price)>=parseFloat(ec.product.deliveryModeValueFreeBase)?c.push("\u5df2\u6ee1"+ec.product.deliveryModeValueFreeBase+"\u5143\u5df2\u514d\u8fd0\u8d39\x3cem\x3e\x3c/em\x3e"):c.push("\u6ee1"+ec.product.deliveryModeValueFreeBase+"\u5143\u5373\u514d\u8fd0\u8d39\uff0c\u5feb\u53bb\u51d1\u5355\u5427\x3cem\x3e\x3c/em\x3e")),c.push("\u7531\u534e\u4e3a\u5546\u57ce\u8d1f\u8d23\u53d1\u8d27\uff0c\u5e76\u63d0\u4f9b\u552e\u540e\u670d\u52a1"));$("#service-description").html(c.join(" "));0==D.find(".sku").length&&(u=ec.product.getSku(),packFlag=!1,u=ec.product.getSkuInfo(u),upDownButton="",ec.product.getFeature(u.id),ec.product.getParameter(u.id,u.code),ec.product.getPackageAndService(u.id),ec.product.processSupportDisplayDilieryTime(u));ec.product.selectBySku(ec.product.setSkuId||ec.product.defaultSku);m=r=!1;c=ec.product.getSkuInfo(ec.product.setSkuId||ec.product.defaultSku);r=c.promotionLst&&0!=c.promotionLst.length?!0:!1;if(c.giftList&&0!=c.giftList.length)for(isShowGifts=!1,v=0;v<c.giftList.length;v++){if(1==u.giftList[v].displayType){isShowGifts=!0;break}}else m=!1;r||($("#pro-promotions-list").html(""),$("#pro-promotions-list").hide());m?($("#product-info-list-new").show(),$("#pro-match-gift").show(),$("#pro-gift-list-select").html(ec.product.gift.ftl(ec.product.getSku()))):($("#product-prom-all").find("product-prom-item").length=1,"pro-match-gift"==$("#product-prom-all").find("product-prom-item").attr("id")&&$("#product-info-list-new").hide(),$("#pro-gift").hide());$("#pro-gallerys").find("img").mouseover(_proGallerysMouseOver);v=getUrlParaMap4CartBinding().isSuccess;null!=v&&"0"==v&&bindCartResult("ec-binding-phone");$("#address").hover(function(){var a=ec.product.getSku(),a=ec.product.getSkuInfo(a);ec.product.processAddress(a)},function(){});ec.product.gift.showGiftPackageView($("#bundlePackageSelect").find(".selected").find("a"),!1);setTimeout(function(){ec.diypkg.init()},500)})})();ec.product.disableAddCartButtons=function(){$("#pro-operation a.product-button01").each(function(){$(this).removeClass("product-button01").addClass("product-button01 disabled");this.backup=this.onclick;this.onclick=""});$("#pro-operation a.product-button02").each(function(){$(this).removeClass("product-button02").addClass("product-button02 disabled");this.backup=this.onclick;this.onclick=""});$("#pro-operation a.button-book-2").each(function(){$(this).removeClass("pro-button01 button-style-2").addClass("pro-button01 button-style-disabled-2");this.backup=this.onclick;this.onclick=""});$("a.button-add-cart-2, a.button-add-cart-3").each(function(){$(this).removeClass("pro-button01 button-style-1").addClass("pro-button01 button-style-disabled-2");this.backup=this.onclick;this.onclick=""})};ec.product.enableAddCartButtons=function(){$("#pro-operation a.product-button01").each(function(){$(this).removeClass("product-button01 disabled").addClass("product-button01").css("background-position-y","8px");this.onclick=this.backup;this.backup=""});$("#pro-operation a.product-button02").each(function(){$(this).removeClass("product-button02 disabled").addClass("product-button02").css("background-position-y","8px");this.onclick=this.backup;this.backup=""});$("#pro-operation a.button-book-2").each(function(){$(this).removeClass("pro-button01 button-style-disabled-2").addClass("pro-button01 button-style-2");this.onclick=this.backup;this.backup=""});$("a.button-add-cart-2, a.button-add-cart-3").each(function(){$(this).removeClass("pro-button01 button-style-disabled-2").addClass("pro-button01 button-style-1");this.onclick=this.backup;this.backup=""})};ec.product.addCart=function(){var b=parseInt($("#pro-quantity").val()),a=parseInt($("#header-cart-total").html());ec.minicart.setNum(a+b);b=$("#pro-skus").find("dl").not($("#giftPackageList").find("dl")).not($("#packageList").find("dl"));for(p=0;p<b.length;p++){var c=!1,a=b.get(p);$(a).children(".product-choose-detail").children("ul").find("li").each(function(a){if(0<$(this).parents("#giftPackageList").length||0<$(this).parents("#packageList").length)return!0;$(this).hasClass("selected")&&(c=!0)});if(!c)return alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b"),!1}ec.product.disableAddCartButtons();b={salePortal:1,saleChannel:1001,needResultset:0,cartjson:ec.product.finalGift().cartjson};ec.cart.add(b,{successFunction:function(a){if(2E5==a.resultCode){var c=$("#pro-name").text()+"\u6210\u529f\u52a0\u5165\u8d2d\u7269\u8f66!";27<ec.product.compute($("#pro-add-success-mask"),c).h?$("#cart-tips").find("p").parent().removeClass("box-right-1").addClass("box-right-2"):$("#cart-tips").find("p").parent().removeClass("box-right-2").addClass("box-right-1");$("#cart-tips").find("p").text(c);$(".pro-add-success-total").hide();ec.minicart.setNum(a.cartNumber);(new ec.box($("#cart-tips").html(),{boxclass:"ol_box_4",showButton:!1})).open()}ec.product.enableAddCartButtons()},errorFunction:function(a){(new ec.box('\x3cdiv class\x3d"box-errors-1"\x3e\x3cspan\x3e'+a.msg+"\x3c/span\x3e\x3c/div\x3e",{boxclass:"ol_box_4",showButton:!0})).open();ec.product.enableAddCartButtons()}});ec.product.clickHide=function(a){$(document).click(function(){$("#"+a).hide()});$("#"+a).click(function(a){a.stopPropagation()})};ec.product.clickHide("cart-tips")};ec.product.compute=function(b,a){b.text(a);return{w:b[0].offsetWidth,h:b[0].offsetHeight}};ec.product.finalGift=function(b){ec.product.packageGetSkuCode();var a;a=ec.product.getSku();var c,e=$("#pro-sku-code").val();b=parseInt($("#pro-quantity").val());var d=$("#extendSelect").attr("data-scode"),f=$("#accidentSelect").attr("data-scode"),g=$("#ucareSelect").attr("data-scode"),h=ec.product.gift.finalMainSbomGiftMap[a],l=[],w=[],n=[],k="";if(""!=$("#packageCode").val()){c="P";for(var k={package_code:$("#packageCode").val()},r=$("#packageListCode").val().split(","),m=0;m<r.length;m++)cartTemp={itemCode:r[m],itemType:"P",qty:b},n.push(cartTemp)}else c="S0";if(h){for(var q in h)r={sbomCode:h[q].giftSkuCode},l.push({sbomCode:h[q].giftSkuId}),w.push(r),cartTemp={itemCode:h[q].giftSkuCode,itemType:"G",qty:b},n.push(cartTemp);if(ec.product.gift.packageGiftMap[a])for(q=0;q<ec.product.gift.packageGiftMap[a].length;q++)cartTemp={itemCode:ec.product.gift.packageGiftMap[a][q],itemType:"G",qty:b},n.push(cartTemp);0<d.length&&0<f.length?(n.push({itemCode:d,itemType:"S1",qty:b}),n.push({itemCode:f,itemType:"S6",qty:b})):0<d.length?n.push({itemCode:d,itemType:"S1",qty:b}):0<f.length&&n.push({itemCode:f,itemType:"S6",qty:b});a=JSON.stringify({itemCode:e,itemType:c,qty:b,subs:n,attrs:k})}else{if(ec.product.gift.packageGiftMap[a])for(q=0;q<ec.product.gift.packageGiftMap[a].length;q++)cartTemp={itemCode:ec.product.gift.packageGiftMap[a][q],itemType:"G",qty:b},n.push(cartTemp);0<d.length&&0<f.length?(n.push({itemCode:d,itemType:"S1",qty:b}),n.push({itemCode:f,itemType:"S6",qty:b}),a=JSON.stringify({itemCode:e,itemType:c,qty:b,subs:n,attrs:k})):0<d.length?(n.push({itemCode:d,itemType:"S1",qty:b}),a=JSON.stringify({itemCode:e,itemType:c,qty:b,subs:n,attrs:k})):0<f.length?(n.push({itemCode:f,itemType:"S6",qty:b}),a=JSON.stringify({itemCode:e,itemType:c,qty:b,subs:n,attrs:k})):(cartjson0={itemCode:e,itemType:c,qty:b,attrs:k,subs:n},a=JSON.stringify(cartjson0))}0<g.length&&(a=JSON.parse(a),a.subs.push({itemCode:g,itemType:"S15",qty:b}),a=JSON.stringify(a));return{cartjson:a}};ec.product.orderNowCover=function(){ec.product.isCover=!0;ec.account.afterLogin(function(){var b=$("#pro-skus").find("dl").not($("#giftPackageList").find("dl")).not($("#packageList").find("dl"));for(p=0;p<b.length;p++){var a=!1,c=b.get(p);$(c).children(".product-choose-detail").children("ul").find("li").each(function(c){if(0<$(this).parents("#giftPackageList").length||0<$(this).parents("#packageList").length)return!0;$(this).hasClass("selected")&&(a=!0)});if(!a)return alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b"),!1}ec.product.disableAddCartButtons();var e,d,b=ec.product.getSku(),b=$("#pro-sku-code").val(),c=$("#pro-quantity").val();e=$("#extendSelect").attr("skuid");d=$("#accidentSelect").attr("skuid");var f=$("#ucareSelect").attr("skuid"),g="",g='\x3cinput name\x3d"sbomCode" type\x3d"text" value\x3d"'+b+'"\x3e'+('\x3cinput name\x3d"quantity" type\x3d"text" value\x3d"'+c+'"\x3e');e&&(g+='\x3cinput name\x3d"extendServiceSKU" type\x3d"text" value\x3d"'+e+'"\x3e');d&&(g+='\x3cinput name\x3d"exceptionServiceSKU" type\x3d"text" value\x3d"'+d+'"\x3e');f&&(g+='\x3cinput name\x3d"ucareServiceSKU" type\x3d"text" value\x3d"'+f+'"\x3e');var g=g+'\x3cinput name\x3d"state" type\x3d"text" value\x3d"0"\x3e',h=$("#order-cover-form").append(g);ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){h.action=domainMain+"/uidesign/edit";h.submit()},500)})})};ec.product.orderEasyBuy=function(){var b=$("#pro-skus").find("dl").not($("#giftPackageList").find("dl")).not($("#packageList").find("dl"));for(p=0;p<b.length;p++){var a=!1,c=b.get(p);$(c).children(".product-choose-detail").children("ul").find("li").each(function(c){if(0<$(this).parents("#giftPackageList").length||0<$(this).parents("#packageList").length)return!0;$(this).hasClass("selected")&&(a=!0)});if(!a)return alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b"),!1}c=ec.product.getSku();b=ec.product.getSkuInfo(c);c=ec.product.gift.finalMainSbomGiftMap[c];$("#pro-sku-code").val();$("#extendSelect").attr("data-scode");$("#accidentSelect").attr("data-scode");if(c){var e=[],d;for(d in c)e.push(c[d].giftSkuCode);e.join(",")}""!=b.easyBuyPcUrl&&ec.redirectTo(b.easyBuyPcUrl)};ec.product.isEasyBuy=function(){var b=ec.product.getSkuInfo(ec.product.getSku()),a=$("#isPriority").val(),c=ec.product.getSkuPriority(ec.product.getSku());if(1==a&&1==c)return!1;if(b&&"1"==b.showEasyBuy){var e=b.easyBuyStartTime,a=b.easyBuyEndTime;if(""!=e&&""!=a){var c=ec.product.getSysDate(),d=new Date;d.setTime(ec.util.parseDate(e));e=new Date;e.setTime(ec.util.parseDate(a));if(0<c-d&&0>c-e&&"1"==b.webEnabled)return!0}else if(""!=e&&(c=ec.product.getSysDate(),d=new Date,d.setTime(ec.util.parseDate(e)),0<c-d&&"1"==b.webEnabled))return!0}return!1};ec.product.renderVisitorButton=function(b){b=ec.util.cookie.get("isValCas");var a=ec.util.cookie.get("CASLOGIN"),c=ec.util.cookie.get("uid"),e=ec.util.cookie.get("displayName");ec.account.isLogin()||null!=b||null!=a||null!=c||null!=e||(skuId=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku).id,"1"!=ec.product.isSupportVisitorMode||4==ec.product.productType||rush.sbom.isRushProduct()||rush.sbom.isRushSbom(skuId)||$("#product-deposit-agreement-area").next().remove())};ec.product.orderNowByVisitor=function(b){var a=$("#pro-skus").find("dl").not($("#giftPackageList").find("dl")).not($("#packageList").find("dl"));for(p=0;p<a.length;p++){var c=!1,e=a.get(p);$(e).children(".product-choose-detail").children("ul").find("li").each(function(a){if(0<$(this).parents("#giftPackageList").length||0<$(this).parents("#packageList").length)return!0;$(this).hasClass("selected")&&(c=!0)});if(!c)return alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b"),!1}ec.product.disableAddCartButtons();var a=[],d={};d.itemId=$("#pro-sku-code").val();d.qty=$("#pro-quantity").val();d.itemType="S0";9==ec.product.productType&&(d.itemType="S9");var f=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()],e=ec.product.getSku(),g=[];if(f)for(var h in f)g.push({sbomCode:f[h].giftSkuCode});if(ec.product.gift.packageGiftMap[e])for(h=0;h<ec.product.gift.packageGiftMap[e].length;h++)g.push({sbomCode:ec.product.gift.packageGiftMap[e][h]});d.gifts=g;d.subOrderItemReqArgs=[];h=$("#packageCode").val();""!=h&&(d.itemType="P",d.itemProp={package_code:h});h=$("#packageListCode").val();""!=h&&$.each(h.split(","),function(a,c){var b={itemId:c,qty:$("#pro-quantity").val(),itemType:"P"};d.subOrderItemReqArgs.push(b)});h={};2==b&&0<_giftBuyItemId.length&&(h.itemId=_giftBuyItemId[0],h.qty=$("#pro-quantity").val(),h.itemType="S10",h.mainSkuCode=$("#pro-sku-code").val(),d.subOrderItemReqArgs.push(h));d.subOrderItemReqArgs=ec.product.subServices(d.subOrderItemReqArgs);a.push(d);a=""+('\x3cinput name\x3d"orderReqJson" type\x3d"text" value\x3d\''+ec.lang.json.stringify(a)+"'\x3e")+'\x3cinput name\x3d"state" type\x3d"text" value\x3d"0"\x3e';2==b&&0<_giftBuyItemId.length&&(a+='\x3cinput name\x3d"routingTag" type\x3d"hidden" value\x3d"30"\x3e');b=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku);9==ec.product.productType&&(a=18==parseInt(b.buttonMode)?a+'\x3cinput name\x3d"routingTag" type\x3d"text" value\x3d"36"\x3e':a+'\x3cinput name\x3d"routingTag" type\x3d"text" value\x3d"28"\x3e');b=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku);"1"==ec.product.isSupportVisitorMode&&$("#order-confirm-form").attr("action","/visitor/vistorConfirm");$("#order-confirm-form").append(a).submit()};ec.product.orderNow=function(b,a){b=b||$("#pro-operation").attr("data-gift");ec.product.isGift=b;ec.product.isCover=!1;ec.product.isComb=!1;ec.account.afterLogin(function(){var c=$("#pro-skus").find("dl").not($("#giftPackageList").find("dl")).not($("#packageList").find("dl"));for(p=0;p<c.length;p++){var e=!1,d=c.get(p);$(d).children(".product-choose-detail").children("ul").find("li").each(function(a){if(0<$(this).parents("#giftPackageList").length||0<$(this).parents("#packageList").length)return!0;$(this).hasClass("selected")&&(e=!0)});if(!e)return alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b"),!1}ec.product.disableAddCartButtons();var c=[],f={};f.itemId=$("#pro-sku-code").val();f.qty=$("#pro-quantity").val();f.itemType="S0";9==ec.product.productType&&(f.itemType="S9");var g=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()],d=ec.product.getSku(),h=[];if(g)for(var l in g)h.push({sbomCode:g[l].giftSkuCode});if(ec.product.gift.packageGiftMap[d])for(l=0;l<ec.product.gift.packageGiftMap[d].length;l++)h.push({sbomCode:ec.product.gift.packageGiftMap[d][l]});f.gifts=h;f.subOrderItemReqArgs=[];l=$("#packageCode").val();""!=l&&(f.itemType="P",f.itemProp={package_code:l});l=$("#packageListCode").val();""!=l&&$.each(l.split(","),function(a,c){var b={itemId:c,qty:$("#pro-quantity").val(),itemType:"P"};f.subOrderItemReqArgs.push(b)});l={};2==b&&0<_giftBuyItemId.length&&(l.itemId=_giftBuyItemId[0],l.qty=$("#pro-quantity").val(),l.itemType="S10",l.mainSkuCode=$("#pro-sku-code").val(),f.subOrderItemReqArgs.push(l));f.subOrderItemReqArgs=ec.product.subServices(f.subOrderItemReqArgs);c.push(f);c='\x3cinput name\x3d"orderReqJson" type\x3d"text" value\x3d\''+ec.lang.json.stringify(c)+'\'\x3e\x3cinput name\x3d"state" type\x3d"text" value\x3d"0"\x3e';2==b&&0<_giftBuyItemId.length&&(c+='\x3cinput name\x3d"routingTag" type\x3d"hidden" value\x3d"30"\x3e');l=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku);9==ec.product.productType&&(c=18==parseInt(l.buttonMode)?c+'\x3cinput name\x3d"routingTag" type\x3d"text" value\x3d"36"\x3e':c+'\x3cinput name\x3d"routingTag" type\x3d"text" value\x3d"28"\x3e');"HB"===a?(l=$("#hbDetail .product-stages-main li.selected a"),0<l.length&&(c+='\x3cinput name\x3d"interest" type\x3d"text" value\x3d"'+l.attr("interest-info")+'"\x3e')):"HL"===a&&(l=$("#hlDetail .product-stages-main li.selected a"),0<l.length&&(c+='\x3cinput name\x3d"interest" type\x3d"text" value\x3d"'+l.attr("interest-info")+'"\x3e'));l=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku);var w=$("#order-confirm-form").append(c);ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){w.submit()},500)})},"visitorInfo")};ec.product.addCartWithLogin=function(){ec.account.afterLogin(ec.product.addCart)};ec.product.buyBundle=function(b,a){ec.dapClick("300020402",{buttonName:$(a).text(),number:$("#pro-quantity").val(),SKUCode:$("#pro-sku-code").val(),packagecode:$("#packageCode").val(),packageSKUCode:$("#packageListCode").val(),click:1});ec.product.disableAddCartButtons();paras={cartjson:ec.product.finalGift(b).cartjson};ec.cart.add(paras,{successFunction:function(a){ec.product.enableAddCartButtons();document.location.href="/cart2"},errorFunction:function(a){ec.product.enableAddCartButtons();alert(a.msg)}})};ec.product.addComb=function(b){var a=$(b).attr("data-index"),c=[];b=ec.product.getSku();var e=[b],d=[1],f=[1],g=$("#isPriority").val();skuCode=$("#pro-sku-code").val();var h={};h.itemCode=$("#pro-sku-code").val();h.qty=1;h.itemType="S0";c.push(h);var l=[];l.push({itemCode:skuCode,itemType:"S0",qty:1});$('[id\x3d"comb-pro-'+b+"-"+a+'"]').find("input[name\x3dskuId]:checked").each(function(){e.push(this.value);d.push(1);f.push(1);var a={};a.itemId=this.value;a.qty=1;a.itemType="S0";c.push(a);a={itemType:"S0",qty:1,itemCode:$(this).attr("data-scode")};l.push(a)});a={number:1,cartjson:JSON.stringify(l)};if(1==g&&1==ec.product.getSkuPriority(b))return ec.product.buy("sku",e);$("#order-confirm-form").attr({action:"/order/nowConfirmcart",method:"post"});ec.product.disableAddCartButtons();ec.lang.json.stringify(c);ec.cart.add(a,{successFunction:function(a){ec.product.enableAddCartButtons();document.location.href="/cart2"},errorFunction:function(a){ec.product.enableAddCartButtons();alert(a.msg)}})};ec.product.orderComb=function(b){ec.product.isComb=!0;ec.account.afterLogin(function(){var a=$("#pro-skus").find("dl").not($("#giftPackageList").find("dl")).not($("#packageList").find("dl"));for(p=0;p<a.length;p++){var c=!1,e=a.get(p);$(e).children(".product-choose-detail").children("ul").find("li").each(function(a){if(0<$(this).parents("#giftPackageList").length||0<$(this).parents("#packageList").length)return!0;$(this).hasClass("selected")&&(c=!0)});if(!c)return alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b"),!1}ec.product.disableAddCartButtons();var e=$(b).attr("data-index"),d=[],a={};$('[id\x3d"comb-pro-'+ec.product.getSku()+"-"+e+'"]').find("input[name\x3dskuId]:checked").each(function(){var a={};a.itemId=$(this).attr("data-scode");a.qty=1;a.itemType="S0";d.push(a)});a.itemId=$("#pro-sku-code").val();a.qty=$("#pro-quantity").val();a.itemType="S0";9==ec.product.productType&&(a.itemType="S9");var f=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()],e=ec.product.getSku(),g=[];if(f)for(var h in f)g.push({sbomCode:f[h].giftSkuCode});if(ec.product.gift.packageGiftMap[e])for(h=0;h<ec.product.gift.packageGiftMap[e].length;h++)g.push({sbomCode:ec.product.gift.packageGiftMap[e][h]});a.gifts=g;d.push(a);h=""+('\x3cinput name\x3d"orderReqJson" type\x3d"text" value\x3d\''+ec.lang.json.stringify(d)+"'\x3e")+'\x3cinput name\x3d"state" type\x3d"text" value\x3d"0"\x3e';a=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku);9==ec.product.productType&&(h=18==parseInt(a.buttonMode)?h+'\x3cinput name\x3d"routingTag" type\x3d"text" value\x3d"36"\x3e':h+'\x3cinput name\x3d"routingTag" type\x3d"text" value\x3d"28"\x3e');var a=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku),l=$("#order-confirm-form").append(h);ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){l.submit()},500)})})};ec.product.buy=function(b,a){ec.account.afterLogin(function(){var a="";if("sku"==b){var a=[],e={};e.itemId=$("#pro-sku-code").val();e.qty=1;e.itemType="S0";var d=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()],f=ec.product.getSku(),g=[];if(d)for(var h in d)g.push({sbomCode:d[h].giftSkuCode});if(ec.product.gift.packageGiftMap[f])for(h=0;h<ec.product.gift.packageGiftMap[f].length;h++)g.push({sbomCode:ec.product.gift.packageGiftMap[f][h]});e.gifts=g;e.subOrderItemReqArgs=[];e.subOrderItemReqArgs=ec.product.subServices(e.subOrderItemReqArgs);a.push(e);a='\x3cinput name\x3d"orderReqJson" type\x3d"text" value\x3d\''+ec.lang.json.stringify(a)+"'\x3e"}var l=$("#order-confirm-form").append(a);ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){l.submit()},500)})})};ec.product.subServices=function(b){b=b||[];var a=$("#extendSelect").attr("data-scode"),c=$("#accidentSelect").attr("data-scode"),e=$("#ucareSelect").attr("data-scode");if(0<a.length){var d={};d.itemId=a;d.qty=$("#pro-quantity").val();d.itemType="S1";d.mainSkuCode=$("#pro-sku-code").val();b.push(d)}0<c.length&&(d={},d.itemId=c,d.qty=$("#pro-quantity").val(),d.itemType="S6",d.mainSkuCode=$("#pro-sku-code").val(),b.push(d));0<e.length&&(d={},d.itemId=e,d.qty=$("#pro-quantity").val(),d.itemType="S15",d.mainSkuCode=$("#pro-sku-code").val(),b.push(d));return b};ec.product.timingBuy=function(){var b=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku),a=ec.product.getSysDate(),c=b.startTime,e=new Date;e.setTime(ec.util.parseDate(c));var d=[];d.push(c);c=b.countDown;$("#pro-operation").css("visibility","visible");$("#product-operation").show();0<=a-e?(d=b.endTime,e=new Date,null==d||""==d?e=new Date(2999,1,1,0,0,0):e.setTime(ec.util.parseDate(d)),0>a-e?ec.product.inventory.haveInventory(b.id)?(b='\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button01" \x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.orderNow()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e\x3cspan class\x3d"product-button-tips"\x3e\u9650\u65f6\u62a2\u8d2d\u8fdb\u884c\u4e2d\x3c/span\x3e',ec.product.renderVisitorButton($("#pro-operation")),$("#pro-operation").html(b),$("#product-operation").show()):($("#pro-quantity-area").hide(),$("#pro-operation").html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'),$("#product-operation").show(),ec.diypkg.hideAll()):($("#pro-operation").html('\x3ca href\x3d"javascript:;" class\x3d"product-button02 disabled"\x3e\u6d3b\u52a8\u5df2\u7ed3\u675f\x3c/a\x3e'),$("#pro-operation").css("visibility","visible"),$("#product-operation").show(),ec.diypkg.hideAll())):!ec.util.isEmpty(b.gotoUrl)&&(e-a)/36E5>c?1==b.isShowReminder?($("#pro-operation").html('\x3ca target\x3d"_blank" href\x3d"'+b.gotoUrl+'" class\x3d"product-button02" \x3e\x3cspan\x3e\u5f00\u552e\u63d0\u9192\x3c/span\x3e\x3c/a\x3e'),$("#product-operation").show()):0==b.isShowReminder&&(b='\x3ca href\x3d"javascript:;" class\x3d"product-button01 disabled" \x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;"  class\x3d"product-button02 disabled" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"product-time"\x3e\x3c/div\x3e',$("#pro-operation").html(b),$("#product-operation").show(),ec.ui.countdown2($(".product-time"),{html:"\x3cp\x3e\u79bb\u62a2\u8d2d\u5f00\u59cb\u8fd8\u6709\uff1a\x3c/p\x3e\x3cul\x3e\x3cli\x3e\x3cspan\x3e{#day}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e\u5929\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#hours}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e:\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#minutes}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e:\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#seconds}\x3c/span\x3e\x3c/li\x3e",now:a,times:d,callback:function(a){$("#pro-operation").html('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button01" \x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.orderNow()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e');$("#product-operation").show();ec.product.gift.updateOperationBtns()}})):(b='\x3ca href\x3d"javascript:;" class\x3d"product-button01 disabled" \x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;"  class\x3d"product-button02 disabled" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"product-time"\x3e\x3c/div\x3e',$("#pro-operation").html(b),$("#product-operation").show(),ec.ui.countdown2($(".product-time"),{html:"\x3cp\x3e\u79bb\u62a2\u8d2d\u5f00\u59cb\u8fd8\u6709\uff1a\x3c/p\x3e\x3cul\x3e\x3cli\x3e\x3cspan\x3e{#day}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e\u5929\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#hours}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e:\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#minutes}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e:\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#seconds}\x3c/span\x3e\x3c/li\x3e",now:a,times:d,callback:function(a){$("#pro-operation").html('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button01" \x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.orderNow()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e');$("#product-operation").show();ec.product.showSbomInterest(ec.product.getSkuInfo(ec.product.getSku()));ec.product.gift.updateOperationBtns()}}))};ec.product.arrival=function(){ec.account.afterLogin(function(){ec.product.syncCustomSession();var b=ec.product.email,a=ec.product.mobile,c="",e=new ec.box($("#product-arrival-html").val(),{boxid:"product-arriva-box",boxclass:"ol_box_4",title:"\u5230\u8d27\u901a\u77e5",width:700,showButton:!1,onopen:function(d){ec.util.isEmpty(b)?($("#arrival-email").css({cursor:"pointer"}),$("#arrival-email").click(function(){ec.openWindow("/member/account");ec.product.bind()}),$("#arrival-email").attr("class","disabled"),$("#account-email").html('\u672a\u7ed1\u5b9a\u5b89\u5168\u90ae\u7bb1\x26nbsp;\x3ca href\x3d"javascript:;" target\x3d"_blank"\x3e\u53bb\u7ed1\u5b9a\x3c/a\x3e')):($("#arrival-email").bind("click",function(){c=ec.product.chooseNoticeType("email")}),$("#account-email").html(b));ec.util.isEmpty(a)?($("#arrival-mobile").css({cursor:"pointer"}),$("#arrival-mobile").click(function(){ec.openWindow("/member/account");ec.product.bind()}),$("#arrival-mobile").attr("class","disabled"),$("#account-mobile").html('\u672a\u7ed1\u5b9a\u5b89\u5168\u624b\u673a\x26nbsp;\x3ca href\x3d"javascript:;" target\x3d"_blank"\x3e\u53bb\u7ed1\u5b9a\x3c/a\x3e')):($("#arrival-mobile").bind("click",function(){c=ec.product.chooseNoticeType("mobile")}),$("#account-mobile").html(ec.product.splitMobile(a)))},onok:function(d){if(0==c.length)$("#arrival-error span").html("\u8bf7\u9009\u62e9\u4e00\u79cd\u901a\u77e5\u65b9\u5f0f\uff01"),$("#arrival-error").removeClass("hide");else{var e="1",g=b;"mobile"==c&&(e="3",g=a);$.ajax({url:"/product/arrivalMail.json",dataType:"json",type:"post",data:{informWay:g,type:e,skuId:ec.product.getSku(),skuCode:$("#pro-sku-code2").html()},timeout:1E4,error:function(){ec.ui.loading.hide();$("#arrival-error span").html("\u64cd\u4f5c\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01");$("#arrival-error").removeClass("hide")},beforeSend:function(a){ec.ui.loading.show();a.withCredentials=!0},success:function(a){ec.ui.loading.hide();a.success?(alert("\u8bbe\u7f6e\u6210\u529f\uff01"),$("#arrival-error").addClass("hide"),d.close(),$(".ol_box_mask").remove()):($("#arrival-error span").html(a.msg),$("#arrival-error").removeClass("hide"))}})}},onclose:function(a){$(".ol_box_mask").remove()}});e.open();ec.product.bind=function(){e.close();$(".ol_box_mask").remove()}})};ec.product.chooseNoticeType=function(b){$("#arrival-email").removeClass("selected");$("#arrival-mobile").removeClass("selected");$("#arrival-"+b).attr("class","selected");return b};ec.product.attention=function(){var b=new ec.box($("#product-attention-html").val(),{boxid:"product-attention-box",title:"\u5173\u6ce8\u5546\u54c1",width:580,focus:"input[name\x3demail]",showButton:!1,onok:function(a){var c=a.find("input[name\x3demail]").val(),b=a.find("input[name\x3dmobile]").val();c?ec.util.isEmail(c)?b?/^0?(13|14|15|17|18)[0-9]{9}$/.test(b)?(new ec.ajax).submit({url:"/product/saveAttention.json",data:{email:c,phone:b,skuId:ec.product.getSku()},timeout:1E4,timeoutFunction:function(){alert("\u64cd\u4f5c\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},beforeSendFunction:ec.ui.loading.show,afterSendFunction:ec.ui.loading.hide,successFunction:function(c){c.success?(alert("\u8bbe\u7f6e\u6210\u529f\uff01"),a.close()):ec.showError(c)}}):alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801\uff01"):alert("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801\uff01"):alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684email\uff01"):alert("\u8bf7\u8f93\u5165email\uff01")}});b.open();b.find("input[name\x3demail]").focus()};ec.product.checkExtend=function(){var b=ec.product.getSku();val=$.trim($("#extend-text").val());$succussMsg=$("#extend-msg-succuss");$errorMsg=$("#extend-msg-error");msgText='\x3cspan class\x3d"fcn"\x3e*\x3c/span\x3e\x26nbsp;';link="";5<val.length?(new ec.ajax).get({url:"/tcs/query.json?_t\x3d"+(new Date).getTime()+"\x26skuId\x3d"+b+"\x26imei\x3d"+val,timeout:1E4,timeoutFunction:function(){$("#pro-extend-result-id").removeClass("hide");$errorMsg.html(msgText+"\u64cd\u4f5c\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01").show();$succussMsg.hide()},beforeSendFunction:function(){ec.ui.loading.show({modal:!1})},afterSendFunction:ec.ui.loading.hide,successFunction:function(a){a.success?($("#pro-extend-result-id").removeClass("hide"),$succussMsg.html(msgText+a.msg).show(),$errorMsg.hide(),$("#button-extend").attr("class","pro-button01 button-style-1 button-go-extend-checkout")):(a.otherPrdId&&(link='\x26nbsp;\x26nbsp;\x3ca href\x3d"/product/'+a.otherPrdId+".html#"+a.otherSkuId+',0"\x3e\u524d\u53bb\u8d2d\u4e70\x3e\x3e\x3c/a\x3e'),$("#pro-extend-result-id").removeClass("hide"),$errorMsg.html(msgText+a.msg+link).show(),$succussMsg.hide(),$("#button-extend").attr("class","pro-button01 button-style-disabled-1 button-go-extend-checkout-disabled"))}}):($succussMsg.hide(),$("#pro-extend-result-id").removeClass("hide"),$errorMsg.html(msgText+"\u8bf7\u8f93\u5165\u6b63\u786e\u7684IMEI/SN/MEID\u4fe1\u606f").show(),$("#button-extend").attr("class","pro-button01 button-style-disabled-1 button-go-extend-checkout-disabled"));return!1};ec.product.extendBuyNow=function(){$("#extend-text").val("");$("#extend-msg-succuss,#extend-msg-error").hide();$("#button-extend")[0].className="pro-button01 button-style-disabled-1 button-go-extend-checkout-disabled";$("#popup-extend").show()};ec.product.extendBuy=function(b){var a=$.trim($("#extend-text").val());"pro-button01 button-style-1 button-go-extend-checkout"==b.className&&a&&ec.account.afterLogin(function(){var c=ec.product.getSku(),b="",d=$("#order-confirm-extend-form");ec.util.isArray(c)||(c=[c]);for(var f=0;f<c.length;f++)b+='\x3cinput name\x3d"skuIds" type\x3d"text" value\x3d"'+c[f]+'"\x3e';b+='\x3cinput name\x3d"imei" type\x3d"text" value\x3d"'+a+'"\x3e';d.append(b);ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){d.submit()},500)})})};ec.product.jmptoRemark=function(){$("#pro-tab-evaluate").click();ec.ui.scrollTo("#pro-tab-evaluate")};(function(){var b=0,a;ec.ready(function(){a=$("#pro-gallerys").css("left","0").children().length});ec.product.imgSlider={prev:function(){0!=b&&(b--,$("#pro-gallerys").animate({left:-74*b},100))},next:function(){b+5>=a||(b++,$("#pro-gallerys").animate({left:-74*b},100))},reset:function(){a=$("#pro-gallerys").css("left","0").children().length;b=0}}})();(function(b){b.renderGroup=function(a){var c=[],e=$("#bundle-list-"+a);0<e.length&&(c.push("#tab-bundle"),e.show().siblings().hide(),b.renderBundle(a));a=parseInt(ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku).buttonMode);1>a||13<a&&22!==a?ec.diypkg.hideAll():ec.diypkg.init();$("#tab-bundle,#tab-comb").hide();0==c.length?$("#group-area").hide():(1<c.length&&c.push("#tab-split"),c.push("#group-area"),$(c.join(",")).show())};b.renderBundle=function(a){a=$("#bundle-list-"+a);this.showBundle(a.children("li.current").attr("data-id"))};b.showBundle=function(a){$("#bundle-pro-"+a+",#bundle-price-"+a).show().siblings().hide();_bundleId=a;$("#bundle-pro-"+a)}})(ec.product);(function(){var b;_options={"default":{},normal:{renderInventory:function(a){var c=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku),b=$("#pro-msg");$("#pro-quantity-area,#pro-operation");var d=$("#pro-operation"),f=$("#isPriority").val();$("#tab-addcart-button").hide();$("#tab-notice-button").hide();$("#product-tips").html("");$("#product-tips").hide();if(3==ec.product.status)b.show(),$("#pro-msg-title").html("\u6e29\u99a8\u63d0\u793a\uff1a\u8be5\u5546\u54c1\u5df2\u4e0b\u67b6"),d.css("visibility","hidden"),$("#pro-skus").html(""),$("#pro-skus").hide(),$(".product-operation-main").hide(),$("#package_dl").remove();else if(5==ec.product.status)b.show(),$("#pro-msg-title").html("\u6e29\u99a8\u63d0\u793a\uff1a\u8be5\u5546\u54c1\u4e0d\u5728\u6b64\u9500\u552e\u524d\u7aef\u9500\u552e"),d.css("visibility","hidden"),$("#product-tips").html("\u6e29\u99a8\u63d0\u793a\uff1a\u8be5\u5546\u54c1\u4e0d\u5728\u6b64\u9500\u552e\u524d\u7aef\u9500\u552e"),$("#product-tips").show(),$("#product-operation").hide();else if(1<c.tipsContent.length?(b.show(),$("#pro-msg-title").html("\u6e29\u99a8\u63d0\u793a\uff1a"+c.tipsContent),$("#product-tips").html("\u6e29\u99a8\u63d0\u793a\uff1a"+c.tipsContent),$("#product-tips").show()):(b.hide(),$("#product-tips").hide()),2==c.priceMode&&($("#pro-price-label").html("\u6682\u65e0\u62a5\u4ef7"),$("#pro-price-label").show(),$("#pro-price").hide(),$("#pro-price-old").hide(),$("#pro-price").html(""),$("#pro-price-old").hide()),1==f&&1==ec.product.getSkuPriority(c.id))d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.buy(\'sku\');return false;"\x3e\x3cspan\x3e\u7acb\u5373\u8d2d\u4e70\x3c/span\x3e\x3c/a\x3e'),$("#pro-quantity-area").hide(),d.css("visibility","visible"),$("#product-operation").show(),$("#order-confirm-form").attr({action:"/order/priorityConfirm",method:"post"});else switch($("#order-confirm-form").attr({action:"/order/nowConfirmcart",method:"post"}),$("#product-deposit-agreement-area").next().remove(),parseInt(c.buttonMode,10)){case 5:d.css("visibility","hidden");$("#pro-quantity-area").hide();break;case 4:d.css("visibility","hidden");$("#pro-quantity-area").hide();break;case 2:d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.buy(\'sku\');return false;"\x3e\x3cspan\x3e\u7acb\u5373\u8d2d\u4e70\x3c/span\x3e\x3c/a\x3e');$("#pro-quantity-area").show();d.css("visibility","visible");$("#product-operation").show();break;case 6:a?(d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.extendBuyNow();return false;"\x3e\x3cspan\x3e\u7acb\u5373\u8d2d\u4e70\x3c/span\x3e\x3c/a\x3e'),$("#pro-quantity-area").show(),d.css("visibility","visible"),$("#product-operation").show()):($("#pro-quantity-area").hide(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'),$("#tab-notice-button").show());break;case 7:ec.product.isEasyBuy()?($("#pro-quantity-area").hide(),$("#pro-quantity-area-nochange").show(),d.html('\x3ca onclick\x3d"ec.product.orderEasyBuy()" class\x3d"product-button-priority" \x3e\x3cspan\x3e'+c.easyBuyName+'\x3c/span\x3e\x3c/a\x3e\x3ca target\x3d"_blank" href\x3d"'+c.gotoUrl+'" class\x3d"product-button02" \x3e\x3cspan\x3e'+c.buttonText+"\x3c/span\x3e\x3c/a\x3e")):d.html('\x3ca target\x3d"_blank" href\x3d"'+c.gotoUrl+'" class\x3d"product-button02" \x3e\x3cspan\x3e'+c.buttonText+"\x3c/span\x3e\x3c/a\x3e");d.css("visibility","visible");$("#product-operation").show();break;case 8:break;case 9:ec.product.isEasyBuy()?($("#pro-quantity-area").hide(),$("#pro-quantity-area-nochange").show(),d.html('\x3ca onclick\x3d"ec.product.orderEasyBuy()" class\x3d"product-button-priority" \x3e\x3cspan\x3e'+c.easyBuyName+'\x3c/span\x3e\x3c/a\x3e\x3ca target\x3d"_blank" href\x3d"'+c.gotoUrl+'" class\x3d"product-button02" \x3e\x3cspan\x3e\u5f00\u552e\u63d0\u9192\x3c/span\x3e\x3c/a\x3e')):d.html('\x3ca target\x3d"_blank" href\x3d"'+c.gotoUrl+'" class\x3d"product-button02" \x3e\x3cspan\x3e\u5f00\u552e\u63d0\u9192\x3c/span\x3e\x3c/a\x3e');d.css("visibility","visible");$("#product-operation").show();break;case 10:ec.product.timingBuy();break;case 11:a?($("#pro-quantity-area").show(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.orderNowCover()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e')):($("#pro-quantity-area").hide(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'),$("#tab-notice-button").show());break;case 12:if(9==ec.product.productType){a?($("#pro-quantity-area").show(),d.css("visibility","visible"),d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.orderNow()"\x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e'),$("#product-operation").show()):($("#pro-quantity-area").hide(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'),$("#tab-notice-button").show());break}d.css("visibility","hidden");$("#pro-quantity-area").hide();break;case 18:if(9==ec.product.productType){a?($("#pro-quantity-area").show(),d.css("visibility","visible"),d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.orderNow()"\x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e'),$("#product-operation").show()):($("#pro-quantity-area").hide(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'),$("#tab-notice-button").show());break}d.css("visibility","hidden");$("#pro-quantity-area").hide();break;case 15:d.css("visibility","hidden");$("#pro-quantity-area").hide();$("#product-operation").hide();1<c.tipsContent.length?$("#pro-msg-title").html("\u6e29\u99a8\u63d0\u793a\uff1a"+c.tipsContent):$("#product-tips").html("\u6e29\u99a8\u63d0\u793a\uff1a\u8be5\u5546\u54c1\u6682\u4e0d\u552e\u5356");$("#product-tips").show();break;case 3:case 1:a?($("#pro-quantity-area").show(),d.css("visibility","visible"),$("#product-operation").show(),"1"==c.groupType?d.html('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u56e2\u8d2d\x3c/span\x3e\x3c/a\x3e'):(ec.product.renderVisitorButton(d),d.html('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button01" \x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.orderNow()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e'),$("#tab-addcart-button").show())):($("#pro-quantity-area").hide(),d.css("visibility","visible"),$("#product-operation").show(),ec.product.isEasyBuy()?($("#pro-quantity-area").hide(),$("#pro-quantity-area-nochange").show(),d.html('\x3ca onclick\x3d"ec.product.orderEasyBuy()" class\x3d"product-button-priority" \x3e\x3cspan\x3e'+c.easyBuyName+'\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e')):(d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'),$("#tab-notice-button").show(),ec.diypkg.hideAll()));break;case 19:d.css("visibility","hidden");$("#pro-quantity-area").hide();$("#product-operation").hide();1<c.tipsContent.length?$("#pro-msg-title").html("\u6e29\u99a8\u63d0\u793a\uff1a"+c.tipsContent):$("#product-tips").html("\u6e29\u99a8\u63d0\u793a\uff1a\u8be5\u5546\u54c1\u6682\u4e0d\u552e\u5356");$("#product-tips").show();break;case 22:a?($("#pro-quantity-area").show(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button01" \x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.orderNow()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e'),$("#tab-addcart-button").show()):($("#pro-quantity-area").hide(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'),$("#tab-notice-button").show(),ec.diypkg.hideAll());break;case 23:c=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku);b=ec.product.getSysDate();c=c.startTime;f=new Date;f.setTime(ec.util.parseDate(c));var g=[];g.push(c);$("#pro-operation").css("visibility","visible");$("#product-operation").show();0<=b-f?a?($("#pro-quantity-area").show(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.orderNow()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e'),$("#tab-addcart-button").show()):($("#pro-quantity-area").hide(),d.css("visibility","visible"),$("#product-operation").show(),d.html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'),$("#tab-notice-button").show(),ec.diypkg.hideAll()):($("#pro-operation").html('\x3ca href\x3d"javascript:;"  class\x3d"product-button02 disabled" \x3e\x3cspan\x3e\u5373\u5c06\u5f00\u552e\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"product-time"\x3e\x3c/div\x3e'),$("#product-operation").show(),ec.ui.countdown2($(".product-time"),{html:"\x3cp\x3e\u8ddd\u79bb\u5f00\u552e\u8fd8\u6709\uff1a\x3c/p\x3e\x3cul\x3e\x3cli\x3e\x3cspan\x3e{#day}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e\u5929\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#hours}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e:\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#minutes}\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cem\x3e:\x3c/em\x3e\x3c/li\x3e\x3cli\x3e\x3cspan\x3e{#seconds}\x3c/span\x3e\x3c/li\x3e",now:b,times:g,callback:function(a){$("#pro-operation").html('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.orderNow()" class\x3d"product-button02" \x3e\x3cspan\x3e\u7acb\u5373\u4e0b\u5355\x3c/span\x3e\x3c/a\x3e');$("#product-operation").show();ec.product.showSbomInterest(ec.product.getSkuInfo(ec.product.getSku()));ec.product.gift.updateOperationBtns()}}));break;default:d.css("visibility","hidden"),$("#pro-quantity-area").hide(),$("#product-tips").html("\u6e29\u99a8\u63d0\u793a\uff1a\u8be5\u5546\u54c1\u6682\u672a\u552e\u5356"),$("#product-tips").show(),$("#product-operation").hide()}}},reservation:{renderInventory:function(a){$("#pro-msg").hide();a?($("#pro-quantity-area").show(),$("#pro-operation").html('\x3ca href\x3d"javascript:;"  onclick\x3d"ec.product.addCartWithLogin()" class\x3d"product-button02" \x3e\x3cspan\x3e\u9884\u7ea6\u8d2d\u4e70\x3c/span\x3e\x3c/a\x3e')):($("#pro-quantity-area").hide(),$("#pro-operation").html('\x3ca href\x3d"javascript:;" class\x3d"product-button02" onclick\x3d"ec.product.arrival()"\x3e\x3cspan\x3e\u5230\u8d27\u901a\u77e5\x3c/span\x3e\x3c/a\x3e'));$("#product-operation").show()}},queue:{renderInventory:function(a){a?($("#sale-buy-btn").show(),$("#sale-sell-out").hide()):($("#sale-buy-btn").hide(),$("#sale-sell-out").show())}},seckill:{renderInventory:function(a){a?($("#sale-buy-btn").show(),$("#sale-sell-out").hide()):($("#sale-buy-btn").hide(),$("#sale-sell-out").show())}}};ec.product.execute=function(a,c){var e=_options[b][a]||_options["default"][a];e&&e.apply(ec.product,c)};ec.product.setType=function(a){b=a;switch(a){case "normal":case "reservation":ec.product.isSale=!1;break;default:ec.product.isSale=!0}ec.product.prefix=ec.product.isSale?"/sale":"/product"}})();ec.ready(function(){$(function(){var a=$(".product-gallery"),b=$(".gallery-scroll-bottom"),d=a.offset().top,f=a.height(),g,h;$(window).scroll(function(){var c=Math.max(document.body.scrollTop,document.documentElement.scrollTop);0<b.length&&(g=$(".header").height()+4*$(".hr-10").height()+$(".g").height()+$(".product").height(),h=g-c-f);d<c?(a.addClass("positionFixed"),a.removeClass("positionStatic"),0<b.length&&g<c+f?a.css({top:h}):a.css({top:0})):(a.addClass("positionStatic"),a.removeClass("positionFixed"))})});var b=ec.product;ec.ui.proNumer("#pro-quantity",{max:999,min:1});ec.product.tabSkuInfo(ec.product.setSkuId||ec.product.defaultSku);loadEvaluate||(ec.product.remark.loadEvaluateScore(),$("#pro-tab-evaluate-content").show(),ec.product.remark.loadEvaluate({pageNumber:1,type:0,extraType:1}),ec.product.remark.bindEvent());b=ec.product;_bindEvent();$("#pro-tab-feature , #pro-tab-parameter , #pro-tab-package-service , #pro-tab-evaluate").click(function(){$(this)});ec.product.history.add(ec.product.id);$(window).scroll(function(){var a=$(this).scrollTop(),e=$(window).height(),d=$("#product-history-area").offset().top;finished&&a>=d-e&&(finished=!1,b.history.load(function(a){if(0==a.length)$("#product-history-area").hide();else{for(var b=[],c,d=0;d<a.length;d++)c=a[d],c.price=2==c.priceMode?'\x3cem  class\x3d"disabled"\x3e\u6682\u65e0\u62a5\u4ef7\x3c/em\x3e':"\x3cem\x3e\x26yen;"+c.price+"\x3c/em\x3e",b.push('\x3cli class\x3d"swiper-slide"\x3e'),b.push('\x3ca href\x3d"/product/'+c.id+'.html"  title\x3d"'+c.name+'"  onclick\x3d"pushProHistoryMsg(\''+c.code+"','"+(d+1)+'\')" target\x3d"_blank"\x3e'),b.push('\x3cimg src\x3d"'+ec.mediaPath+c.photoPath+"142_142_"+c.photoName+'" alt\x3d"'+c.name+'"/\x3e'),b.push('\x3cdiv class\x3d"product-link-detail"\x3e'),b.push("\x3cp\x3e\x3cspan\x3e"+c.name+"\x3c/span\x3e\x3c/p\x3e"),b.push(""+c.price+""),b.push("\x3c/div\x3e"),b.push("\x3c/a\x3e"),b.push("\x3c/li\x3e");$("#product-history-list").html("");$("#product-history-list").html(b.join(" "));$("#product-history-area").show();ec.product.scroll("product-history-scroll",5)}},null,ec.product.isSale?null:ec.product.id))});b.renderGroup(b.setSkuId||b.defaultSku);b.renderBundle(b.setSkuId||b.defaultSku);var a=ec.product.getSku(),a=ec.product.getSkuInfo(a);ec.form.input.label("#extend-text","\u8f93\u5165IMEI/SN/MEID\u4fe1\u606f");$("#extendProtected").parent().parent().mouseover(function(){1==$("#extendProtected").parent().parent().data("flag")?$("#extendProtected").parent().parent().data("flag",""):$("#extendProtected").parent().parent().addClass("hover")});$("#extendProtected").parent().parent().mouseout(function(){$("#extendProtected").parent().parent().data("flag","");$("#extendProtected").parent().parent().removeClass("hover")});$("#accidentProtected").parent().parent().mouseover(function(){1==$("#accidentProtected").parent().parent().data("flag")?$("#accidentProtected").parent().parent().data("flag",""):$("#accidentProtected").parent().parent().addClass("hover")});$("#accidentProtected").parent().parent().mouseout(function(){$("#accidentProtected").parent().parent().data("flag","");$("#accidentProtected").parent().parent().removeClass("hover")})});ec.product.divchange=function(b){1==b?($("#prddetail_counsel_all").show(),$("#prddetail_counsel_prd").hide(),$("#prddetail_counsel_pay").hide(),$("#prddetail_counsel_trans").hide(),$("#prddetail_counsel_service").hide(),$("#prddetail_counsel_ques").hide(),$("#prd_detail_counsel_2").removeAttr("class"),$("#prd_detail_counsel_3").removeAttr("class"),$("#prd_detail_counsel_4").removeAttr("class"),$("#prd_detail_counsel_5").removeAttr("class"),$("#prd_detail_counsel_6").removeAttr("class"),$("#prd_detail_counsel_1").attr("class","selected")):2==b?($("#prddetail_counsel_all").hide(),$("#prddetail_counsel_prd").show(),$("#prddetail_counsel_pay").hide(),$("#prddetail_counsel_trans").hide(),$("#prddetail_counsel_service").hide(),$("#prddetail_counsel_ques").hide(),$("#prd_detail_counsel_1").removeAttr("class"),$("#prd_detail_counsel_3").removeAttr("class"),$("#prd_detail_counsel_4").removeAttr("class"),$("#prd_detail_counsel_5").removeAttr("class"),$("#prd_detail_counsel_6").removeAttr("class"),$("#prd_detail_counsel_2").attr("class","selected"),ec.product.counselloadprd({pageNumber:1})):3==b?($("#prddetail_counsel_all").hide(),$("#prddetail_counsel_prd").hide(),$("#prddetail_counsel_pay").show(),$("#prddetail_counsel_trans").hide(),$("#prddetail_counsel_service").hide(),$("#prddetail_counsel_ques").hide(),$("#prd_detail_counsel_1").removeAttr("class"),$("#prd_detail_counsel_2").removeAttr("class"),$("#prd_detail_counsel_4").removeAttr("class"),$("#prd_detail_counsel_5").removeAttr("class"),$("#prd_detail_counsel_6").removeAttr("class"),$("#prd_detail_counsel_3").attr("class","selected"),ec.product.paycounselload({pageNumber:1})):4==b?($("#prddetail_counsel_all").hide(),$("#prddetail_counsel_prd").hide(),$("#prddetail_counsel_pay").hide(),$("#prddetail_counsel_trans").show(),$("#prddetail_counsel_service").hide(),$("#prddetail_counsel_ques").hide(),$("#prd_detail_counsel_2").removeAttr("class"),$("#prd_detail_counsel_3").removeAttr("class"),$("#prd_detail_counsel_1").removeAttr("class"),$("#prd_detail_counsel_5").removeAttr("class"),$("#prd_detail_counsel_6").removeAttr("class"),$("#prd_detail_counsel_4").attr("class","selected"),ec.product.transcounselload({pageNumber:1})):5==b?($("#prddetail_counsel_all").hide(),$("#prddetail_counsel_prd").hide(),$("#prddetail_counsel_pay").hide(),$("#prddetail_counsel_trans").hide(),$("#prddetail_counsel_service").show(),$("#prddetail_counsel_ques").hide(),$("#prd_detail_counsel_1").removeAttr("class"),$("#prd_detail_counsel_3").removeAttr("class"),$("#prd_detail_counsel_4").removeAttr("class"),$("#prd_detail_counsel_2").removeAttr("class"),$("#prd_detail_counsel_6").removeAttr("class"),$("#prd_detail_counsel_5").attr("class","selected"),ec.product.sercounselload({pageNumber:1})):($("#prddetail_counsel_all").hide(),$("#prddetail_counsel_prd").hide(),$("#prddetail_counsel_pay").hide(),$("#prddetail_counsel_trans").hide(),$("#prddetail_counsel_service").hide(),$("#prddetail_counsel_ques").show(),$("#prd_detail_counsel_1").removeAttr("class"),$("#prd_detail_counsel_3").removeAttr("class"),$("#prd_detail_counsel_4").removeAttr("class"),$("#prd_detail_counsel_5").removeAttr("class"),$("#prd_detail_counsel_2").removeAttr("class"),$("#prd_detail_counsel_6").attr("class","selected"))};ec.product.counselloadall=function(b){(new ec.ajax).submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:0,pageNumber:b.pageNumber,pageSize:3},timeout:1E4,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(a){if(a.success){var b;b=ec.product.createcounselhtml(a);$("#all_prd_counsel_content").html(b.join(""));ec.product.allrenderPage(a.page)}else ec.showError(a)}})};ec.product.allrenderPage=function(b){$("#all_prd_counsel").show();$("#all_prd_counsel").pager({pageNumber:b.pageNumber,pageCount:b.totalPage,pageSize:3,text:{first:"|\x26lt;",pre:"\x26lt",next:"\x26gt;",last:"\x26gt;|"},item:"first pre qpage next last quickPager".split(" "),callBack:ec.product.counselloadall});ec.product.pagerScroll("all_prd_counsel")};ec.product.counselloadprd=function(b){(new ec.ajax).submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:1,pageNumber:b.pageNumber,pageSize:3},timeout:1E4,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(a){if(a.success){var b;b=ec.product.createcounselhtml(a);$("#prd_prd_counsel_content").html(b.join(""));0<a.page.totalRow?$("#prddetail_counsel_prd_total \x3e div:first-child").html("\u5171"+a.page.totalRow+"\u6761"):$("#prddetail_counsel_prd_total").hide();ec.product.prdrenderPage(a.page)}else ec.showError(a)}})};ec.product.prdrenderPage=function(b){$("#prd_prd_counsel").show();$("#prd_prd_counsel").pager({pageNumber:b.pageNumber,pageCount:b.totalPage,pageSize:3,text:{first:"|\x26lt;",pre:"\x26lt",next:"\x26gt;",last:"\x26gt;|"},item:"first pre qpage next last quickPager".split(" "),callBack:ec.product.counselloadprd});ec.product.pagerScroll("prd_prd_counsel")};ec.product.paycounselload=function(b){(new ec.ajax).submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:2,pageNumber:b.pageNumber,pageSize:3},timeout:1E4,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(a){if(a.success){var b;b=ec.product.createcounselhtml(a);$("#pay_prd_counsel_content").html(b.join(""));0<a.page.totalRow?$("#prddetail_counsel_pay_total \x3e div:first-child").html("\u5171"+a.page.totalRow+"\u6761"):$("#prddetail_counsel_pay_total").hide();ec.product.payrenderPage(a.page)}else ec.showError(a)}})};ec.product.payrenderPage=function(b){$("#pay_prd_counsel_page").show();$("#pay_prd_counsel_page").pager({pageNumber:b.pageNumber,pageCount:b.totalPage,pageSize:3,text:{first:"|\x26lt;",pre:"\x26lt",next:"\x26gt;",last:"\x26gt;|"},item:"first pre qpage next last quickPager".split(" "),callBack:ec.product.paycounselload});ec.product.pagerScroll("pay_prd_counsel_page")};ec.product.transcounselload=function(b){(new ec.ajax).submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:3,pageNumber:b.pageNumber,pageSize:3},timeout:1E4,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(a){if(a.success){var b;b=ec.product.createcounselhtml(a);$("#trans_prd_counsel_content").html(b.join(""));0<a.page.totalRow?$("#prddetail_counsel_trans_total \x3e div:first-child").html("\u5171"+a.page.totalRow+"\u6761"):$("#prddetail_counsel_trans_total").hide();ec.product.transrenderPage(a.page)}else ec.showError(a)}})};ec.product.transrenderPage=function(b){$("#trans_prd_counsel_page").show();$("#trans_prd_counsel_page").pager({pageNumber:b.pageNumber,pageCount:b.totalPage,pageSize:3,text:{first:"|\x26lt;",pre:"\x26lt",next:"\x26gt;",last:"\x26gt;|"},item:"first pre qpage next last quickPager".split(" "),callBack:ec.product.transcounselload});ec.product.pagerScroll("trans_prd_counsel_page")};ec.product.sercounselload=function(b){(new ec.ajax).submit({url:"/product/query/consultation/"+ec.product.id+".json",data:{prdId:ec.product.id,dataType:4,pageNumber:b.pageNumber,pageSize:3},timeout:1E4,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(a){if(a.success){var b;b=ec.product.createcounselhtml(a);$("#ser_prd_counsel_content").html(b.join(""));0<a.page.totalRow?$("#prddetail_counsel_serv_total \x3e div:first-child").html("\u5171"+a.page.totalRow+"\u6761"):$("#prddetail_counsel_serv_total").hide();ec.product.serrenderPage(a.page)}else ec.showError(a)}})};ec.product.serrenderPage=function(b){$("#ser_prd_counsel_page").show();$("#ser_prd_counsel_page").pager({pageNumber:b.pageNumber,pageCount:b.totalPage,pageSize:3,text:{first:"|\x26lt;",pre:"\x26lt",next:"\x26gt;",last:"\x26gt;|"},item:"first pre qpage next last quickPager".split(" "),callBack:ec.product.sercounselload});ec.product.pagerScroll("ser_prd_counsel_page")};ec.product.quescounselload=function(b){(new ec.ajax).submit({url:"/product/query/frequentyQuestions/"+ec.product.id+".json",data:{prdId:ec.product.id,pageNumber:b.pageNumber,pageSize:10},timeout:1E4,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01")},successFunction:function(a){if(a.success){var c=[];if(0<a.page.totalRow)for(var e=0;e<a.prdFrequentyQuestionsList.length;e++){var d=a.prdFrequentyQuestionsList[e];c.push("\x3cli\x3e");c.push("\x3ch2\x3e"+(10*(b.pageNumber-1)+e+1)+"\u3001"+d.question+"\x3c/h2\x3e");c.push("\x3cp\x3e"+d.reply+"\x3c/p\x3e");c.push("\x3c/li\x3e")}else c.push('\x3cdiv class\x3d"product-inquire-list"\x3e\x3cdiv class\x3d"product-inquire-no"\x3e\u6682\u65e0\u76f8\u5173\u5185\u5bb9\x3c/div\x3e\x3c/div\x3e');$("#ques_prd_counsel_content").html(c.join(""));0<a.page.totalRow?$("#prddetail_counsel_ques_total div:first-child").html("\u5171"+a.page.totalRow+"\u6761"):$("#prddetail_counsel_ques_total").hide();ec.product.quesrenderPage(a.page)}else ec.showError(a)}})};ec.product.quesrenderPage=function(b){$("#ques_prd_counsel_page").show();$("#ques_prd_counsel_page").pager({pageNumber:b.pageNumber,pageCount:b.totalPage,pageSize:10,text:{first:"|\x26lt;",pre:"\x26lt",next:"\x26gt;",last:"\x26gt;|"},item:"first pre qpage next last quickPager".split(" "),callBack:ec.product.quescounselload});ec.product.pagerScroll("ques_prd_counsel_page")};ec.product.createcounselhtml=function(b){var a=[];if(0<b.page.totalRow){a.push('\x3cul class\x3d"product-inquire-list"\x3e');for(var c=0;c<b.prdConsultationList.length;c++){p=b.prdConsultationList[c];var e=p.userName,d=ec.util.parseDate(p.createTime),f=ec.util.parseDate(p.answerTime);a.push('\x3cli\x3e \x3cdiv class\x3d"product-inquire-user"\x3e\u7f51\u53cb');a.push("\x3cspan\x3e"+ec.encodeForHTML(e)+"\x3c/span\x3e");a.push("\x3cem\x3e"+d.format("yyyy-MM-dd HH:mm:ss")+"\x3c/em\x3e\x3c/div\x3e");a.push('\x3cdiv class\x3d"product-inquire-question"\x3e');a.push("\x3clabel\x3e\u54a8\u8be2\u5185\u5bb9\uff1a\x3c/label\x3e\x3cspan\x3e"+ec.autoEncodeAttr(p.question)+"\x3c/span\x3e\x3c/div\x3e");a.push('\x3cdiv class\x3d"product-inquire-answer"\x3e');a.push("\x3cp\x3e\x3clabel\x3e\u56de\u590d\uff1a\x3c/label\x3e"+ec.autoEncodeAttr(p.answer)+"\x3c/p\x3e");a.push("\x3cem\x3e"+f.format("yyyy-MM-dd HH:mm:ss")+"\x3c/em\x3e");a.push("\x3c/div\x3e\x3c/li\x3e")}a.push("\x3c/ul\x3e")}else a.push('\x3cdiv class\x3d"product-inquire-list"\x3e\x3cdiv class\x3d"product-inquire-no"\x3e\u6682\u65e0\u76f8\u5173\u5185\u5bb9\x3c/div\x3e\x3c/div\x3e');return a};ec.product.loginCheckBefCoun=function(){ec.account.afterLogin(function(){$("#counseltextid").focus();$("#error-span").hide()})};ec.product.submitCounsel=function(){var b=$("#counseltextid").val(),a=$('input[name\x3d"type"]').val(),c=ec.product.optCompany(b);if(null==c||1>c.length)$("#error-span").show(),$("#error-span").html("\u63d0\u4ea4\u5185\u5bb9\u4e3a\u7a7a");else{var e=new RegExp(addressFrontRegex);if(c.split("").filter(function(a){return e.test(a)}).join("")!=c)$("#error-span").show(),$("#error-span").html("\u60a8\u63d0\u4ea4\u7684\u5185\u5bb9\u542b\u6709\u975e\u6cd5\u5b57\u7b26");else if(100<c.length)$("#error-span").show(),$("#error-span").html("\u8f93\u5165\u7684\u6587\u5b57\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57,\u8bf7\u91cd\u65b0\u8f93\u5165");else{null!=ec.product.name&&(ec.product.name=ec.product.name.transHtmlAttribute());var d="";$("#safeEmail").attr("checked")&&(d="1");(new ec.ajax).get({url:domainMain+"/member/addUserRemarkView.json?t\x3d"+(new Date).getTime(),dataType:"json",data:{orderCode:"comments"},timeout:1E4,timeoutFunction:function(){alert("\u8bfb\u53d6\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01");return!1},successFunction:function(c){c.success||ec.account.syncCustomSession();$.ajax({url:"/product/save/consultation.json",type:"POST",dataType:"json",data:{productId:ec.product.id,productName:ec.product.name,question:b,type:a,email:d},beforeSend:function(a){a.withCredentials=!0},success:function(a){a.success?($("#safeEmail").attr("checked")?ec.product.counselSuccess(a.changeEmailUrl):alert("\u63d0\u4ea4\u6210\u529f,\u6211\u4eec\u5c06\u5c3d\u5feb\u4e3a\u60a8\u89e3\u7b54"),$("#counsel_content_form")[0].reset(),$("#error-span").hide()):"notRealName"==a.msg?ec.product.commentsTip():($("#error-span").show(),$("#error-span").html(a.msg))}})}})}}};ec.product.commentsTip=function(){(new ec.box($("#realNameComment").val(),{boxclass:"ol_box_4",title:"",width:540,showButton:!1,autoHeight:!1,onok:function(){}})).open()};ec.product.optCompany=function(b){return b.replace(/(^\s*)|(\s*$)/g,"")};ec.product.counselSuccess=function(b){ec.account.afterLogin(function(){ec.product.syncCustomSession();var a=ec.product.email,c=new ec.box($("#product-counsel-html").val(),{boxid:"product-counsel-box",boxclass:"ol_box_4",showButton:!1,onopen:function(c){ec.util.isEmpty(a)?($("#counsel-success-msg").html("\u56de\u590d\u5c06\u53d1\u9001\u5230\u60a8\u7684\u5b89\u5168\u90ae\u7bb1\uff0c\u60a8\u8fd8\u672a\u7ed1\u5b9a\uff0c\u8bf7\u5148\u7ed1\u5b9a\u5b89\u5168\u90ae\u7bb1\u3002"),$("#counsel-bind-email").html('\x3ca href\x3d"'+b+'" class\x3d"box-change box-pro-button01 button-style-2" target\x3d"_blank" onclick\x3d"ec.product.secEmailOper()"\x3e\x3cspan\x3e\u53bb\u7ed1\u5b9a\x3c/span\x3e\x3c/a\x3e')):($("#counsel-success-msg").html("\u5ba2\u670d\u56de\u590d\u5c06\u53d1\u9001\u5230\u60a8\u7684\u5b89\u5168\u90ae\u7bb1\x26nbsp;"+a+"\uff0c\u53ef\u70b9\u51fb\u4fee\u6539\u5b89\u5168\u90ae\u7bb1\u3002"),$("#counsel-bind-email").html('\x3ca href\x3d"'+b+'" class\x3d"box-change box-pro-button01 button-style-2" target\x3d"_blank" onclick\x3d"ec.product.secEmailOper()"\x3e\x3cspan\x3e\u4fee\u6539\u5b89\u5168\u90ae\u7bb1\x3c/span\x3e\x3c/a\x3e'))},onok:function(a){},onclose:function(a){$(".ol_box_mask").remove()}});c.open();ec.product.secEmailOper=function(){c.close();$(".ol_box_mask").remove()}})};ec.product.combChange=function(b){b=$(b).parent();b.addClass("current");b.siblings().not(b).removeClass("current");var a=b.parent().attr("id");a.substring(14,a.length);b=b.index();a=$("#comb-pro-"+ec.product.getSku()+"-"+b);a.eq(b);a.show();a.siblings(".product-recommend-con").hide()};ec.product.syncCustomSession=function(){(new ec.ajax).get({async:!1,url:"/account/syncEmailAndMobile.json",timeout:1E4,successFunction:function(b){ec.util.isEmpty(b.customerInfo)||(ec.product.email=b.customerInfo.email,ec.product.mobile=b.customerInfo.mobile)},timeoutFunction:function(){},errorFunction:function(){}})};ec.product.giftshow=function(){(new ec.box($("#pro-gift-box").html(),{boxclass:"ol_box_4",title:"\u9009\u62e9\u8d60\u54c1\u989c\u8272",showButton:!1,autoHeight:!1})).open();$(".box-content").find("#pro-gift-list-detail").parent().siblings().show().html('\x3ca href\x3d"javascript:;" class\x3d"box-cancel" onclick\x3d"ec.product.boxCancle()"\x3e\x3cspan\x3e\u53d6\u6d88\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" class\x3d"box-sure" id\x3d"box-sures" \x3e\x3cspan\x3e\u786e\u8ba4\x3c/span\x3e\x3c/a\x3e');$("div[id^\x3d'pro-gift-list-detail'] li a").bind("click",function(b){if($(this).parent().hasClass("selected"))$(this).parent().parent().find("li").removeClass("new"),$(this).parent().addClass("new");else{$(this).parent().parent().find("li").removeClass("selected");$(this).parent().addClass("selected");$(this).parent().parent().find("li").removeClass("new");$(this).parent().addClass("new");b=ec.product.getSku();var a=ec.product.gift.mainSkuGiftMap[b];b=ec.product.gift.finalMainSbomGiftMap[b];var c=$(this).attr("key"),a=a[c],c=$(this).attr("defaultGiftKey");b[c]=a;$("#ol_box").find("#gift-detail-"+c).find("img").attr("src",(ec.mediaPath+a.photoPath+ec.product.gift.middleImgSize+a.photoName).transHtmlAttribute());$("#ol_box").find("#gift-detail-"+c).attr("href","/product/"+a.giftId+".html#"+a.giftSkuId);$("#ol_box").find("#gift-detail-name"+c).html(a.giftName)}});$("#box-sures").bind("click",function(b){$("div[id^\x3d'ol_box'] li.selected").each(function(){var a=ec.product.getSku(),b=ec.product.gift.mainSkuGiftMap[a],a=ec.product.gift.finalMainSbomGiftMap[a],e=$(this).children("a").attr("key"),b=b[e],d=$(this).children("a").attr("defaultGiftKey");a[d]=b;$("#ol_box").find("#gift-detail-"+d).find("img").attr("src",(ec.mediaPath+b.photoPath+ec.product.gift.middleImgSize+b.photoName).transHtmlAttribute());$("#ol_box").find("#gift-detail-"+d).attr("href","/product/"+b.giftId+".html#"+b.giftSkuId);$("#ol_box").find("#gift-detail-name"+d).html(b.giftName);$("#gift-"+d).attr("href","/product/"+b.giftId+".html#"+b.giftSkuId);$("#gift-"+d).attr("title",""+b.giftName.transHtmlAttribute());$("#gift-"+d).attr("key",e);$("#gift-"+d).find("img").attr("src",(ec.mediaPath.transHtmlAttribute()+b.photoPath+ec.product.gift.middleImgSize+b.photoName).transHtmlAttribute());$("#gift-"+d).find("img").attr("alt",""+b.giftName.transHtmlAttribute())});b=$("#ol_box").find("#pro-gift-list-detail").html();$("#pro-gift-list-detail").html("");$("#pro-gift-list-detail").append(b);$(".ol_box_mask").remove();$("#ol_box").hide()})};ec.product.boxCancle=function(){$(".ol_box_mask").remove();$("#ol_box").remove()};ec.product.getSysDate=function(){var b=new Date;(new ec.ajax).get({async:!1,url:"/system/getSysDate.json?"+(new Date).getTime(),timeout:1E4,successFunction:function(a){ec.util.isEmpty(a.now)||b.setTime(ec.util.parseDate(a.now))}});return b};ec.product.splitMobile=function(b){for(var a="",c=0;c<b.length;c++)a+=b.substring(c,c+1);return a};ec.product.getPackageAndService=function(b){var a=ec.product.packageList[b];b=ec.product.warranty[b];var c=a?!0:!1,e=b?!0:!1;packFlag=!c&&!e;$("#pro-tab-package-service-content").empty();$("#pro-tab-service-content").empty();$("#pro-tab-package-service-content").hide();$("#packagTitleId").hide();$("#customerServiceTitle").hide();$("#customerServiceDiv").hide();$("#pro-tab-package-service").hide();c&&($("#pro-tab-package-service-content").html(a),$("#pro-tab-package-service-content").show(),$("#packagTitleId").show(),$("#pro-tab-package-service").show());e&&($("#pro-tab-service-content").html(b),$("#customerServiceTitle").show(),$("#customerServiceDiv").show(),$("#pro-tab-package-service").show())};ec.product.getFeature=function(b){void 0!=ec.product.getSkuForFeature(b)||0<$("#pro-detail-content-"+b).length?($("#pro-tab-parameter").removeClass("selected"),$("#pro-tab-feature").addClass("selected").show(),$("#pro-detail-contents").show(),$("#pro-detail-content-"+(ec.product.setSkuId||b)).show().siblings().hide(),ec.product.payVideo()):(new ec.ajax).get({url:"/product/querySkuDetailFeature/"+ec.product.getSku()+".json",timeout:1E4,timeoutFunction:function(){$("#pro-detail-contents \x3e div:first-child").html("\u6b63\u5728\u52a0\u8f7d...")},successFunction:function(a){if(a.success)if(0==a.length)$("#pro-tab-feature").removeClass("selected").hide(),$("#pro-tab-parameter").addClass("selected"),$("#pro-tab-feature").hide(),$("#pro-detail-contents").hide();else{$("#pro-tab-parameter").removeClass("selected");$("#pro-tab-feature").addClass("selected");$("#pro-tab-feature").show();$("#pro-detail-contents").show();ec.product.setSkuForFeature(b);var c=[];c.push('\x3cdiv id\x3d"pro-detail-content-'+a.id+'" class\x3d"pro-detail-see"\x3e');c.push('\x3cdiv id\x3d"kindPicture-'+a.id+'"\x3e');c.push(a.detail);c.push("\x3c/div\x3e");c.push('\x3cdiv id\x3d"detail-content-button-'+a.id+'" class\x3d"product-shade hide"\x3e\x3cp\x3e');c.push('\x3ca id\x3d"pro-detail-down-btn-'+a.id+'" class\x3d"product-detail-btn"\x3e');c.push("\u67e5\u770b\u5168\u90e8\u4ea7\u54c1\u8be6\u60c5\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e");c.push('\x3ca href\x3d"javascript:;" id\x3d"pro-detail-up-btn-'+a.id+'" class\x3d"product-detail-btnup hide"\x3e\u6536\u8d77\u5168\u90e8\u4ea7\u54c1\u8be6\u60c5\x3c/a\x3e');c.push("\x3c/div\x3e");$("#pro-tab-feature-content \x3e div:first-child").prepend(c.join(""));masterPlayer&&setTimeout(function(){masterPlayer.dispose()},300);ec.product.payVideo();$("#pro-detail-content-"+(ec.product.setSkuId||b)).show().siblings().hide();var e=0;$("#pro-detail-content-"+(ec.product.setSkuId||b)+" img").each(function(b){$(this).load(function(){e+=$(this).height();if(2E3<=e)return $("#pro-detail-content-"+a.id).height("2000"),$("#detail-content-button-"+a.id).show(),$("#pro-detail-down-btn-"+a.id).click(function(){$("#pro-detail-content-"+a.id).height($("#kindPicture-"+a.id).height()+$("#pro-detail-up-btn-"+a.id).height()+40);$("#detail-content-button-"+a.id).hide();$("#pro-detail-up-btn-"+a.id).css("display","block");upDownButton="true"}),$("#pro-detail-up-btn-"+a.id).click(function(){$("#pro-detail-content-"+a.id).height("2000");$("#detail-content-button-"+a.id).show();$("#pro-detail-up-btn-"+a.id).css("display","none");upDownButton="false";$("body,html").animate({scrollTop:tit1+1575},0)}),!1})});2E3>e&&$("#detail-content-button-"+a.id).hide();ec.diypkg.init()}else $("#pro-tab-feature").removeClass("selected").hide(),$("#pro-tab-parameter").addClass("selected"),$("#pro-detail-contents").hide()},errorFunction:function(){$("#pro-tab-feature").removeClass("selected").hide();$("#pro-tab-parameter").addClass("selected");$("#pro-detail-contents").hide()},timeoutFunction:function(){$("#pro-tab-feature").removeClass("selected").hide();$("#pro-tab-parameter").addClass("selected");$("#pro-detail-contents").hide()}})};var masterPlayer;ec.product.payVideo=function(){var b=ec.product.getSku(),a=$("#pro-detail-content-"+b).find(".J_videoTrigger");$("#player-container-id").remove();if(a&&(!$("#pro-detail-content-"+b).find("video")||0==$("#pro-detail-content-"+b).find("video").length)){var c=a.attr("data-video");if(c&&""!=c){a.find("span.video-btn").remove();a.append("\x3cspan class\x3d'video-btn'\x3e\x3c/span\x3e");var e="player-container-id-"+b;a.unbind("click");a.click(function(){c=$(this).attr("data-video");(new ec.box('\x3cvideo id\x3d"'+e+'" preload\x3d"auto"  playsinline webkit-playinline x5-playinline src\x3d"'+c+'"\x3e\x3c/video\x3e',{boxid:"video-box",boxclass:"ol_box_4 video-detail",width:800,height:450,draggable:!1,showButton:!1,zIndex:700,onclose:function(a){masterPlayer.dispose()}})).open();masterPlayer=TCPlayer(e,{autoplay:!0})})}}};ec.product.rushbuyActivity=function(b){rush.business.doIfSbomChanged(b)};ec.product.switched=function(b,a){$("input[name\x3d'type']").val(b);$(a).addClass("selected").siblings().removeClass("selected")};ec.product.getParameter=function(b,a){$("#parameterDetailTips").hide();if(void 0!=ec.product.getSkuForParement(b))$("#main-parameter-content-"+(ec.product.setSkuId||skuId)).show().siblings().hide(),$("#content-"+(ec.product.setSkuId||skuId)).show().siblings().hide(),$("#productParameterId").show(),$("#productParameterHr30").show();else{for(var c=b.split(","),e=a.split(","),d="",f=0;f<e.length&&(d+=e[f],0!=f);f+=1);$.ajax({url:domainMain+"/product/querySpecificationMulti/"+d+".json?",dataType:"json",timeout:2E4,success:function(a){if(a.success){$("#parameterDetailTips").hide();ec.product.setSkuForParement(b);for(var d=0;d<c.length;d+=1){for(var f=c[d],g=e[d],n=null,k=null,r=0;r<a.info.length;r+=1){var m=a.info[r];if(g==m.sbomCode){n=m.specificationList;k=m.majorSpecificationList;break}}m=[];if(null!=k&&0<k.length){var q;m.push("\x3ch2\x3e\u4e3b\u8981\u53c2\u6570\x3c/h2\x3e");m.push("\x3cul\x3e");for(r=0;r<k.length;r++)q=k[r],null!=q.attrValue&&""!=q.attrValue&&void 0!=q.attrValue&&m.push("\x3cli\x3e\x3clabel\x3e"+q.attrName+"\x3c/label\x3e\x3cspan\x3e"+q.attrValue+"\x3c/span\x3e\x3c/li\x3e");m.push("\x3c/ul\x3e")}$("#product-parameter-main").append('\x3cdiv id\x3d"main-parameter-content-'+f+'" class\x3d"product-parameter-main clearfix hide"\x3e'+m.join("")+"\x3c/div\x3e");$("#main-parameter-content-"+(ec.product.setSkuId||f)).show().siblings().hide();k=[];if(n){m=[];for(q=0;q<n.length;q++){var r=n[q],x=[];if("0"==r.parentAttrCode){x.push('\x3cdiv class\x3d"product-parameter-list clearfix"\x3e');x.push("\x3ch2\x3e"+r.attrName+"\x3c/h2\x3e");var A=r.attrCode,C=[];C.push("\x3cul\x3e");for(r=0;r<n.length;r++){var E=n[r];"0"!=E.parentAttrCode&&E.parentAttrCode==A&&C.push("\x3cli\x3e\x3clabel\x3e"+E.attrName+"\x3c/label\x3e\x3cspan\x3e"+ec.autoEncodeAttr(E.attrValue)+"\x3c/span\x3e\x3c/li\x3e")}C.push("\x3c/ul\x3e");2<C.length&&(m.push(x.join("")),m.push(C.join("")),m.push("\x3c/div\x3e"))}}m.push('\x3cdiv class\x3d"product-parameter-list clearfix"\x3e');m.push("\x3ch2\x3e\u5546\u54c1\u7f16\u7801\x3c/h2\x3e");m.push("\x3cul\x3e\x3cli\x3e\x3clabel\x3e"+g+"\x3c/label\x3e\x3cspan\x3e\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e");0<m.length&&(k.push('\x3cdiv id\x3d"content-'+f+'" \x3e'),k.push('\x3cdiv id\x3d"parameterContentButton-'+f+'" class\x3d"product-shade hide"\x3e'),k.push('\x3cp\x3e\x3ca id\x3d"parameterDownButton-'+f+'"  href\x3d"javascript:;"  class\x3d"product-detail-btn"\x3e\u67e5\u770b\u5168\u90e8\u53c2\u6570\x3c/a\x3e\x3c/p\x3e'),k.push("\x3c/div\x3e"),k.push('\x3cdiv id\x3d"pro-tab-parameter-content-'+f+'" class\x3d"layout"\x3e'),k.push('\x3cdiv id\x3d"parameter-content-'+f+'"\x3e'),k.push(m.join("")),k.push("\x3c/div\x3e"),k.push("\x3c/div\x3e"),k.push('\x3ca id\x3d"parameterUpButton-'+f+'" href\x3d"javascript:;" class\x3d"product-detail-btnup hide"\x3e\u6536\u8d77\u53c2\u6570\u8be6\u60c5\x3c/a\x3e'),k.push("\x3c/div\x3e"))}$("#productDetailParameter").prepend(k.join(""));$("#content-"+(ec.product.setSkuId||f)).show().siblings().hide()}$("#productParameterId").show();$("#productParameterHr30").show();var t=ec.product.getSku(),t=ec.product.getSkuInfo(t);a=$("#parameter-content-"+t.id).height();540>=a&&0<a?$("#parameterContentButton-"+t.id).removeClass("show").addClass("hide"):($("#parameterContentButton-"+t.id).removeClass("hide").addClass("show"),$("#pro-tab-parameter-content-"+t.id).css({height:"540",overflow:"hidden"}),$("#parameterDownButton-"+t.id).click(function(){$("#pro-tab-parameter-content-"+t.id).height($("#parameter-content-"+t.id).height());$("#parameterContentButton-"+t.id).removeClass("show").addClass("hide");$("#parameterUpButton-"+t.id).removeClass("hide").addClass("show")}),$("#parameterUpButton-"+t.id).click(function(){$("#parameterContentButton-"+t.id).removeClass("hide").addClass("show");$("#parameterUpButton-"+t.id).removeClass("show").addClass("hide");$("#pro-tab-parameter-content-"+t.id).height("540");$("body,html").animate({scrollTop:tit1+$("#pro-tab-feature-content").height()+$("#hr60Detail").height()+270},0)}))}else $("#parameterDetailTips").show()},error:function(){$("#parameterDetailTips").show()}})}};function stopConsultation(){$("#stopConsultationId").hide();$("#myConsultation").show();$("#upUserAdvisory").removeClass("show").addClass("hide")}ec.product.switchSku=function(){oTop=$(".product-tab").offset().top;clickFlag=!1};ec.product.pagerScroll=function(b){$("#"+b+" li.link").click(function(){$("html, body").animate({scrollTop:$("#productAsk").offset().top-$("#product-tab").height()})})};ec.product.serverCommodity=function(b){var a=$("#"+b+" ul li").length,a=Math.ceil((a-1)/2);liHeight=$("#"+b+" ul li").height();$("#"+b+" ul li").eq(0).css({height:24*a-6})};ec.product.scroll=function(b,a){var c=$("#"+b).parent().parent();c.find(".swiper-slide").length<=a?(c.find(".swiper-button-prev").addClass("disabled"),c.find(".swiper-button-next").addClass("disabled")):c.find(".swiper-button-next").removeClass("disabled");var e=new Swiper("#"+b,{slidesPerView:a,slidesPerGroup:a});c.find(".swiper-button-prev").click(function(){e.swipePrev()});c.find(".swiper-button-next").click(function(){e.swipeNext()})};$(document).ready(function(){var b=[];$(".swiper-container").each(function(a,c){var e=$(this).attr("id");(""+e).startWith("omb-pro-")||b.push(e)});$.each(b,function(a,b){5>=$("#"+b).find(".swiper-slide").length?($("#"+b).parent().find(".swiper-button-prev").hide(),$("#"+b).parent().find(".swiper-button-next").hide()):$("#"+b).find(".swiper-button-next").show();var c=new Swiper("#"+b,{slidesPerView:2,slidesPerGroup:2});$("#"+b).parent().find(".btn-prev").click(function(){c.swipePrev()});$("#"+b).parent().find(".btn-next").click(function(){c.swipeNext()})});$("#pro-relation-scroll").find("li").mousedown(function(){return!1})});function pushProHistoryMsg(b,a){var c={UID:ec.util.cookie.get("uid"),TID:getPtid(),TIME:getTime(),CONTENT:{SKUCode:b,click:"1"}};ec.account.dapPushMsg("300020801",c,"click");ec.code.addAnalytics({hicloud:!0});_paq.push(["trackLink","300020801","link",c])}function pushProGiftBuySerMsg(){var b=$("#pro-sku-code").val(),b={UID:ec.util.cookie.get("uid"),TID:getPtid(),TIME:getTime(),CONTENT:{selectGiftbuy:"1",SKUCode:b,click:"1"}};ec.code.addAnalytics({hicloud:!0});_paq.push(["trackLink","300021001","link",b])}function checkedThis(b,a,c,e){var d=document.getElementsByName(c);b=$(b).children("input:first-child")[0];if($("#"+a).hasClass("red"))b.checked=!1,$("#"+e).parent().parent().removeClass("hover");else for(var f=0;f<=d.length-1;f++){if(d[f]==b){d[f].checked=!0;if("extendProtected"==e||"accidentProtected"==e)$('#ucareProtected input[type\x3d"checkbox"]').removeAttr("checked"),$("#ucareProtected .product-service-listcon.red").removeClass("red"),$("#ucareProtected").parent().parent().removeClass("selected"),$("#ucareSelect").attr("data-scode",""),$("#ucareSelect").attr("skuid",""),$("#ucare-selected").remove();"ucareProtected"==e&&($('#extendProtected input[type\x3d"checkbox"]').removeAttr("checked"),$("#extendProtected .product-service-listcon.red").removeClass("red"),$("#extendProtected").parent().parent().removeClass("selected"),$('#accidentProtected input[type\x3d"checkbox"]').removeAttr("checked"),$("#accidentProtected .product-service-listcon.red").removeClass("red"),$("#accidentProtected").parent().parent().removeClass("selected"),$("#extendSelect").attr("data-scode",""),$("#accidentSelect").attr("data-scode",""),$("#extendSelect").attr("skuid",""),$("#accidentSelect").attr("skuid",""),$("#extend-selected").remove(),$("#accident-selected").remove())}else d[f].checked=!1;$("#extendProtected").parent().parent().removeClass("hover");$("#accidentProtected").parent().parent().removeClass("hover");$("#ucareProtected").parent().parent().removeClass("hover")}0==$("input[name\x3d"+c+"]:checked").length?($("#"+a).removeClass("red"),$("#"+e).parent().parent().removeClass("selected"),a=$("#"+e).parent().parent().find("span").eq(0).attr("id"),$("#"+a).html(""),$("#"+a).attr("skuid",""),$("#"+a).attr("data-scode",""),"extendProtected"==e&&$("#extend-selected").remove(),"accidentProtected"==e&&$("#accident-selected").remove(),"ucareProtected"==e&&$("#ucare-selected").remove()):(c=[],$("#"+a).hasClass("red")&&$("#"+a).removeClass("red"),"extendProtected"==e&&($("#extendProtected").parent().parent().find("a").eq(0).remove(),$("#"+a).attr("id"),d=$("#"+a).attr("title"),d=ec.autoEncodeAttr(d),$("#extendSelect").text(d),$("#extendSelect").attr("skuid",$("#"+a).attr("skuID")),$("#extendSelect").attr("data-scode",$("#"+a).attr("data-scode")),$("#extendSelect").attr("interest-price",$("#"+a).attr("data-price")),d='\x3cspan class\x3d"fl max-w"\x3e'+d+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+$("#"+a).attr("data-price")+"\x3c/span\x3e",$("#extendProtected").parent().before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.click_function(this)" class\x3d"product-service-btn"\x3e'+d+"\x3c/a\x3e"),$("#extendProtected").parent().parent().addClass("selected"),$("#"+a).addClass("red"),$("#extendProtected ul li .product-service-listcon").not("#"+a).removeClass("red"),$("#extend-selected").remove(),d=$("#extendSelect").text(),d=ec.autoEncodeAttr(d),""!=d&&(c.push('\x3cdiv id\x3d"extend-selected" class\x3d"inline"\x3e\x26nbsp;/\x26nbsp;'+d+"\x3c/div\x3e"),d=$("#pro-select-sku").html(),$("#pro-select-sku").html(d+c.join("")))),"accidentProtected"==e&&($("#accidentProtected").parent().parent().find("a").eq(0).remove(),$("#"+a).attr("id"),d=$("#"+a).attr("title"),d=ec.autoEncodeAttr(d),$("#accidentSelect").text(d),$("#accidentSelect").attr("skuid",$("#"+a).attr("skuID")),$("#accidentSelect").attr("data-scode",$("#"+a).attr("data-scode")),$("#accidentSelect").attr("interest-price",$("#"+a).attr("data-price")),d='\x3cspan class\x3d"fl max-w"\x3e'+d+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+$("#"+a).attr("data-price")+"\x3c/span\x3e",$("#accidentProtected").parent().before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.click_function(this)" class\x3d"product-service-btn"\x3e'+d+"\x3c/a\x3e"),$("#accidentProtected").parent().parent().addClass("selected"),$("#"+a).addClass("red"),$("#accidentProtected ul li .product-service-listcon").not("#"+a).removeClass("red"),$("#accident-selected").remove(),d=$("#accidentSelect").text(),d=ec.autoEncodeAttr(d),""!=d&&(c.push('\x3cdiv id\x3d"accident-selected" class\x3d"inline"\x3e\x26nbsp;/\x26nbsp;'+d+"\x3c/div\x3e"),d=$("#pro-select-sku").html(),$("#pro-select-sku").html(d+c.join("")))),"ucareProtected"==e&&($("#ucareProtected").parent().parent().find("a").eq(0).remove(),$("#"+a).attr("id"),d=$("#"+a).attr("title"),d=ec.autoEncodeAttr(d),$("#ucareSelect").text(d),$("#ucareSelect").attr("skuid",$("#"+a).attr("skuID")),$("#ucareSelect").attr("data-scode",$("#"+a).attr("data-scode")),$("#ucareSelect").attr("interest-price",$("#"+a).attr("data-price")),d='\x3cspan class\x3d"fl max-w"\x3e'+d+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+$("#"+a).attr("data-price")+"\x3c/span\x3e",$("#ucareProtected").parent().before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.click_function(this)" class\x3d"product-service-btn"\x3e'+d+"\x3c/a\x3e"),$("#ucareProtected").parent().parent().addClass("selected"),$("#"+a).addClass("red"),$("#ucareProtected ul li .product-service-listcon").not("#"+a).removeClass("red"),$("#ucare-selected").remove(),d=$("#ucareSelect").text(),d=ec.autoEncodeAttr(d),""!=d&&(c.push('\x3cdiv id\x3d"ucare-selected" class\x3d"inline"\x3e\x26nbsp;/\x26nbsp;'+d+"\x3c/div\x3e"),d=$("#pro-select-sku").html(),$("#pro-select-sku").html(d+c.join("")))));ec.product.interest.queryFreeDetail();ec.product.refreshStyle()}ec.product.click_function=function(b){var a=$(b).parent().find(".product-service-list").attr("id");$(b).parent().data("flag","1");$("#"+a).parent().parent().removeClass("hover");$(b).parent().hasClass("selected")&&($(b).parent().removeClass("selected"),$(b).parent().find("p").removeClass("red"),b=$(b).parent().find("span").eq(0).attr("id"),$("#"+b).attr("skuid",""),$("#"+b).attr("data-scode",""),$("#"+b).attr("interest-price",""),"extendProtected"==a&&($("#extendProtected").parent().parent().find("a").eq(0).remove(),$("#extendProtected ul").find("li").find("input").attr("checked",!1),$("#extendProtected ul").find("li").find(".product-service-listcon").removeClass("red"),$("#extend-selected").remove(),b=$("#extendProtected ul").find("li").eq(0).find(".product-service-listcon"),b='\x3cspan class\x3d"fl max-w"\x3e'+b.attr("title")+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+b.attr("data-price")+"\x3c/span\x3e",$("#extendProtected").parent().before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.click_function(this)" class\x3d"product-service-btn"\x3e'+b+"\x3c/a\x3e")),"accidentProtected"==a&&($("#accidentProtected").parent().parent().find("a").eq(0).remove(),$("#accidentProtected ul").find("li").find("input").attr("checked",!1),$("#accidentProtected ul").find("li").find(".product-service-listcon").removeClass("red"),$("#accident-selected").remove(),b=$("#accidentProtected ul").find("li").eq(0).find(".product-service-listcon"),b='\x3cspan class\x3d"fl max-w"\x3e'+b.attr("title")+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+b.attr("data-price")+"\x3c/span\x3e",$("#accidentProtected").parent().before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.click_function(this)" class\x3d"product-service-btn"\x3e'+b+"\x3c/a\x3e")),"ucareProtected"==a&&($("#ucareProtected").parent().parent().find("a").eq(0).remove(),$("#ucareProtected ul").find("li").find("input").attr("checked",!1),$("#ucareProtected ul").find("li").find(".product-service-listcon").removeClass("red"),$("#ucare-selected").remove(),b=$("#ucareProtected ul").find("li").eq(0).find(".product-service-listcon"),a='\x3cspan class\x3d"fl max-w"\x3e'+b.attr("title")+'\x3c/span\x3e\x3cspan class\x3d"fl"\x3e\x26nbsp;\uffe5'+b.attr("data-price")+"\x3c/span\x3e",$("#ucareProtected").parent().before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.click_function(this)" class\x3d"product-service-btn"\x3e'+a+"\x3c/a\x3e")),ec.product.interest.queryFreeDetail())};ec.product.newpackageView=function(b,a,c){var e=ec.product.getSku(),e=ec.product.getSkuInfo(e);ec.product.packageViewChange(b,a);$("#packageCode").val(a);$("#packageList").html("");_giftBuyItemId=[];if(null==a)0<$("#giftBuy_dl").length&&($("#giftBuy_dl").hasClass("hide")&&$("#giftBuy_dl").removeClass("hide"),$.each($("#giftBuy_dl").find("li"),function(){$(this).attr("data-attrname")&&"\u65e0\u589e\u503c\u670d\u52a1"==$(this).attr("data-attrname").transHtmlAttribute()&&($(this).addClass("selected"),$("#giftBuy-selected").html("/ \u65e0\u589e\u503c\u670d\u52a1"))}),2==$("#pro-operation").find("a").length&&"\u52a0\u5165\u8d2d\u7269\u8f66"==$("#pro-operation").find("a").first().find("span").html()&&$("#pro-operation").find("a").first().attr("onclick","").click(function(){ec.product.addCart()}),1==$("#pro-operation").find("a").length&&"\u7acb\u5373\u4e0b\u5355"==$("#pro-operation").find("a").first().find("span").html()&&($("#pro-operation").attr("data-gift",0),$("#pro-operation").find("a").before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button01"\x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e'))),e.price!=e.originPrice?($("#pro-price-label").html("\u62a2\u8d2d\u4ef7"),$("#pro-price-label").removeClass("f24").addClass("type"),$("#pro-price").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+e.price),$("#pro-price-old").html("\x26yen;\x26nbsp;"+e.originPrice),$("#pro-price-label").show(),$("#pro-price").show(),$("#pro-price-old").show()):($("#pro-price-label").hide(),$("#pro-price").html("\x3cem\x3e\u00a5\x3c/em\x3e"+e.originPrice+"")),0<Number(e.price)?$("#pro-price").show():($("#pro-price-label").text("\u6682\u65e0\u62a5\u4ef7"),$("#pro-price").hide()),ec.product.showTips(),ec.product.processSupportDisplayDilieryTime(e),ec.product.interest.queryFreeDetail(),ec.diypkg.init();else{ec.diypkg.hide();ec.product.hiddenTips();0<$("#giftBuy_dl").length&&($("#giftBuy_dl").hasClass("hide")||$("#giftBuy_dl").addClass("hide"),$("#giftBuy_dl").find("li").removeClass("selected"),$("#giftBuy-selected").html(""),2==$("#pro-operation").find("a").length&&"\u52a0\u5165\u8d2d\u7269\u8f66"==$("#pro-operation").find("a").first().find("span").html()&&$("#pro-operation").find("a").first().attr("onclick","").click(function(){ec.product.addCart()}),1==$("#pro-operation").find("a").length&&"\u7acb\u5373\u4e0b\u5355"==$("#pro-operation").find("a").first().find("span").html()&&($("#pro-operation").attr("data-gift",0),$("#pro-operation").find("a").before('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.addCart()" class\x3d"product-button01"\x3e\x3cspan\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/span\x3e\x3c/a\x3e')));var d=e.pro_sbomList,f="";b="";for(var g=0;g<d.length;g++)if(c==d[g].sbomCode){f=d[g].sbomPackageList;break}if(""!=f&&0<f.length)for(c=0;c<f.length;c++)if(a==f[c].packageCode){b=f[c];break}a=[];$("#product_productId").val();if(""!=b&&null!=b){a.push('\x3cdiv class\x3d"product-recommend product-package-mini"\x3e');a.push('\x3cdiv class\x3d"product-recommend-con clearfix"\x3e');a.push('\x3cdiv class\x3d"product-recommend-main"\x3e');a.push('\x3cdiv class\x3d"product-recommend-thumbs"\x3e');a.push('\x3cul class\x3d"clearfix"\x3e');a.push('\x3cli\x3e \x3ca\x3e \x3cimg src\x3d"'+ec.mediaPath+e.photoPath+"100_100_"+e.photoName+'"\x3e');a.push('\x3cp title\x3d"'+e.name+'"\x3e'+e.name+"\x3c/p\x3e");a.push("\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e");e=b.packageList;if(""!=e&&0<e.length){a.push('\x3cdiv class\x3d"goods-rolling product-recommend-detail"\x3e');a.push('\x3cdiv id\x3d"btn-prev" class\x3d"grid-btn btn-prev disabled"\x3e');a.push("\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e");a.push('\x3cdiv id\x3d"btn-next" class\x3d"grid-btn btn-next"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e');a.push('\x3cdiv id\x3d"goodsRecommend-recommend" class\x3d"swiper-container product-recommend-thumbs"\x3e');a.push('\x3cul class\x3d" swiper-wrapper clearfix" style\x3d"width: 1000px;"\x3e');for(c=0;c<e.length;c++)if(a.push('\x3cli class\x3d"swiper-slide" attr-packageSkuCode\x3d"'+e[c].sbomCode+'"\x3e\x3ca href\x3d"/product/'+e[c].disPrdId+'.html" target\x3d"_blank"\x3e\x3cimg src\x3d"'+ec.mediaPath+e[c].photoPath+"100_100_"+e[c].photoName+'"\x3e'),a.push('\x3cp title\x3d"'+e[c].sbomName+'"\x3e'+e[c].sbomName+"\x3c/p\x3e\x3c/a\x3e"),f=e[c].gbomAttrList,""!=f&&0<f.length){a.push('\x3cdl class\x3d"color clearfix"\x3e');for(d=0;d<f.length;d++)if(0==d?a.push('\x3cdd class\x3d"selected"\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.packageChangeColor(this)" attr-name\x3d"'+e[c].sbomName+'" attr-imgSrc\x3d"'+ec.mediaPath+e[c].photoPath+"100_100_"+e[c].photoName+'" attr-prdId\x3d"'+e[c].disPrdId+'" attr-packageSkuCode\x3d"'+e[c].sbomCode+'"\x3e'+f[d].attrValue+"\x3c/a\x3e\x3c/dd\x3e"):a.push('\x3cdd\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.packageChangeColor(this)" attr-name\x3d"'+e[c].sbomName+'" attr-imgSrc\x3d"'+ec.mediaPath+e[c].photoPath+"100_100_"+e[c].photoName+'" attr-prdId\x3d"'+e[c].disPrdId+'" attr-packageSkuCode\x3d"'+e[c].sbomCode+'"\x3e'+f[d].attrValue+"\x3c/a\x3e\x3c/dd\x3e"),c!=e.length-1)for(var g=c,h=1;h<e.length-g;h++)e[g].disPrdId==e[g+h].disPrdId&&(f=e[g+h].gbomAttrList,a.push('\x3cdd\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.packageChangeColor(this)" attr-name\x3d"'+e[g+h].sbomName+'" attr-imgSrc\x3d"'+ec.mediaPath+e[g+h].photoPath+"100_100_"+e[g+h].photoName+'" attr-prdId\x3d"'+e[g+h].disPrdId+'" attr-packageSkuCode\x3d"'+e[g+h].sbomCode+'"\x3e'+f[0].attrValue+"\x3c/a\x3e\x3c/dd\x3e"),c=g+h);a.push("\x3c/dl\x3e\x3c/li\x3e")}a.push("\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")}e=(b.totalPrice-b.packageTotalPrice).toFixed(2);a.push('\x3cdiv class\x3d"product-package-mini-tool clearfix"\x3e');a.push('\x3cp\x3e\x3cspan class\x3d"f14"\x3e\u5957\u9910\u4ef7\uff1a\x3c/span\x3e\x3cstrong class\x3d"red"\x3e\uffe5'+b.packageTotalPrice+'\x3c/strong\x3e\x3cspan class\x3d"save"\x3e \x3cstrong\x3e\u7701\x3c/strong\x3e\x3cem\x3e\uffe5'+e+"\x3c/em\x3e \x3c/span\x3e\x3c/p\x3e");a.push('\x3cdiv class\x3d"fr"\x3e\x3ca href\x3d"#" class\x3d"product-package-mini-btn product-button02" onclick\x3d"ec.product.buyBundle(1,this)"\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/a\x3e\x3c/div\x3e');a.push("\x3c/div\x3e\x3c/div\x3e")}$("#packageList").html(a.join(""));ec.product.packageGetSkuCode();$("#pro-price-label").html("\u5957\u9910\u4ef7");$("#pro-price-label").removeClass("f24").addClass("type");$("#pro-price-label").show();$("#pro-price").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+b.packageTotalPrice).show();$("#pro-price-old").hide();ec.product.newPackageSwiper();ec.product.interest.queryFreeDetail()}};ec.product.packageViewChange=function(b,a,c){$(b).parent().parent().hasClass("selected")?$(b).parent().parent().hasClass("click")?($(b).parent().parent().removeClass("click"),"gift"==c?$("#giftPackageList").addClass("hide"):$("#packageList").addClass("hide")):"gift"==c?($(b).parent().parent().parent().find("li").removeClass("click"),$(b).parent().parent().addClass("click"),$("#giftPackageList").removeClass("hide")):null==a?$("#packageList").html(""):($(b).parent().parent().addClass("click"),$("#packageList").removeClass("hide")):($(b).parent().parent().parent().find("li").removeClass("selected click"),"gift"==c?($(b).parent().parent().addClass("selected click"),$("#giftPackageList").removeClass("hide")):(null==a?($(b).parent().parent().addClass("selected"),$("#packageList").html(""),$("#packageCode").val(""),$("#packageListCode").val("")):($(b).parent().parent().addClass("selected click"),$("#packageList").removeClass("hide")),$("#package-selected").html(),$("#package-selected").text("\x26nbsp;/\x26nbsp;"+$(b).parent().parent().attr("data-attrname"))))};$("body").live("click",function(b){if(0<$("#package_dl").length||!(0< !$("#bundlePackage").length)){if(!$("#packageList").hasClass("hide")){if(0<$(b.target).parents("#packageList").length||0<$(b.target).parents("#packageSelect").length||$("#packageList").hasClass("hide"))return;$("#packageSelect").find(".click").removeClass("click");$("#packageList").addClass("hide");ec.product.packageGetSkuCode()}$("#giftPackageList").hasClass("hide")||0<$(b.target).parents("#giftPackageList").length||0<$(b.target).parents("#bundlePackageSelect").length||$("#giftPackageList").hasClass("hide")||($("#bundlePackageSelect").find(".click").removeClass("click"),$("#giftPackageList").addClass("hide"),ec.product.packageGetSkuCode("gift"))}});ec.product.packageChangeColor=function(b,a){$(b).parent().hasClass("selected")||($(b).parent().parent().find("dd").removeClass("selected"),$(b).parent().addClass("selected"),ec.product.packageGetSkuCode(a))};ec.product.packageGetSkuCode=function(b){var a=[],c=[];"gift"==b?($("#bundlePackageSelect").find("ul").find("dl").find(".selected").find("a").each(function(){""!=$(this).attr("attr-packageskucode")&&($(this).parent().parent().parent().attr("attr-packageskucode",$(this).attr("attr-packageskucode")),$(this).parent().parent().parent().find("img").attr("src",$(this).attr("attr-imgSrc")),$(this).parent().parent().parent().find("p").attr("title",$(this).attr("attr-name")),$(this).parent().parent().parent().find("p").text($(this).attr("attr-name")))}),$("#goodsRecommend-recommend-gift").find("li").each(function(){c.push($(this).attr("attr-packageskucode"))}),b=$("#bundlePackageSelect").find(".product-recommend-main").find("a").attr("sku-id"),ec.product.gift.packageGiftMap[b]=c):($("#packageSelect").find("ul").find("dl").find(".selected").find("a").each(function(){""!=$(this).attr("attr-packageskucode")&&($(this).parent().parent().parent().attr("attr-packageskucode",$(this).attr("attr-packageskucode")),$(this).parent().parent().parent().find("img").attr("src",$(this).attr("attr-imgSrc")),$(this).parent().parent().parent().find("p").attr("title",$(this).attr("attr-name")),$(this).parent().parent().parent().find("p").text($(this).attr("attr-name")))}),$("#goodsRecommend-recommend").find("li").each(function(){a.push($(this).attr("attr-packageskucode"))}),$("#packageListCode").val(a))};ec.product.newPackageSwiper=function(b){if(null==b||"undefined"==typeof b)b="";2>=$("#goodsRecommend-recommend"+b).find(".swiper-slide").length?($("#btn-prev"+b).addClass("disabled"),$("#btn-next"+b).addClass("disabled")):$("#btn-next"+b).removeClass("disabled");var a=new Swiper("#goodsRecommend-recommend"+b,{slidesPerView:2,slidesPerGroup:2});$("#btn-prev"+b).click(function(){a.swipePrev();ec.product.showSwiper(b)});$("#btn-next"+b).click(function(){a.swipeNext();ec.product.showSwiper(b)})};ec.product.showSwiper=function(b){var a=$("#goodsRecommend-recommend"+b).find("li").length;$.each($("#goodsRecommend-recommend"+b).find("li"),function(c,e){0==c&&$(e).hasClass("swiper-slide-visible")?$("#btn-prev"+b).addClass("disabled"):0!=c||$(e).hasClass("swiper-slide-visible")||$("#btn-prev"+b).removeClass("disabled");c==a-1&&$(e).hasClass("swiper-slide-visible")?$("#btn-next"+b).addClass("disabled"):c!=a-1||$(e).hasClass("swiper-slide-visible")||$("#btn-next"+b).removeClass("disabled")})};ec.product.hidebundleView=function(){0<$("#bundlePackage").length&&1<$("#bundlePackage").find("li").length||1==$("#bundlePackage").find("li").length&&$("#bundlePackage").addClass("hide")};ec.product.showCmbSelector=function(b,a){$("#hbShow").css("float","left").css("margin-right","10px");$("#hlShow").css("margin-right","10px");if(0<b.length){var c=ec.product.getSkuInfo(ec.product.getSku());if(a&&0<a.length){var e="";c.promotionLst&&0<c.promotionLst.length&&c.promotionLst.forEach(function(a){if("\x26#x5206;\x26#x671f;\x26#x514d;\x26#x606f;"===a.promoLabel||"\u5206\u671f\u514d\u606f"===a.promoLabel)e=a.ruleDescription});(e=e.transHtmlAttribute())&&e.indexOf("\u82b1\u5457")>e.indexOf("\u638c\u4e0a")&&($("#hbShow").css("float","right").css("margin-right","0"),$("#hlShow").css("margin-right","0"),$("#hbShow").parent().css("width",$("#hbShow").width()+$("#hlShow").width()+10+"px"))}$("#hlShow").show();for(var d=c=0;d<b.length;d++)"undefined"===typeof b[d].flag&&(b[d].flag=b[d].installmentFlag),0<b[d].flag&&b[d].num>c&&(c=b[d].num);for(var f=[],d=0;d<b.length;d++)c===b[d].num?($("#interestPayHLNow").removeClass("disabled"),f.push('\x3cli class\x3d"selected"\x3e')):f.push("\x3cli\x3e"),f.push('\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.interest.checkOne(this);" interest-info\x3d"2:'+b[d].num+'"\x3e'),f.push('\x3cp class\x3d"price"\x3e\x26yen;\x26nbsp;'+b[d].amount+"\x3cem\x3ex\x3c/em\x3e"+b[d].num+"\u671f\x3c/p\x3e"),0==b[d].flag?f.push("\x3cp\x3e\u624b\u7eed\u8d39\x26yen;"+b[d].fee+"/\u671f\x3c/p\x3e\x3c/a\x3e\x3c/li\x3e"):f.push('\x3cp class\x3d"red"\x3e\u514d\u606f\uff0c0\u624b\u7eed\u8d39\x3c/p\x3e\x3c/a\x3e\x3c/li\x3e');$("#hlDetail").find("ul").html(f.join(""));$("#hlShow").find(".sku").unbind("mouseover");$("#hlShow").unbind("mouseleave");$("#hlShow").find(".sku").mouseover(function(){$("#hlShow").hasClass("click")||($("#hlDetail").show(),$("#hlShow").addClass("click"))});$("#hlShow").mouseleave(function(a){a.relatedTarget&&($("#hlDetail").hide(),$("#hlShow").removeClass("click"))})}else $("#hlShow").hide(),$("#hlDeatil").hide()};ec.product.showSbomInterest=function(b){var a=!0;"hidden"==$("#pro-operation").css("visibility")&&(a=!1);$("#interestOrderNow").val("");$("#interestOrderNow2").val("");if(a&&("1"==b.buttonMode||"3"==b.buttonMode||"10"==b.buttonMode)&&"\u52a0\u5165\u8d2d\u7269\u8f66"==$("#pro-operation a:first-child").text()&&!$("#pro-operation a:first-child").hasClass("disabled")||"9"==ec.product.productType&&("12"==b.buttonMode||"18"==b.buttonMode)||"\u9650\u65f6\u62a2\u8d2d\u8fdb\u884c\u4e2d"==$("#pro-operation").find("span.product-button-tips").text())if($("#prd-noInterset").attr("interest-allow","1"),a=$("#pro-operation a:first-child").text(),"\u52a0\u5165\u8d2d\u7269\u8f66"!=a&&($("#prd-noInterset").attr("interest-button","0"),"9"!=ec.product.productType||"12"!=b.buttonMode&&"18"!=b.buttonMode||"\u7acb\u5373\u4e0b\u5355"!=a||$("#prd-noInterset").attr("interest-button","1")),$("#hbShow").removeClass("selected click"),$("#hlShow").removeClass("selected click"),$("#interestHBPayNow").hasClass("disabled")||$("#interestHBPayNow").addClass("disabled"),$("#interestPayHLNow").hasClass("disabled")||$("#interestPayHLNow").addClass("disabled"),0<b.hbInterestLst.length||0<b.hlInterestLst.length){$("#prd-noInterset").removeClass("hide");$("#hbDetail").hide();$("#hlDetail").hide();$("#hbShow").hide();$("#hlShow").hide();if(0<b.hbInterestLst.length){$("#hbShow").show();for(var a=[],c=0;c<b.hbInterestLst.length;c++)a.push('\x3cli\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.product.interest.checkOne(this);" interest-info\x3d"1:'+b.hbInterestLst[c].num+'"\x3e'),a.push('\x3cp class\x3d"price"\x3e\x26yen;\x26nbsp;'+b.hbInterestLst[c].amount+"\x3cem\x3ex\x3c/em\x3e"+b.hbInterestLst[c].num+"\u671f\x3c/p\x3e"),0==b.hbInterestLst[c].flag?a.push("\x3cp\x3e\u624b\u7eed\u8d39\x26yen;"+b.hbInterestLst[c].fee+"/\u671f\x3c/p\x3e\x3c/a\x3e\x3c/li\x3e"):a.push('\x3cp class\x3d"red"\x3e\u514d\u606f\uff0c0\u624b\u7eed\u8d39\x3c/p\x3e\x3c/a\x3e\x3c/li\x3e');$("#hbDetail").find("ul").html(a.join(""));$("#hbShow").find(".sku").unbind("mouseover");$("#hbShow").unbind("mouseleave");$("#hbShow").find(".sku").mouseover(function(){$("#hbDetail").show();$("#hbShow").addClass("click")});$("#hbShow").mouseleave(function(a){a.relatedTarget&&($("#hbDetail").hide(),$("#hbShow").removeClass("click"))})}else $("#hbShow").hide(),$("#hbDetail").hide();ec.product.showCmbSelector(b.hlInterestLst,b.hbInterestLst);"0"==$("#prd-noInterset").attr("interest-button")&&($("#interestHBPayNow").each(function(){$(this).addClass("disabled");this.backup=this.onclick;this.onclick=""}),$("#interestPayHLNow").each(function(){$(this).addClass("disabled");this.backup=this.onclick;this.onclick=""}))}else $("#prd-noInterset").hasClass("hide")||$("#prd-noInterset").addClass("hide"),$("#hbDetail").find("ul").html(""),$("#hlDetail").find("ul").html("");else $("#prd-noInterset").attr("interest-allow","0"),$("#hbDetail").find("ul").html(""),$("#hlDetail").find("ul").html(""),$("#prd-noInterset").hasClass("hide")||$("#prd-noInterset").addClass("hide")};ec.pkg("ec.diypkg");ec.load({url:scriptPath+"/common/base/lodash.min.js",type:"js"});ec.diypkg.valid=function(){ec.diypkg.selected=[];ec.diypkg.data.groupList.forEach(function(b,a){var c={groupId:b.groupId,groupName:b.groupName,minQuantiry:b.minQuantiry,maxQuantity:b.maxQuantity,chked:0,data:[]};b.packageList.forEach(function(a){var d=ec.diypkg.res.chked[b.groupId+"_"+a.disPrdId];d&&a.sbomCode==d&&(c.chked++,c.data.push(a.sbomCode))});ec.diypkg.selected.push(c)});return!0};ec.diypkg.addCart=function(b){if(!ec.diypkg.valid())return!1;paras={salePortal:1,saleChannel:1001,needResultset:0,cartjson:ec.product.finalGift().cartjson};paras.cartjson=JSON.parse(paras.cartjson);paras.cartjson.itemType="DP";paras.cartjson.attrs=paras.cartjson.attrs||{};paras.cartjson.attrs.dp_package_code=ec.diypkg.data.packageCode;ec.diypkg.selected.forEach(function(a){a.data.forEach(function(b){paras.cartjson.subs.push({itemCode:b,itemType:"DP",qty:paras.cartjson.qty,attrs:{dp_group:a.groupId}})})});ec.product.disableAddCartButtons();b=parseInt($("#pro-quantity").val());var a=parseInt($("#header-cart-total").html());ec.minicart.setNum(a+b);ec.cart.add(paras,{successFunction:function(a){2E5==a.resultCode&&(27<ec.product.compute($("#pro-add-success-mask"),"\u81ea\u9009\u5957\u9910\u5df2\u6210\u529f\u52a0\u5165\u8d2d\u7269\u8f66!").h?$("#cart-tips").find("p").parent().removeClass("box-right-1").addClass("box-right-2"):$("#cart-tips").find("p").parent().removeClass("box-right-2").addClass("box-right-1"),$("#cart-tips").find("p").text("\u81ea\u9009\u5957\u9910\u5df2\u6210\u529f\u52a0\u5165\u8d2d\u7269\u8f66!"),$(".pro-add-success-total").hide(),ec.minicart.setNum(a.cartNumber),(new ec.box($("#cart-tips").html(),{boxclass:"ol_box_4",showButton:!1})).open());ec.product.enableAddCartButtons()},errorFunction:function(a){(new ec.box('\x3cdiv class\x3d"box-errors-1"\x3e\x3cspan\x3e'+a.msg+"\x3c/span\x3e\x3c/div\x3e",{boxclass:"ol_box_4",showButton:!0})).open();ec.product.enableAddCartButtons()}})};ec.diypkg.order=function(b){if(!ec.diypkg.valid())return!1;ec.account.afterLogin(function(){var a=$("#pro-skus").find("dl").not($("#giftPackageList").find("dl")).not($("#packageList").find("dl"));for(p=0;p<a.length;p++){var b=!1,e=a.get(p);$(e).children(".product-choose-detail").children("ul").find("li").each(function(a){if(0<$(this).parents("#giftPackageList").length||0<$(this).parents("#packageList").length)return!0;$(this).hasClass("selected")&&(b=!0)});if(!b)return alert("\u8bf7\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u7c7b\u578b"),!1}ec.product.disableAddCartButtons();var a=[],d={};d.itemId=$("#pro-sku-code").val();d.qty=$("#pro-quantity").val();d.itemType="S0";9==ec.product.productType&&(d.itemType="S9");var f=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()],e=ec.product.getSku(),g=[];if(f)for(var h in f)g.push({sbomCode:f[h].giftSkuCode});if(ec.product.gift.packageGiftMap[e])for(h=0;h<ec.product.gift.packageGiftMap[e].length;h++)g.push({sbomCode:ec.product.gift.packageGiftMap[e][h]});d.gifts=g;d.subOrderItemReqArgs=[];d.subOrderItemReqArgs=ec.product.subServices(d.subOrderItemReqArgs);d.itemType="DP";d.itemProp=d.itemProp||{};d.itemProp.dp_package_code=ec.diypkg.data.packageCode;ec.diypkg.selected.forEach(function(a){a.data.forEach(function(b){d.subOrderItemReqArgs.push({itemId:b,itemType:"DP",qty:d.qty,itemProp:{dp_group:a.groupId}})})});a.push(d);h='\x3cinput name\x3d"orderReqJson" type\x3d"text" value\x3d\''+ec.lang.json.stringify(a)+'\'\x3e\x3cinput name\x3d"state" type\x3d"text" value\x3d"0"\x3e';a=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku);9==ec.product.productType&&(h=18==parseInt(a.buttonMode)?h+'\x3cinput name\x3d"routingTag" type\x3d"text" value\x3d"36"\x3e':h+'\x3cinput name\x3d"routingTag" type\x3d"text" value\x3d"28"\x3e');var a=ec.product.getSkuInfo(ec.product.getSku()||ec.product.defaultSku),l=$("#order-confirm-form").append(h);ec.binding.isBindedMobileOrEnterpriseUser(function(){setTimeout(function(){l.submit()},500)})})};ec.diypkg.render=function(){if(!ec.diypkg.pkgs)return ec.diypkg.hide(),!1;var b=ec.product.getSkuInfo(ec.product.getSku());if(!b||!b.code||1!=b.priceMode||1!=b.buttonMode&&3!=b.buttonMode&&10!=b.buttonMode||10==b.buttonMode&&(b.startTime&&ec.util.parseDate(b.startTime)>new Date||b.endTime&&ec.util.parseDate(b.endTime)<new Date))return ec.diypkg.hide(),!1;b.originPrice=parseFloat(b.originPrice);b.price=parseFloat(b.price);var a=ec.diypkg.pkgs[b.code];ec.diypkg.data=a;if(!(a&&a.groupList&&a.groupList[0]&&a.groupList[0].packageList&&a.groupList[0].packageList.length&&ec.product.inventory.haveInventory(b.id)))return ec.diypkg.hide(),!1;a.price=b.price;a.res||(a.res={tab:0,num:0,price:a.price,chked:{}});var c=a.res;ec.diypkg.res=c;a.groupList[0].packageListGrouped||a.groupList.forEach(function(b,c){var d=_.groupBy(b.packageList,"disPrdId"),e=[];a.groupList[c].packageListGrouped=[];b.packageList.forEach(function(b){0>e.indexOf(b.disPrdId)&&(e.push(b.disPrdId),a.groupList[c].packageListGrouped.push(d[b.disPrdId]))})});var e='\x3cul data-size\x3d"" class\x3d"product-package-tab clearfix"\x3e';a.groupList.forEach(function(a,b){var d="";b==c.tab&&(d=' class\x3d"current"');e+="\x3cli"+d+' data-min\x3d"'+a.minQuantiry+'" data-max\x3d"'+a.maxQuantity+'" data-idx\x3d"'+b+'"\x3e';e+='\x3ca href\x3d"javascript:;" onclick\x3d"ec.diypkg.showTab(this)"\x3e'+a.groupName+"\x3c/a\x3e";e+="\x3c/li\x3e"});e+="\x3c/ul\x3e";e+='\x3cdiv class\x3d"product-recommend-con clearfix"\x3e';e+='\x3cdiv class\x3d"product-recommend-main"\x3e';e+='\x3cdiv class\x3d"product-recommend-thumbs"\x3e';e+='\x3cul class\x3d"clearfix"\x3e';e+="\x3cli\x3e";e+='\x3ca href\x3d"javascript:;"\x3e';e+='\x3cimg src\x3d"'+ec.mediaPath+b.photoPath+"100_100_"+b.photoName+'" alt\x3d""\x3e';e+="\x3cp\x3e"+b.name+"\x3c/p\x3e";e+="\x3c/a\x3e";e+='\x3cdiv class\x3d"price"\x3e';e+='\x3cspan class\x3d"red" data-price\x3d"'+a.price+'"\x3e\x26yen;'+a.price+"\x3c/span\x3e";b.originPrice!=a.price&&(e+="\x3cs\x3e\u00a5"+b.originPrice+"\x3c/s\x3e");e+="\x3c/div\x3e";e+="\x3c/li\x3e";e+="\x3c/ul\x3e";e+="\x3c/div\x3e";e+="\x3c/div\x3e";a.groupList.forEach(function(a,b){var d="";5<a.packageListGrouped.length&&(d=" goods-rolling");var f="";b!=c.tab&&(f=' style\x3d"display: none;"');e+='\x3cdiv class\x3d"product-recommend-detail'+d+'"'+f+"\x3e";e+='\x3cdiv class\x3d"product-recommend-thumbs swiper-container" id\x3d"j-swiper-'+b+'"\x3e';e+='\x3cdiv class\x3d"grid-btn btn-prev swiper-button-prev j-prd-prev disabled"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e';e+='\x3cdiv class\x3d"grid-btn btn-next swiper-button-next j-prd-next"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e';e+='\x3cul class\x3d"clearfix swiper-wrapper j-grp" data-gid\x3d"'+b+'"\x3e';a.packageListGrouped.forEach(function(b,d){var f={};b.forEach(function(b){c.chked[a.groupId+"_"+b.disPrdId]&&c.chked[a.groupId+"_"+b.disPrdId]==b.sbomCode&&(f=b)});f.sbomCode||(f=b[0]);e+='\x3cli class\x3d"swiper-slide j-prd" data-pid\x3d"'+d+'"\x3e';e+='\x3ca href\x3d"/product/'+f.disPrdId+'.html" target\x3d"_blank" class\x3d"j-pimg"\x3e';e+='\x3cimg src\x3d"'+ec.mediaPath+f.photoPath+"100_100_"+f.photoName+'"\x3e';e+='\x3cp id\x3d"numb-time" title\x3d"'+f.sbomName+'"\x3e'+f.sbomName+"\x3c/p\x3e";e+="\x3c/a\x3e";var g="";3<b.length&&(g=" j-color-rolling");e+='\x3cdiv class\x3d"color-rolling'+g+'"\x3e';e+='\x3cdiv class\x3d"color-rolling-detail" id\x3d"color-rolling-'+a.groupId+"-"+f.disPrdId+'"\x3e';e+='\x3cdiv class\x3d"grid-btn swiper-button-prev btn-prev j-cbtn-prev disabled"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e';e+='\x3cdiv class\x3d"grid-btn swiper-button-next btn-next j-cbtn-next disabled"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e';e+='\x3cul class\x3d"clearfix swiper-wrapper" style\x3d"width: 600px;"\x3e';b.forEach(function(a){var b="";f.sbomCode==a.sbomCode&&(b=" selected");e+='\x3cli class\x3d"swiper-slide'+b+'" data-code\x3d"'+a.sbomCode+'"\x3e\x3ca href\x3d"javascript:;" onclick\x3d"ec.diypkg.attr(this);"\x3e\x3cimg src\x3d"'+ec.mediaPath+a.photoPath+"100_100_"+a.photoName+'"\x3e\x3c/a\x3e\x3c/li\x3e'});e+="\x3c/ul\x3e";e+="\x3c/div\x3e";e+="\x3c/div\x3e";e+='\x3cdiv class\x3d"price"\x3e';g="";c.chked[a.groupId+"_"+f.disPrdId]&&(g=' checked\x3d"checked"');e+='\x3cinput class\x3d"j-input" type\x3d"checkbox" name\x3d"skuId[]" value\x3d"1" data-id\x3d"'+a.groupId+"_"+f.disPrdId+'" data-code\x3d"'+f.sbomCode+'" autocomplete\x3d"off" data-price\x3d"'+f.packagePrice+'"'+g+"\x3e";e+='\x3cspan class\x3d"red"\x3e\x26yen;'+f.packagePrice+"\x3c/span\x3e";g="";f.price==f.packagePrice&&(g=' style\x3d"display: none;"');e+="\x3cs"+g+"\x3e\x26yen;"+f.price+"\x3c/s\x3e";e+="\x3c/div\x3e";e+="\x3c/li\x3e"});e+="\x3c/ul\x3e";e+="\x3c/div\x3e";e+="\x3c/div\x3e"});e+='\x3cul class\x3d"product-recommend-operation"\x3e';e+='\x3cli class\x3d"chk-num"\x3e\u6bcf\u4e2a\u5957\u9910\u642d\u914d\x3cem\x3e'+c.num+"\x3c/em\x3e\u4ef6\x3c/li\x3e";e+='\x3cli class\x3d"product-recommend-price chk-price"\x3e\u7ec4\u5408\u4ef7\uff1a\x3cspan\x3e\x26yen;'+c.price+"\x3c/span\x3e\x3c/li\x3e";e+='\x3cli\x3e\x3ca href\x3d"javascript:;" class\x3d"product-button01" title\x3d"\u52a0\u5165\u8d2d\u7269\u8f66" onclick\x3d"ec.diypkg.addCart(this);"\x3e\u52a0\u5165\u8d2d\u7269\u8f66\x3c/a\x3e\x3c/li\x3e';e+='\x3cli\x3e\x3ca href\x3d"javascript:;" class\x3d"product-button02" title\x3d"\u7acb\u5373\u4e0b\u5355" onclick\x3d"ec.diypkg.order(this);"\x3e\u7acb\u5373\u4e0b\u5355\x3c/a\x3e\x3c/li\x3e';e+="\x3c/ul\x3e";e+="\x3c/div\x3e";$("#product-recommend-all").html(e).show();$('#product-recommend-all input[name\x3d"skuId[]"]').bind("change",function(){var a=$(this).attr("data-id");$(this).attr("checked")?(ec.diypkg.res.chked[a]=$(this).attr("data-code"),ec.diypkg.res.num++,ec.diypkg.res.price+=parseFloat($(this).attr("data-price"))):(ec.diypkg.res.chked[a]=!1,ec.diypkg.res.num--,ec.diypkg.res.price-=parseFloat($(this).attr("data-price")));ec.diypkg.res.price=parseFloat(ec.diypkg.res.price.toFixed(2));$("#product-recommend-all .product-recommend-operation .chk-num em").text(ec.diypkg.res.num);$("#product-recommend-all .product-recommend-operation .chk-price span").text("\x26yen;"+ec.diypkg.res.price)});$(".goods-rolling:visible").each(function(){$(this).closest(".product-recommend-con").addClass("product-recommend-rolling")});$(".goods-rolling .swiper-container").each(function(){ec.diypkg.initSwiper("#"+$(this).attr("id"),5,"j-prd")});$(".j-color-rolling .color-rolling-detail").each(function(){ec.diypkg.initSwiper("#"+$(this).attr("id"),3,"j-cbtn")});return!0};ec.diypkg.initSwiper=function(b,a,c){var e=$(b);e.find(".swiper-slide").length>a?e.find("."+c+"-next").removeClass("disabled"):(e.find("."+c+"-prev").addClass("disabled"),e.find("."+c+"-next").addClass("disabled"));var d=new Swiper(b,{slidesPerView:a,slidesPerGroup:a,btnPrefix:c});e.find("."+c+"-prev").click(function(){d.swipePrev()});e.find("."+c+"-next").click(function(){d.swipeNext()})};ec.diypkg.showTab=function(b){ec.diypkg.res.tab=parseInt($(b).closest("li").attr("data-idx"));ec.diypkg.render()};ec.diypkg.attr=function(b){var a=$(b).closest("li"),c=a.attr("data-code"),e=a.closest("ul.j-grp").attr("data-gid");b=a.closest("li.j-prd");var d=b.attr("data-pid"),f={};ec.diypkg.data.groupList[e].packageListGrouped[d].forEach(function(a){a.sbomCode==c&&(f=a)});if(!f.sbomCode)return!1;a.siblings().removeClass("selected");a.addClass("selected");a=b.find("a.j-pimg");a.find("img").attr("src",(ec.mediaPath+f.photoPath+"100_100_"+f.photoName).transHtmlAttribute());a.find("p").text(f.sbomName).attr("title",f.sbomName.transHtmlAttribute());b=b.find("div.price");b.find("span").text("\x26yen;"+f.packagePrice);b.find("s").text("\x26yen;"+f.price);f.packagePrice==f.price?b.find("s").hide():b.find("s").show();a=b.find("input.j-input");b=parseFloat(a.attr("data-price"));a.attr("data-code",c).attr("data-price",f.packagePrice);a=a.attr("data-id");ec.diypkg.res.chked[a]&&(ec.diypkg.res.chked[a]=c,ec.diypkg.res.price=ec.diypkg.res.price-b+f.packagePrice,ec.diypkg.res.price=parseFloat(ec.diypkg.res.price.toFixed(2)),$("#product-recommend-all .product-recommend-operation .chk-price span").text("\x26yen;"+ec.diypkg.res.price))};ec.diypkg.hide=function(){$("#product-recommend-all").html("").hide()};ec.diypkg.init=function(){ec.diypkg.hideAll();ec.diypkg.render()||ec.multiComb.init()};ec.diypkg.hideAll=function(){$("#product-recommend-all").html("").hide();$("#product-recommend-all2").closest(".layout").hide()};ec.pkg("ec.multiComb");ec.multiComb.init=function(){var b=ec.product.getSku(),a=$("#product-recommend-all2").closest(".layout"),c=$("#comb-list-"+b);c&&0<c.length&&4!=ec.product.productType?($("#product-recommend-all2 .product-package-tab").hide(),$("#product-recommend-all2 .product-recommend-con").hide(),$("#comb-list-"+b).show(),$("div[id^\x3d'comb-pro-"+b+"-0'] ").show(),a.show(),$(".goods-rolling .swiper-container").each(function(){ec.diypkg.initSwiper("#"+$(this).attr("id"),5,"swiper-button")})):a.hide();var e=0;$("div[id^\x3d'comb-list-'] input").unbind("click");$("div[id^\x3d'comb-list-"+b+"-'] input").bind("click",function(){$(this).attr("disabled","disabled");if(0==e){0==$(this).hasClass("protect")?($(this).addClass("protect"),$(this).attr("checked",!0)):($(this).removeClass("protect"),$(this).attr("checked",!1));var a=$(this).attr("data-index"),c=$("#comb-count-"+b+"-"+a).html(),g=parseFloat($("#comb-price-"+b+"-"+a).html());e=1;1==$(this).attr("checked")?(price=g+parseFloat($(this).attr("data-price")),c++):(price=g-parseFloat($(this).attr("data-price")),c--);$("#comb-price-"+b+"-"+a).html(price.toFixed(2));$("#comb-count-"+b+"-"+a).html(c);e=0;$(this).attr("disabled","")}})};ec.product.showPosters=function(){var b=ec.product.getSkuInfo(ec.product.getSku()),a=function(a,b,c){c=c?ec.util.parseDate(c):new Date;a=a?ec.util.parseDate(a):new Date(0);b=b?ec.util.parseDate(b):new Date(c.getTime()+1E8);return a<=c&&b>c},c=[];"undefined"===typeof prdPosters&&(prdPosters={prd:[],sbom:[]});var e=_.find(prdPosters.sbom,function(c){return c.sbomCode===b.code&&a(c.startDate,c.endDate)});e||(e=_.find(prdPosters.prd,function(b){return a(b.startDate,b.endDate)}));e&&c.push('\x3cli\x3e\x3ca href\x3d"javascript:;"\x3e\x3cimg src\x3d"'+ec.mediaPath+e.path+"78_78_"+e.name+'" alt\x3d"'+b.name+'"/\x3e\x3c/a\x3e\x3c/li\x3e');c.push('\x3cli\x3e\x3ca href\x3d"javascript:;"\x3e\x3cimg src\x3d"'+ec.mediaPath+b.photoPath+"78_78_"+b.photoName+'" alt\x3d"'+b.name+'"/\x3e\x3c/a\x3e\x3c/li\x3e');if(b.groupPhotoList)for(e=0;e<b.groupPhotoList.length;e++){var d=b.groupPhotoList[e];c.push('\x3cli\x3e\x3ca href\x3d"javascript:;"\x3e\x3cimg src\x3d"'+ec.mediaPath+d.path+"/78_78_"+d.name+'"  alt\x3d"'+b.name+'"/\x3e\x3c/a\x3e\x3c/li\x3e')}c=$(c.join(""));c.find("img").mouseover(_proGallerysMouseOver);$("#pro-gallerys").empty().html(c);$("#pro-gallerys li:first").addClass("current");var f=$("#pro-gallerys li:first img").attr("src");$("#product-img").attr("href",f.replace("78_78","800_800")).find("img").attr("src",f.replace("78_78","428_428"));$("#product-img").CloudZoom();setTimeout(function(){var a=new Image;a.onload=function(){$("#pic-container .cloud-zoom-loading").remove()};a.src=f.replace("78_78","800_800")},1E3);ec.product.imgSlider.reset()};ec.product.showPrice=function(b){var a=ec.product.getSkuInfo(ec.product.getSku()),c=parseFloat(a.price),e=parseFloat(a.originPrice);b&&1>b.isSurePrice&&(c=0);$("#pro-price-label").removeClass("type").addClass("f24");$("#pro-price-label-deposit").hide();$("#pro-price-deposit").text("").hide();$("#pro-price-label-amount").hide();$("#pro-price-amount").text("").hide();$("#pro-price-hide").val(c);$("#pro-price-old").text("").hide();1>c||2==a.priceMode?($("#pro-price-label").text("\u6682\u65e0\u62a5\u4ef7").show(),$("#pro-price").text("").hide()):($("#pro-price-label").hide(),$("#pro-price").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+c.toFixed(2)).show(),e!=c&&($("#pro-price-old").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+e.toFixed(2)).show(),$("#pro-price-label").removeClass("f24").addClass("type").text("\u62a2\u8d2d\u4ef7").show()));b?(b.depositPrice&&($("#pro-price-old").hide(),$("#pro-price-label-deposit").show(),$("#pro-price-deposit").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+parseFloat(b.depositPrice).toFixed(2)).show()),b.amountPrice&&($("#pro-price-label-amount").text("\u53ef\u62b5").show(),$("#pro-price-amount").html("\x3cem\x3e\x26yen;\x3c/em\x3e"+parseFloat(b.amountPrice).toFixed(2)).show())):$("#buyProcessIDD").hide();ec.product.refreshStyle()};$(function(){function b(){return{number:$("#pro-quantity").val(),SKUCode:$("#pro-sku-code").val(),packagecode:$("#packageCode").val(),packageSKUCode:$("#packageListCode").val(),click:1}}$("#pro-operation a.product-button01").live("click",function(){var a=b();a.buttonName=$(this).find("span").text();a.location=1;ec.dapClick("300020401",a)});$("#pro-operation a.product-button02").live("click",function(){var a=b();a.buttonName=$(this).find("span").text();0<$("#pro-operation").attr("data-gift")&&(a.giftbuy=1);ec.dapClick("300020501",a)});$("#layoutRelative a.product-button02").live("click",function(){var a=b();a.buttonName=$(this).text();a.location=2;ec.dapClick("300020401",a)});var a={"pro-tab-feature":"\u8be6\u60c5","pro-tab-parameter":"\u53c2\u6570","pro-tab-package-service":"\u5305\u88c5","pro-tab-evaluate":"\u8bc4\u4ef7"};$("#layoutRelative p a:visible").each(function(b,e){$(e).click(function(){ec.dapClick("300021001",{productId:ec.product.id,index:b,name:a[$(e).attr("id")],click:1})})})});$(function(){if(ec.product.seCode&&"VMALL-HUAWEIDEVICE"!==ec.product.seCode){var b=ec.product.seCode;$.ajax({url:"/queryCarrierCert.json",type:"post",data:{jsonParamString:JSON.stringify([b])},dataType:"json",success:function(a){a&&a.carrierCertList&&0<a.carrierCertList.length&&(a=_.filter(a.carrierCertList,function(a){var b;if(b=a.certStatus){b=a.startTime;a=a.endTime;var c=void 0,c=c?ec.util.parseDate(c):new Date;b=b?ec.util.parseDate(b):new Date(0);a=a?ec.util.parseDate(a):new Date(c.getTime()+1E8);b=b<=c&&a>c}return b}),a=_.sortBy(a,"orderNum"),0<a.length&&(ec.Cache.set("carrierCert."+b,a),$("#j-carrierCertBtn").show()))}})}});ec.product.showCarrierCert=function(b){b=b||ec.product.seCode;if(b=ec.Cache.contains("carrierCert."+b)){var a="";b.forEach(function(b){a+='\x3cp\x3e\x3cimg width\x3d"100%" src\x3d"'+ec.mediaPath+b.certFilePath+'" name\x3d"'+b.certName+'"\x3e\x3c/p\x3e'});a='\x3cdiv style\x3d"padding-right:7px; text-align: center; height: 412px; overflow: auto; margin-top: 8px;"\x3e'+a+"\x3c/div\x3e";(new ec.box(a,{boxid:"jb-showCarrierCert",boxclass:"ol_box_4",title:"\u5546\u5bb6\u8d44\u8d28\u8bc1\u7167",width:700,height:432,remember:!1,showButton:!1})).open()}else alert("\u6682\u65e0\u6570\u636e")};ec.pkg("ec.remark.common");ec.load("ajax");ec.load("ec.box",{loadType:"lazy"});var _remarkPrivate={showError:function(text,skuCode){$("#error-area-"+skuCode).show();$("#error-area-"+skuCode).find("label").empty().html(text)},hideError:function(skuCode){$("#error-area-"+skuCode).hide()},getSelectedLen:function(skuCode){return $("#tags-"+skuCode).find(".selected").length},getSelectedDiyLen:function(skuCode){return $("#tags-"+skuCode).find(".tag-li-diy-item.selected").length},checkTagNameRepeat:function(skuCode,tagName){var allTagNames=$("#tags-"+skuCode).find("li .impress").find("a");var allTagNameArray=[];for(var i=0;i<allTagNames.length;i++){var tag=allTagNames[i].text;if(tag!="自定义"){allTagNameArray.push(tag)}}return $.inArray(tagName,allTagNameArray)},check:function(skuCode){this.hideError(skuCode);var val=ec.util.trim($("#tag-input-"+skuCode).val());if(val.length==0){this.showError("输入不能为空",skuCode);return false}if(/\s/.test(val)){this.showError("标签中不可以有空格",skuCode);return false}if(val.len()>=13){this.showError("标签不可以超过6个汉字",skuCode);return false}return true}};ec.remark.common.checkSeletedTagNum=function(el,skuCode,opType){var selectedDiyLen=_remarkPrivate.getSelectedDiyLen(skuCode);var selectedLen=_remarkPrivate.getSelectedLen(skuCode);if(selectedDiyLen>=4&&!$(el).hasClass("selected")){var flag=true;switch(opType){case"tagOnclick":if(selectedDiyLen==4&&$(el).hasClass("tag-li-diy-item")){flag=false}else if(selectedLen<5){flag=true}else{flag=false}break;case"addTag":flag=false;break;case"diyOnclick":if($(el).hasClass("tag-li-diy-item")){flag=false}break;default:flag=false;break}if(!flag){if(selectedLen>=5){_remarkPrivate.showError("最多贴5个标签，你已经贴满了",skuCode)}else{_remarkPrivate.showError("最多贴4个自定义标签，你已经贴满了",skuCode)}}return flag}if(selectedLen>=5&&!$(el).hasClass("selected")){_remarkPrivate.showError("最多贴5个标签，你已经贴满了",skuCode);return false}return true};ec.remark.common.tagOnclick=function(el){var skuCode=$(el).parent().attr("data-sku");if(ec.remark.common.checkSeletedTagNum(el,skuCode,"tagOnclick")){_remarkPrivate.hideError(skuCode);$(el).toggleClass("selected");var ch=$(el).find("input")[0];if(ch){if(ch.checked){ch.checked=false}else{ch.checked=true}}}};ec.remark.common.diyOnclick=function(el){var skuCode=$(el).parent().parent().parent().attr("data-sku");if(ec.remark.common.checkSeletedTagNum(el,skuCode,"diyOnclick")){$("#diy-area-"+skuCode).addClass("current")}};ec.remark.common.addTag=function(e1,skuCode){if(ec.remark.common.checkSeletedTagNum(e1,skuCode,"addTag")&&_remarkPrivate.check(skuCode)){var tagContent=ec.util.trim($("#tag-input-"+skuCode).val());var checkResult=_remarkPrivate.checkTagNameRepeat(skuCode,tagContent);if(checkResult>=0){_remarkPrivate.showError("您输入的标签名称已经存在",skuCode);return}else{_remarkPrivate.hideError()}var html=[];html.push('<li class="ce-post-impress-item tag-li-diy-item selected" onclick="ec.remark.common.tagOnclick(this);">');html.push('<div class="impress">');html.push('<input type="checkbox" checked="true" name="diyTags-'+skuCode+'" style="visibility: hidden; position: absolute;" value="'+tagContent+'" id="diyTags">');html.push('<a href="javascript:;" id="diyTags-a-'+skuCode+'">'+ec.autoEncodeAttr(tagContent)+"</a><s></s></div></li>");$("#diy-area-"+skuCode).before(html.join(""));$("#tag-input-"+skuCode).val("");if(_remarkPrivate.getSelectedLen()>=5){$("#diy-area-"+skuCode).removeClass("current")}}};ec.remark.common.login=function(call){ec.account.afterLogin(function(){if(call){call()}})};ec.remark.common.showErrorMsg=function(msg,buttonType){if(!msg||$.trim(msg)==""){msg=""}var buttonInfo='<a href="javascript:;" class="box-cancel"><span>确定</span></a>';switch(buttonType){case 1:buttonInfo='<a href="javascript:;" class="box-cancel"><span>确定</span></a>';break;case 2:buttonInfo='<a href="/member/prdRemarkView?t='+(new Date).getTime()+'" class="box-cancel" ><span>我不改了</span></a>'+'<a href="'+serviceRobotim+'" target="_blank" class="box-ok"><span>联系客服</span></a>';break;default:buttonInfo='<a href="javascript:;" class="box-cancel"><span>确定</span></a>';break}var html=[];html.push('<div class="box-content" style="height: auto;">                                                         ');html.push('\t<div class="box-prompt01-error">                                                                       ');html.push('\t\t<div class="h">                                                                                    ');html.push("\t\t\t<i></i>                                                                                        ");html.push("\t\t</div>                                                                                             ");html.push('\t\t<div class="b">                                                                                    ');html.push('\t\t\t<p id="comments-msg-'+buttonType+'">'+msg+"</p>                                            ");html.push("\t\t</div>                                                                                             ");html.push("\t</div>                                                                                                 ");html.push('\t<div class="box-button">                                                                               ');html.push(buttonInfo);html.push("\t</div>                                                                                                 ");html.push("</div>                                                                                                  ");var box=new ec.box(html.join(""),{boxid:"box_remark_tips_common_message",boxclass:"ol_box_4",showButton:false,showTitle:true,showCancel:false,showOk:false,width:600,onclose:function(dom){},onopen:function(box){},onok:function(dom){}});box.open()};ec.remark.common.privewImg=function(view){var html=[];html.push('\t\t<div class="img-big none">                       ');if("view"!=view){html.push('        <a href="javascript:;" class="comment-img-delete">删除</a>')}html.push('\t\t\t<img src="">                                 ');html.push('\t\t\t<div class="cursor-prev" style="cursor:url('+imagePath+'/echannel/icon/arrow-left.cur),auto;"></div>              ');html.push('\t\t\t<div class="cursor-small" style="cursor:url('+imagePath+'/echannel/icon/zoom-out.cur),auto;"></div>             ');html.push('\t\t\t<div class="cursor-next" style="cursor:url('+imagePath+'/echannel/icon/arrow-right.cur),auto;"></div>              ');html.push("\t\t</div>                                           ");return html.join("")};ec.remark.common.privewMin=function(){return'style="cursor:url('+imagePath+'/echannel/icon/zoom-in.cur),auto;"'};ec.remark.common.check=function(skuCode,count){var canSubmit=false;var skuCodeObj=$("#tags-"+skuCode);var score=$.trim($("#score-"+skuCode).attr("data-score"));var content=$.trim($("#content-"+skuCode).val());if(500<content.length){$("#commodity-content-msg-"+skuCode).html("评论最多不能超过500个字哦").css("display","block");return false}if(!ec.remark.common.checkIllegalChar(content)){$("#commodity-content-msg-"+skuCode).html("您提交的评论包含[]><\"&#'等特殊字符,请修改").css("display","block");return false}count.push(skuCode);return true};ec.remark.common.checkIllegalChar=function(value){var pattern=/(\[|\]|>|<|\\|"|&|#|')/;if(value!=""&&value!=null&&pattern.test(value)){return false}return true};ec.pkg("ec.product");ec.load("ajax");ec.load("ec.dh");var _defaultAddress=["广东","深圳","龙岗区"];var _defaultTimeOut=1e4;var address=[];var tree_url=domainShoppingConfig+"/data/region/tree/{id}.json";var children_url=domainShoppingConfig+"/data/region/children/{id}.json";var addressInfoMap={};var commonAddress={};var _tempAddress=[];var _tempAddressIds=[];var addressConfig=null;var cache={},ajaxer;var skuAddress;var ipAddress=[];var ipAddressCookie=[];var sbomCode=null;ec.product.parseUrl=function(url,id){return url.replace(/{id}/g,id)};ec.product.processAddress=function(skuTmp){_tempAddressIds=[];_tempAddress=[];skuAddress=skuTmp;var provice=address[0];var proviceInfo=[];proviceInfo.push("<dt>选择新地址</dt>");if(provice!=null&&provice!=""){proviceInfo.push('<dd id="provice" level-value="1" data-value="" class="current">'+provice+"</dd>")}else{proviceInfo.push('<dd id="provice" level-value="1" data-value="">请选择</dd>')}proviceInfo.push('<dd id="city" level-value="2" data-value="">请选择</dd>');proviceInfo.push('<dd id="district" level-value="3" data-value="">请选择</dd>');$("#provice_info").html(proviceInfo.join(""));$("#provice_info").find("dd").bind("click",ec.product.againSelectAddress);ec.product.queryData(ec.product.parseUrl(tree_url,"0"),true,1,ec.product.queryProvince)};ec.product.againSelectAddress=function(){var id=$(this).attr("data-value");var addrType=parseInt($(this).attr("level-value"));if((id==null||id=="")&&addrType!=1){return}$(".address-new").find("dd").removeClass();switch(addrType){case 1:$("#provice").addClass("current");$("#city").html("请选择");break;case 2:$("#provice").removeClass("current");$("#city").addClass("current");break;case 3:$("#provice").removeClass("current");$("#city").removeClass("current");$("#district").addClass("current");break}if(addrType==1){ec.product.queryData(ec.product.parseUrl(tree_url,"0"),true,1,ec.product.queryProvince)}else{var parentId=parseInt(id);ec.product.queryData(ec.product.parseUrl(children_url,parentId),true,addrType,ec.product.queryProvince)}};ec.product.selectedAddress=function(){var districtId=$(this).attr("districtId");var addrId=$(this).attr("id");var amount=skuAddress.price;ec.util.cookie.set("selectedAddress",$(this).attr("provinceId")+"|"+$(this).attr("cityId")+"|"+districtId,{expires:30,domain:"vmall.com"});ec.util.cookie.set("shopAddressID",addrId,{expires:30,domain:"vmall.com"});ec.product.showAddress(commonAddress[addrId]);ec.prescription.queryPreDeliveryAndArrival(ec.product.processPreDeliveryAndArrivalTime,districtId,amount,null,sbomCode)};ec.product.changeAddress=function(){var id=$(this).attr("id");_tempAddressIds.push(id);_tempAddress.push($(this).html());var name=ec.product.replaceChar($(this).html());var addrType=parseInt($(this).attr("addrType"));$(".address-new").find("dd").removeClass();switch(addrType){case 1:$("#provice").html(name);$("#city").attr("data-value",id);$("#provice").removeClass("current");$("#city").addClass("current");break;case 2:$("#city").html(name);$("#district").attr("data-value",id);$("#provice").removeClass("current");$("#city").removeClass("current");$("#district").addClass("current");break;case 3:$("#district").html(name);$("#district").attr("data-value",id);$("#provice").removeClass("current");$("#city").removeClass("current");$("#district").addClass("current");$("#address_table").hide();break}if(addrType<3){ec.product.queryData(ec.product.parseUrl(children_url,id),true,addrType+1,ec.product.queryProvince)}else{if(addrType==3&&_tempAddress.length==3&&_tempAddressIds.length==3){address=_tempAddress;ec.product.showAddress(address);ec.prescription.queryPreDeliveryAndArrival(ec.product.processPreDeliveryAndArrivalTime,_tempAddressIds[2],skuAddress.price,null,sbomCode);ec.util.cookie.set("selectedAddress",_tempAddressIds[0]+"|"+_tempAddressIds[1]+"|"+_tempAddressIds[2],{expires:30,domain:"vmall.com"})}}};ec.product.userAddress=function(addressListInfo,addrFlag){var htmlFtl=[],lst=addressListInfo;htmlFtl.push("<dt>常用地址</dt>");commonAddress={};for(var i=0;i<lst.length;i++){var tempCommonAddress=[];var provinceName=lst[i].provinceName;var cityName=lst[i].cityName;var districtName=ec.product.replaceChar(lst[i].districtName);var streetName=lst[i].streetName==null?"":lst[i].streetName;addressInfoMap[lst[i].id]=provinceName+"&nbsp;"+cityName+"&nbsp;"+districtName+streetName+"&nbsp;"+ec.autoEncodeAttr(lst[i].address);var newTitle=addressInfoMap[lst[i].id];htmlFtl.push('<dd title="'+newTitle+'" id="'+lst[i].id+'" provinceId="'+lst[i].province+'" cityId="'+lst[i].city+'" districtId = "'+lst[i].district+'">'+cityName+"&nbsp;"+districtName+"</dd>");tempCommonAddress.push(provinceName);tempCommonAddress.push(cityName);tempCommonAddress.push(lst[i].districtName);commonAddress[lst[i].id]=tempCommonAddress}$("#in_common_use_address").html(htmlFtl.join(""));$("#in_common_use_address").find("dd").bind("click",ec.product.selectedAddress)};ec.product.queryTips=function(addressId,obj){$("#deatilAddress").html(addressInfoMap[addressId]);$("#deatilAddress").css("position","absolute");$("#deatilAddress").css("z-index","9999");$("#deatilAddress").css("top",parseInt(obj.position().top)+obj.innerHeight()+12+"px");$("#deatilAddress").css("display","block");$("#deatilAddress").show()};ec.product.queryProvince=function(addressListInfo,addrType,K){var lst;if(addrType==1){lst=addressListInfo.data[0]}else{lst=addressListInfo.data}var htmlFtl=[];var lstLength=lst.length;htmlFtl.push('<table style="min-height=180px;" width="100%" border="0" cellpadding="0" cellspacing="0">');htmlFtl.push("<tbody>");var position=0;for(var i=0;i<lstLength;i++){if(position==0){htmlFtl.push("<tr>")}var nodeName=ec.product.replaceChar(lst[i].name);nodeName=ec.autoEncodeAttr(nodeName);htmlFtl.push('<td id="'+lst[i].id+'" addrType="'+addrType+'">'+nodeName+"</td>");position=position+1;if(position==4||i==lstLength-1){position=0;htmlFtl.push("</tr>")}}htmlFtl.push("</tbody>");htmlFtl.push("</table>");$("#address_table").css({"min-height":"180px"}).html(htmlFtl.join(""));$("#address_table").find("td").bind("click",ec.product.changeAddress);$("#address_table").show();if(ec.account.isLogin()){ec.addr.list(ec.product.userAddress)}};ec.product.queryData=function(url,usecache,addrType,callback){var json;if(usecache&&(json=cache[url])){return callback(json,addrType)}if(ajaxer){ajaxer.abort()}ajaxer=$.ajax({url:url,dataType:"json",beforeSend:function(xhr){xhr.withCredentials=true},success:function(json){if(usecache)cache[url]=json;callback(json,addrType)},error:function(xhr,status){logger.warn("load data fail.")}})};var isSucTemp=false;ec.product.processExpectDelivery=function(skuTmp){address=[];skuAddress=skuTmp;var passDistrict=true;if(ec.product.status==3){ec.product.hiddenTips();passDistrict=false}if(ec.product.seCode!=ec.product.productSeCode||parseInt(ec.product.productType)!=0){ec.product.hiddenTips();passDistrict=false}var normalButton=skuAddress.buttonMode;if(parseInt(normalButton)!=1&&parseInt(normalButton)!=10){ec.product.hiddenTips();passDistrict=false}if(parseInt(normalButton)==11||parseInt(normalButton)==16){ec.product.hiddenTips();return}if(parseInt(normalButton)==10){var _now=ec.product.getSysDate();var end=ec.product.getSkuInfo(skuAddress.id||ec.product.defaultSku).endTime;var endTime=new Date;if(null==end||""==end){endTime=new Date(2999,1,1,0,0,0)}else{endTime.setTime(ec.util.parseDate(end))}if(_now-endTime>0){ec.product.hiddenTips();passDistrict=false}}if(ec.product.isSupportDisTime=="0"){passDistrict=false}if(!passDistrict){var resultjson=$.parseJSON(ec.product.deliveryArrival.transHtmlAttribute());if(resultjson!=undefined&&resultjson!=""){ec.product.processPreDeliveryAndArrivalTime(resultjson[skuAddress.id],false)}else{ec.prescription.queryPreDeliveryAndArrival(ec.product.processPreDeliveryAndArrivalTime,null,null,null,skuTmp.code)}return}isSucTemp=true;var selectedAddress=ec.util.cookie.get("selectedAddress");if(selectedAddress==null){if(ec.account.isLogin()){ec.product.getUserDefaultAddress()}else{ec.product.parseCookie()}}else{var addressArray=selectedAddress.split("|");if(addressArray.length==3){var distrackId=addressArray[2];ec.product.queryData(ec.product.parseUrl(tree_url,distrackId),true,1,ec.product.getCitydistrict)}}};ec.product.processSupportDisplayDilieryTime=function(sku){sbomCode=sku.code;ec.product.processExpectDelivery(sku)};ec.product.parseCookie=function(){var _ipCookieAddress=ec.util.cookie.get("ipaddress");if(_ipCookieAddress!=null){var _tmpIpAddrArray=_ipCookieAddress.split(",");var _temp=[];for(var i=0;i<3;i++){_temp[i]=_tmpIpAddrArray[i]}ec.product.showAddress(_temp);var amount=skuAddress.price;ec.prescription.queryPreDeliveryAndArrival(ec.product.processPreDeliveryAndArrivalTime,_tmpIpAddrArray[3],amount,"-1",sbomCode)}else{ec.product.getUserAddressByIP(ec.product.addressCall)}};ec.product.getCitydistrict=function(addressListInfo){address=[];var addrsIdArray=addressListInfo.values;var proviceAddrs=addressListInfo.data[0];for(var i=0;i<proviceAddrs.length;i++){var json=proviceAddrs[i];if(json.id==addrsIdArray[0]){address.push(json.name)}}var cityAddrs=addressListInfo.data[1];for(var i=0;i<cityAddrs.length;i++){var json=cityAddrs[i];if(json.id==addrsIdArray[1]){address.push(json.name)}}var districtAddrs=addressListInfo.data[2];for(var i=0;i<districtAddrs.length;i++){var json=districtAddrs[i];if(json.id==addrsIdArray[2]){address.push(json.name)}}var addressId=addrsIdArray[2];if($.trim(addressId)==""){ec.product.hiddenTips();return}ec.product.showAddress(address);var amount=skuAddress.price;var selectedAddress=ec.util.cookie.get("selectedAddress");if(selectedAddress==null){var resultjson=$.parseJSON(ec.product.deliveryArrival.transHtmlAttribute());if(resultjson!=undefined&&resultjson!=""){ec.product.processPreDeliveryAndArrivalTime(resultjson[skuAddress.id],false)}}else{ec.prescription.queryPreDeliveryAndArrival(ec.product.processPreDeliveryAndArrivalTime,addressId,amount,null,sbomCode)}};ec.product.addressCall=function(json){var userAddress=[];ipAddress=[];ipAddressCookie=[];if(json!=null&&json!=undefined&&json.success&&(json.address.province!=null&&json.address.province!="null"&&$.trim(json.address.province)!="")){userAddress.push(json.address.province);ipAddress.push(json.address.province);if(json.address.city=="null"||json.address.city==null||$.trim(json.address.city)==""){userAddress.push(null);ec.product.getAddressId(userAddress,ec.product.queryAddressByName)}else if(json.address.district=="null"||json.address.district==null||$.trim(json.address.district)==""){userAddress.push(json.address.city);ipAddress.push(json.address.city);userAddress.push(null);ec.product.getAddressId(userAddress,ec.product.queryAddressByName)}else{userAddress.push(json.address.city);userAddress.push(json.address.district);address=userAddress;ipAddressCookie[0]=userAddress;ec.product.getAddressId(address,ec.product.setIpCookie)}}else{address=_defaultAddress;ec.product.getAddressId(address,ec.product.getAddressIdCallBack)}};ec.product.queryAddressByName=function(json,callback){var _tempAddress=[];var provinceId=json.provinceId;var cityId=json.cityId;var districtId=json.districtId;if(cityId!=null&&cityId!=""&&(districtId==null||districtId=="")){ec.product.queryData(ec.product.parseUrl(children_url,parseInt(cityId)),true,2,ec.product.queryCitydistrict)}else{ec.product.queryData(ec.product.parseUrl(children_url,parseInt(provinceId)),true,1,ec.product.queryCitydistrict)}};ec.product.queryCitydistrict=function(addressListInfo,addrType){var _address=addressListInfo.data;if(_address==null||$.trim(_address)==""||_address==undefined){address=_defaultAddress;ec.product.getAddressId(_defaultAddress,ec.product.getAddressIdCallBack)}else{var cityId=_address[0].id;ipAddress.push(_address[0].name.transHtmlAttribute());if(parseInt(addrType)==1){ec.product.queryData(ec.product.parseUrl(children_url,parseInt(cityId)),true,2,ec.product.queryCitydistrict)}else{address=ipAddress;ipAddressCookie.push(ipAddress);ec.product.getAddressId(ipAddress,ec.product.setIpCookie)}}};ec.product.saveIPAddressToCookie=function(ipAddressCookie){ec.util.cookie.set("ipaddress",ipAddressCookie,{expires:1/12,domain:"vmall.com"})};ec.product.setIpCookie=function(json){var addressId=json.districtId;ipAddressCookie.push(addressId);ec.product.saveIPAddressToCookie(ipAddressCookie);ec.product.getAddressIdCallBack(json)};ec.product.getUserDefaultAddress=function(){var defaulUserAddress=[];$.ajax({type:"get",url:domainShoppingConfig+"/address/getDefault.json?t="+(new Date).getTime(),dataType:"json",timeout:_defaultTimeOut,async:false,beforeSend:function(xhr){xhr.withCredentials=true},success:function(json){if(!json.success||json.shoppingConfg==null||json.shoppingConfg==""){ec.product.parseCookie();return}ec.util.cookie.set("sc_p",json.pubkey);var _tempDefaulUserAddress=ec.lang.json.parse(json);_tempDefaulUserAddress=json.shoppingConfg;defaulUserAddress.push(_tempDefaulUserAddress.provinceName);defaulUserAddress.push(_tempDefaulUserAddress.cityName);defaulUserAddress.push(_tempDefaulUserAddress.districtName);if(defaulUserAddress==null||defaulUserAddress.length==0){ec.product.parseCookie()}else{address=defaulUserAddress;ec.product.getAddressId(address,ec.product.getAddressIdCallBack)}},error:function(){address=_defaultAddress;ec.product.getAddressId(_defaultAddress,ec.product.getAddressIdCallBack)}})};ec.product.showSupportDisplayDilieryTime=function(info,isException){var tips="";if(!isException){if(info.length){var effectivenessTime=info.deliveryTime;var effectivenessTimeAndWeek=ec.product.getEffectivenessTime(effectivenessTime);tips="23:00前完成支付，预计"+effectivenessTimeAndWeek+"送达"}}$("#pro-predict").find("span:first").html(tips);ec.product.showTips();if(isException){$("#order_confirm_tips").hide()}};ec.product.getUserAddressByIP=function(callBack){$.ajax({url:"/getLocation.json",type:"get",dataType:"json",timeout:_defaultTimeOut,success:function(json){if(json.success){callBack(json)}else{address=_defaultAddress;ec.product.getAddressId(address,ec.product.getAddressIdCallBack)}},error:function(){address=_defaultAddress;ec.product.getAddressId(address,ec.product.getAddressIdCallBack)}})};ec.product.getAddressIdCallBack=function(json){var addressId=json.districtId;if($.trim(addressId)==""){ec.product.hiddenTips();return}ec.product.showAddress(address);var amount=skuAddress.price;ec.prescription.queryPreDeliveryAndArrival(ec.product.processPreDeliveryAndArrivalTime,addressId,amount,null,sbomCode)};ec.product.getAddressId=function(address,callback){$.ajax({url:domainShoppingConfig+"/matchRegion.json",type:"get",dataType:"json",data:{provinceName:address[0],cityName:address[1],districtName:address[2]},jsonpCallback:"addressCallback",timeout:_defaultTimeOut,beforeSend:function(xhr){xhr.withCredentials=true},success:function(json){if(json.success){callback(json)}else{if(address!==_defaultAddress){address=_defaultAddress;ec.product.getAddressId(_defaultAddress,ec.product.getAddressIdCallBack)}}},error:function(){if(address!==_defaultAddress){address=_defaultAddress;ec.product.getAddressId(_defaultAddress,ec.product.getAddressIdCallBack)}}})};ec.product.showAddress=function(address){$("#address").find("a").html(address[0]+"&nbsp;&gt;&nbsp;"+address[1]+"&nbsp;&gt;&nbsp;"+ec.product.replaceChar(address[2]))};ec.product.hiddenTips=function(){$("#product-pulldown1").addClass("product-description");$("#pro-predict").hide();$("#notesID").hide()};ec.product.showTips=function(){$("#product-pulldown1").removeClass("product-description");$("#pro-predict").show();$("#notesID").show()};ec.product.showExpectTime=function(flag){$("#product-pulldown1").removeClass("product-description");if(flag==1){$("#address").parent().hide()}else{if($("#address").find("a").html().length>1){$("#address").parent().show()}else{$("#address").parent().hide()}}$("#pro-predict").show()};ec.product.getEffectivenessTime=function(effectivenessTime,deadlineTime){var effectivenessTimeAndWeek;var _now=ec.product.getSysDate();var nowHours=_now.getHours();var date=_now.getTime();var newEffectiveTime=new Date;newEffectiveTime.setTime(date);deadlineTime=deadlineTime.substring(0,2);if(nowHours>=0&&nowHours<deadlineTime){newEffectiveTime.setHours(parseInt(deadlineTime)+effectivenessTime)}else{newEffectiveTime.setHours(parseInt(deadlineTime)+effectivenessTime)}var result=parseInt(newEffectiveTime.getMonth())+1+"月"+newEffectiveTime.getDate()+"日（"+ec.product.getWeekByTime(newEffectiveTime)+"）";return result};ec.product.getWeekByTime=function(effectivenessTime){var day=effectivenessTime.getDay();var week="";switch(day){case 0:week="周日";break;case 1:week="周一";break;case 2:week="周二";break;case 3:week="周三";break;case 4:week="周四";break;case 5:week="周五";break;case 6:week="周六";break}var now=new Date;var dateTemp=now.diff(effectivenessTime);if(dateTemp==0){week="今天"}if(dateTemp==1){week="明天"}return week};Date.prototype.diff=function(date){return Math.floor((date.getTime()-new Date((new Date).setHours(0,0,0,0)).getTime())/(24*60*60*1e3))};ec.product.replaceChar=function(srcChar){if(srcChar!=null&&srcChar!=""&&srcChar=="-"){return"其它地区"}else{return srcChar}};ec.product.processPreDeliveryAndArrivalTime=function(json,isException){var tempWT=false;var tips=null,flag=0;var mode=skuAddress.buttonMode;var haveQuantity=ec.product.inventory.haveInventory(skuAddress.id);if(!isException){if(json&&json.success){var info=json.info;if(info.shippingDate&&info.shippingDate.length>0){if(mode==1&&!haveQuantity){tempWT=true}else{flag=1;tips=info.shippingDate;$(".product-address-prompt").find("em").eq(0).show();$("#expectTimeDesc").html("订单按照支付顺序发货，预计发货时间在支付全部完成前可能变更；预计发货时间根据商品库存信息计算得出，受诸多因素影响可能会产生偏差，我们会为您积极备货。");$("#notesDescription").hide().html("")}}else if(info.estimatedArrivalTime!=null&&info.estimatedArrivalTime!=""){flag=2;var timeTemp="";var toDate="";var estimatedArrivalTime=info.estimatedArrivalTime;if(json.beforeAndAfterFlag=="1"){timeTemp=estimatedArrivalTime.earlyArrivalTime;toDate="今天"}else{timeTemp=estimatedArrivalTime.lateArrivalTime;toDate="明天"}var effectivenessTimeAndWeek=ec.product.getEffectivenessTime(timeTemp,estimatedArrivalTime.deadlineTime);tips="<span class='red'>现货</span>，"+toDate+estimatedArrivalTime.deadlineTime+"前付款，"+"预计"+effectivenessTimeAndWeek+"送达";$(".product-address-prompt").find("em").eq(0).show();$("#expectTimeDesc").html("”预计送达时间”功能处于试运营，可能会略有偏差，最终以实际到货时间为准，如有疑问请您联系商城客服。感谢您对华为商城的支持和理解！");$("#notesDescription").show().html(estimatedArrivalTime.notes)}if(tips!=null){$("#pro-predict").find("span:first").html(tips);ec.product.showTips();ec.product.showExpectTime(flag)}else{if(tempWT){ec.product.hiddenTips()}if(info.arrivalTimeStatus=="1"){ec.product.hiddenTips()}if(info.arrivalTimeStatus=="2"){if(isSucTemp){$("#address").parent().show();ec.product.showTips();$("#pro-predict").find("span:first").html("<span class='red'>现货</span>");$(".product-address-prompt").find("em").eq(0).hide();$("#notesID").hide()}else{ec.product.hiddenTips()}}}ec.product.deliveryArrival="";var getSku=ec.product.getSkuInfo(ec.product.getSku());if((info.shippingDate==null||info.shippingDate=="")&&info.estimatedArrivalTime!=null&&info.estimatedArrivalTime!=""){if(ec.product.productType==4||parseInt(getSku.buttonMode)==8){ec.product.hiddenTips()}}}else{ec.product.hiddenTips()}}};ec.pkg("ec.product.gift");ec.product.gift={proGiftChosenImgSrc:"",proGiftChosenImgAlt:"",proGiftGallerys:[],giftTrees:[],data:"",giftArrays:{},defaultGift:[],mainSkuGiftMap:{},mainSkuGiftKeyMap:{},defaultGiftMap:{},finalMainSbomGiftMap:{},packageGiftMap:{},tempMainSbomGiftMap:{},isChange:"true",picMediaServer:ec.mediaPath,sku:"",middleImgSize:"55_55_",navImgSize:"55_55_",ITEM_WIDTH:52,isChange:false,popupHtml:function(){var box=[],html=[],cnt=0,cntOne=0;var mainSKu="";var mainSbom=ec.product.getSku();defaultGift=this.defaultGiftMap[mainSbom];multiGiftVO=this.mainSkuGiftMap[mainSbom];multiGiftVOKeys=this.mainSkuGiftKeyMap[mainSbom];finalGift=this.finalMainSbomGiftMap[mainSbom]||{};giftSize=multiGiftVOKeys.length;var giftArrs=[],giftKeyArrs=[];for(var i=0;i<giftSize;i++){var gift=multiGiftVO[multiGiftVOKeys[i]];if(multiGiftVOKeys[i].indexOf("_")<0){if(i>0){html.push(this.renderSingleGift(giftKeyArrs,giftArrs));giftArrs=[];giftKeyArrs=[]}giftArrs.push(gift);giftKeyArrs.push(multiGiftVOKeys[i])}if(multiGiftVOKeys[i].indexOf("_")>0&&i>0){giftArrs.push(gift);giftKeyArrs.push(multiGiftVOKeys[i])}if(i==giftSize-1){html.push(this.renderSingleGift(giftKeyArrs,giftArrs));giftArrs=[];giftKeyArrs=[]}}box.push(html.join(" "));return box.join(" ")},renderSingleGift:function(giftKeyArrs,giftArrs){var len=giftArrs.length;defaultGift=giftArrs[0];finalGift=this.finalMainSbomGiftMap[this.sku];choseGift=finalGift[giftKeyArrs[0]];if(giftKeyArrs.length!=giftArrs.length){}html=[];if(choseGift!=null&&choseGift!=""){html.push('<div class="product-partscolor-layer">');html.push('<div class="product-partscolor-detail clearfix"> ');html.push('<a id="gift-detail-'+giftKeyArrs[0]+'"   href="/product/'+choseGift.giftId+".html#"+choseGift.giftSkuId+'" target="_blank">');html.push('<img class="product-partscolor-detailimg" src="'+ec.mediaPath+choseGift.photoPath+this.middleImgSize+choseGift.photoName+'">');html.push("</a>");html.push('<div class="product-partscolor-list"> ');html.push('<h2 id="gift-detail-name'+giftKeyArrs[0]+'">'+choseGift.giftName+"</h2>");html.push('<ul class="clearfix">');for(var i=0;i<len;i++){if(choseGift.giftSkuId==giftArrs[i].giftSkuId){html.push('<li class="selected h">')}else{html.push('<li class="h">')}html.push('<a href="javascript:;" key="'+giftKeyArrs[i]+'" defaultGiftKey="'+giftKeyArrs[0]+'" title="'+giftArrs[i].giftAttrVal+'">');html.push('<img src="'+ec.mediaPath+giftArrs[i].photoPath+this.navImgSize+giftArrs[i].photoName+'">');html.push("<p><span>"+giftArrs[i].giftAttrVal+"</span></p>");html.push('<input name= "box-value" type="hidden"  choseGiftKey="'+giftKeyArrs[i]+'" defaultGiftKey= "'+giftKeyArrs[0]+'"/>');html.push("</a>");html.push("</li>")}html.push("</ul>");html.push("</div>");html.push("</div> ");html.push("</div> ")}return html.join(" ")},ftl:function(mainSku){this.sku=ec.product.getSku();var ftl=[];var defaultGift=this.defaultGiftMap[mainSku];var multiGiftVO=this.mainSkuGiftMap[mainSku];var finalGift=this.finalMainSbomGiftMap[mainSku]||{};for(var i=0;i<defaultGift.length;i++){var gift=multiGiftVO[defaultGift[i]];if(gift){finalGift[gift.giftId]=gift;ftl.push('<a id="gift-'+gift.giftId+'"  href="/product/'+gift.giftId+".html#"+gift.giftSkuId+'" target="_blank" title="'+gift.giftName+'">');ftl.push('<img src="'+ec.mediaPath+gift.photoPath+this.navImgSize+gift.photoName+'" alt="'+gift.giftName+'"></a>')}}this.finalMainSbomGiftMap[mainSku]=finalGift;$("#pro-gift-list-detail").html(this.popupHtml());return ftl.join("")},init:function(mainSkuId,json){if(!json&&!mainSkuId){return}var multiGiftVO={};var multiGiftVOKeys=[];var defaultGift=[];this.giftArrays=json;var giftId=[];var index=0,indexForHeight=0;for(var i=0;i<json.length;i++){if(json[i].displayType==1){var gift=multiGiftVO[json[i].giftId];if(!gift){defaultGift.push(json[i].giftId);multiGiftVO[json[i].giftId]=json[i];multiGiftVOKeys.push(json[i].giftId);++indexForHeight}else{multiGiftVO[json[i].giftId+"_"+index]=json[i];multiGiftVOKeys.push(json[i].giftId+"_"+index);index++}}}this.mainSkuGiftMap[mainSkuId]=multiGiftVO;this.mainSkuGiftKeyMap[mainSkuId]=multiGiftVOKeys;this.defaultGiftMap[mainSkuId]=defaultGift},cloneObj:function(obj){var str,newobj=obj.constructor===Array?[]:{};if(typeof obj!=="object"){return}else if(window.JSON){str=JSON.stringify(obj),newobj=JSON.parse(str)}else{for(var i in obj){newobj[i]=typeof obj[i]==="object"?cloneObj(obj[i]):obj[i]}}return newobj},getGiftsSize:function(){var mainSbom=ec.product.getSku(),countGiftForBoxHeigth=0;multiGiftVOKeys=this.mainSkuGiftKeyMap[mainSbom];giftSize=multiGiftVOKeys.length;for(var i=0;i<giftSize;i++){if(multiGiftVOKeys[i].indexOf("_")<0){++countGiftForBoxHeigth}}return countGiftForBoxHeigth},showGiftPackageView:function(dom,flag){if($(dom).parent().parent().hasClass("selected")){if($("#giftPackageList").hasClass("hide")&&$("#giftPackageList").html()!=""&&flag){$("#giftPackageList").removeClass("hide");$(dom).parent().parent().addClass("click");if($("#product-operation").css("display")!="none"){$("#minButtom").html($("#pro-operation").html())}$("#minButtom").find("a").addClass("product-package-mini-btn");$("#minButtom").find(".product-time").remove();$("#minButtom").find(".product-button-tips").remove();$("#minButtom").find(".product-button-priority").remove();return}}var giftPackListHtml=[];var giftPackListLiHtml=[];var sku=ec.product.getSku();var skuInfo=ec.product.getSkuInfo(sku);var giftList_l=skuInfo.giftList;var giftList=[];for(var i=0;i<giftList_l.length;i++){if(giftList_l[i].displayType==2){giftList.push(giftList_l[i])}}var type="gift";if(giftList!=null&&giftList.length>0){giftPackListHtml.push('<div class="product-recommend product-package-mini">');giftPackListHtml.push('<div class="product-recommend-con clearfix">');giftPackListHtml.push('<div class="product-recommend-main">');giftPackListHtml.push('<div class="product-recommend-thumbs">');giftPackListHtml.push('<ul class="clearfix">');giftPackListHtml.push('<li> <a sku-id="'+skuInfo.id+'"> <img src="'+ec.mediaPath+skuInfo.photoPath+"100_100_"+skuInfo.photoName+'">');giftPackListHtml.push('<p title="'+skuInfo.name+'">'+skuInfo.name+"</p>");giftPackListHtml.push("</a></li></ul></div></div>");giftPackListHtml.push('<div class="goods-rolling product-recommend-detail">');giftPackListHtml.push('<div id="goodsRecommend-recommend-gift" class="product-recommend-thumbs">');giftPackListHtml.push('<div id="btn-prev-gift" class="grid-btn btn-prev disabled"><span></span></div>');giftPackListHtml.push('<div id="btn-next-gift" class="grid-btn btn-next"><span></span></div>');giftPackListHtml.push('<ul class=" swiper-wrapper clearfix" style="width: 1000px;">');for(var i=0;i<giftList.length;i++){if(giftList[i].displayType==2){giftPackListLiHtml.push('<li class="swiper-slide" attr-packageSkuCode="'+giftList[i].giftSkuCode+'"><a href="/product/'+giftList[i].giftId+".html#"+giftList[i].giftSkuId+'" target="_blank"><img src="'+ec.mediaPath+giftList[i].photoPath+"100_100_"+giftList[i].photoName+'">');giftPackListLiHtml.push('<p title="'+giftList[i].giftName+'">'+giftList[i].giftName+"</p></a>");giftPackListLiHtml.push('<dl class="color clearfix">');giftPackListLiHtml.push('<dd><a href="javascript:;" onclick="ec.product.packageChangeColor(this,\''+type+'\')" attr-name="'+giftList[i].giftName+'"interest-skuid="'+giftList[i].giftSkuId+'" attr-imgSrc="'+ec.mediaPath+giftList[i].photoPath+"100_100_"+giftList[i].photoName+'" attr-prdId="'+giftList[i].giftId+'" attr-packageskuCode="'+giftList[i].giftSkuCode+'">'+giftList[i].giftAttrVal+"</a></dd>");if(i!=giftList.length-1){var t=i;for(var q=1;q<giftList.length-t;q++){if(giftList[t].giftId==giftList[t+q].giftId){giftPackListLiHtml.push('<dd><a href="javascript:;" onclick="ec.product.packageChangeColor(this,\''+type+'\')" attr-name="'+giftList[t+q].giftName+'"interest-skuid="'+giftList[i].giftSkuId+'" attr-imgSrc="'+ec.mediaPath+giftList[t+q].photoPath+"100_100_"+giftList[t+q].photoName+'" attr-prdId="'+giftList[t+q].giftId+'" attr-packageskuCode="'+giftList[t+q].giftSkuCode+'">'+giftList[t+q].giftAttrVal+"</a></dd>");i=t+q}}}giftPackListLiHtml.push("</dl></li>")}}if(giftPackListLiHtml!=[]&&giftPackListLiHtml.length>0){if(flag){ec.product.packageViewChange(dom,"","gift")}else{$(dom).parent().parent().removeClass("click");$("#giftPackageList").addClass("hide")}giftPackListHtml.push(giftPackListLiHtml.join(""));giftPackListHtml.push("</ul></div></div></div>");giftPackListHtml.push('<div class="product-package-mini-tool clearfix" id="giftPackageButton">');giftPackListHtml.push('<p><span class="f14">套餐价：</span><strong class="red">');if(skuInfo.price&&skuInfo.price>0){giftPackListHtml.push("￥"+skuInfo.price)}else{giftPackListHtml.push("暂无报价")}giftPackListHtml.push('</strong><span class="save"></span></p><div class="fr" id="minButtom">');if($("#product-operation").css("display")!="none"){giftPackListHtml.push($("#pro-operation").html())}giftPackListHtml.push("</div></div></div>");$("#giftPackageList").html(giftPackListHtml.join(""));$("#goodsRecommend-recommend-gift").find("li").each(function(){$(this).find("dd").first().addClass("selected")});$("#minButtom").find("a").addClass("product-package-mini-btn");$("#minButtom").find(".product-time").remove();$("#minButtom").find(".product-button-tips").remove();$("#minButtom").find(".product-button-priority").remove();ec.product.packageGetSkuCode("gift");if($("#pro-price").html()!=""&&$("#giftPackageList").html()!=null){if("暂无报价"!==$("#pro-price").text()){$("#pro-price-label").html("套餐价");$("#pro-price-label").removeClass("f24").addClass("type")}$("#pro-price-label").show()}ec.product.newPackageSwiper("-gift")}}else{$("#bundlePackageSelect").find("li").removeClass("click")}},updateOperationBtns:function(){$("#minButtom").html($("#pro-operation").html());$("#minButtom").find("a").addClass("product-package-mini-btn");$("#minButtom").find(".product-time").remove();$("#minButtom").find(".product-button-tips").remove();$("#minButtom").find(".product-button-priority").remove()}};ec.pkg("ec.product.interest");ec.product.interest.queryFreeDetail=function(){$("#prd-noInterset").addClass("hide");skuForInterest=ec.product.getSku();if(skuForInterest.priceMode==2){return}if($("#prd-noInterset").attr("interest-allow")!="1"){return}var price=0;var skulist="";skulist+=$("#pro-sku-code2").text()+"|";var showPrice=$("#pro-price").text();showPrice=parseFloat(showPrice.substring(1,showPrice.length));if(!showPrice>0){return}price+=showPrice;var packageInterestlist=$("#packageListCode").val().split(",");for(var i=0;i<packageInterestlist.length;i++){if(packageInterestlist[i]!=""){skulist+=packageInterestlist[i]+"|"}}var giftInterestlist=ec.product.gift.packageGiftMap[ec.product.getSku()];if(giftInterestlist!=null){for(var i=0;i<giftInterestlist.length;i++){skulist+=giftInterestlist[i]+"|"}}var extendSkuIDForInterest=$("#extendSelect").attr("data-scode");var extendPriceForInterest=$("#extendSelect").attr("interest-price");var accidentSkuIDForInterest=$("#accidentSelect").attr("data-scode");var accidentPriceForInterest=$("#accidentSelect").attr("interest-price");var ucareSkuIDForInterest=$("#ucareSelect").attr("data-scode");var ucarePriceForInterest=$("#ucareSelect").attr("interest-price");var gftPackageSkuIDForInterest=$("#giftBuy_dl").children(".product-choose-detail ").children().children("li.selected").find("a").attr("data-code");var gftPackagePriceForInterest=$("#giftBuy_dl").children(".product-choose-detail ").children().children("li.selected").find("a").attr("interest-price");if(extendSkuIDForInterest!=null&&extendPriceForInterest!=null&&extendSkuIDForInterest!=""){skulist+=extendSkuIDForInterest+"|";price+=parseFloat(extendPriceForInterest)}if(accidentSkuIDForInterest!=null&&accidentPriceForInterest!=null&&accidentSkuIDForInterest!=""){skulist+=accidentSkuIDForInterest+"|";price+=parseFloat(accidentPriceForInterest)}if(ucareSkuIDForInterest!=null&&ucarePriceForInterest!=null&&ucareSkuIDForInterest!=""){skulist+=ucareSkuIDForInterest+"|";price+=parseFloat(ucarePriceForInterest)}if(gftPackageSkuIDForInterest!=null&&gftPackagePriceForInterest!=null&&gftPackageSkuIDForInterest!=null){skulist+=gftPackageSkuIDForInterest+"|";gftPackagePriceForInterest=gftPackagePriceForInterest.substring(1,gftPackagePriceForInterest.length);price+=parseFloat(gftPackagePriceForInterest)}if(price>0&&(skulist!=null&&skulist!="")){price=price+""}else{return}$.ajax({url:"/product/queryInterest.json",dataType:"json",timeout:1e4,data:{price:price,skuList:skulist},timeoutFunction:function(){if(!$("#prd-noInterset").hasClass("hide")){$("#prd-noInterset").addClass("hide")}$("#hbDetail").find("ul").html("");$("#hlDetail").find("ul").html("");$("#interestOrderNow").val("");$("#interestOrderNow2").val("");return},success:function(json){if(!json.success){if(!$("#prd-noInterset").hasClass("hide")){$("#prd-noInterset").addClass("hide")}$("#hbDetail").find("ul").html("");$("#hlDetail").find("ul").html("");$("#interestOrderNow").val("");$("#interestOrderNow2").val("");return}ec.product.interest.queryFreeDetailJsonShow(json);ec.product.refreshStyle()},error:function(){if(!$("#prd-noInterset").hasClass("hide")){$("#prd-noInterset").addClass("hide")}$("#hbDetail").find("ul").html("");$("#hlDetail").find("ul").html("");$("#interestOrderNow").val("");$("#interestOrderNow2").val("");return}})};ec.product.interest.queryFreeDetailJsonShow=function(sku){if(sku.hbNoINterestList.length>0||sku.hlNoINterestList.length>0){var hbList=[];var handLifeList=[];if(!$("#interestHBPayNow").hasClass("disabled")){$("#interestHBPayNow").addClass("disabled")}if(!$("#interestPayHLNow").hasClass("disabled")){$("#interestPayHLNow").addClass("disabled")}$("#hbDetail").hide();$("#hlDetail").hide();$("#prd-noInterset").removeClass("hide");$("#hbShow").hide();$("#hlShow").hide();$("#interestOrderNow").val("");$("#interestOrderNow2").val("");if(sku.hbNoINterestList.length>0){$("#hbShow").show();var htmlHBShow=[];for(var i=0;i<sku.hbNoINterestList.length;i++){htmlHBShow.push('<li><a href="javascript:;" onclick="ec.product.interest.checkOne(this);" interest-info="1:'+sku.hbNoINterestList[i].num+'">');htmlHBShow.push('<p class="price">&yen;&nbsp;'+sku.hbNoINterestList[i].amount+"<em>x</em>"+sku.hbNoINterestList[i].num+"期</p>");if(sku.hbNoINterestList[i].installmentFlag==0){htmlHBShow.push("<p>手续费&yen;"+sku.hbNoINterestList[i].fee+"/期</p></a></li>")}else{htmlHBShow.push('<p class="red">免息，0手续费</p></a></li>')}}$("#hbDetail").find("ul").html(htmlHBShow.join(""));$("#hbShow").find(".sku").unbind("mouseover");$("#hbShow").unbind("mouseleave");$("#hbShow").find(".sku").mouseover(function(){$("#hbDetail").show();$("#hbShow").addClass("click")});$("#hbShow").mouseleave(function(){$("#hbDetail").hide();$("#hbShow").removeClass("click")})}else{$("#hbShow").hide();$("#hbDetail").hide()}ec.product.showCmbSelector(sku.hlNoINterestList,sku.hbNoINterestList);if($("#prd-noInterset").attr("interest-button")=="0"){$("#interestHBPayNow").each(function(){$(this).addClass("disabled");this.backup=this.onclick;this.onclick=""});$("#interestPayHLNow").each(function(){$(this).addClass("disabled");this.backup=this.onclick;this.onclick=""})}}};ec.product.interest.checkOne=function(ths){if($(ths).parent().hasClass("selected")){$(ths).parent().siblings().removeClass("selected");$(ths).parent().removeClass("selected");$("#interestOrderNow").val("");$("#interestOrderNow2").val("");if(!$(ths).parents(".product-stages-con").siblings(".product-package-mini-tool").find("a").hasClass("disabled")){$(ths).parents(".product-stages-con").siblings(".product-package-mini-tool").find("a").addClass("disabled")}return}else{$(ths).parent().siblings().removeClass("selected");$(ths).parent().addClass("selected");var type=$(ths).attr("interest-info").split(":")[0];if(type==2){$("#interestOrderNow2").val($(ths).attr("interest-info"))}else{$("#interestOrderNow").val($(ths).attr("interest-info"))}$(ths).parents(".product-stages-con").siblings(".product-package-mini-tool").find("a").removeClass("disabled")}};ec.product.interest.payByInterest=function(type){var interestT="";var interestVal="0:0";if(type===2){interestT="HL";if($("#interestPayHLNow").hasClass("disabled")){return}interestVal=$("#hlDetail .product-stages-main li.selected a").attr("interest-info")}else if(type===1){interestT="HB";if($("#interestHBPayNow").hasClass("disabled")){return}interestVal=$("#hbDetail .product-stages-main li.selected a").attr("interest-info")}interestVal=interestVal||"0:0";ec.dapClick(300021302,{SKUCode:ec.product.getSkuInfo(ec.product.getSku()).code,name:["","花呗分期","掌上生活"][type],number:interestVal.split(":")[1],click:1});ec.product.orderNow("2",interestT)};ec.pkg("deposit");ec.product.depositInfo={};ec.product.depositInit=function(a){if(ec.product.runningSkuId!=a){return}ec.product.depositInfo={};if($("#product-deposit-agreement-area")){$("#product-deposit-agreement-area").hide()}$("#pro-quantity-area").hide();$("#pro-quantity-area-nochange").hide();$("#pro-operation").css("visibility","hidden");$("#buyProcessIDD").hide();$("#pro-price-label-deposit").html("订金");$("#pro-price-label-deposit").show();$("#pro-price-deposit").html("暂无报价");$("#pro-price-old").html("");$("#pro-price-deposit").show();$("#pro-price-old").hide();$("#pro-operation").css("visibility","hidden");$("#tab-notice-button").hide();$("#tab-addcart-button").hide()};ec.product.isDespositSku=0;ec.product.runningSkuId=0;deposit.business={offsetTime:0,setOffsetTime:function(b,a){deposit.business.offsetTime=a-b},getSysDate:function(){return new Date(new Date().getTime()+deposit.business.offsetTime)}};ec.product.depositActivity=function(a){var b=ec.product.getSkuInfo(a);if(b.buttonMode!=7){$("#pro-operation").css("visibility","hidden");$("#pro-operation").html("")}if($("#product-deposit-agreement-area")){$("#product-deposit-agreement-area").hide()}ec.product.isDespositSku=0;ec.product.runningSkuId=a;ec.ui.loading.show();new ec.ajax().get({url:"/product/queryDeposit.json",data:{sbomCode:b.code},timeout:10000,timeoutFunction:function(){if(ec.product.runningSkuId!=a){return}ec.product.isDespositSku=2;if(b.buttonMode==7){ec.product.showPrice();return false}if(b&&b.buttonMode==8){ec.product.rushbuyActivity(1)}else{ec.product.depositInit(a);alert("查询预付定金活动信息超时，请重新刷新页面。")}$("#pro-price").html("暂无报价");$("#pro-price-deposit").html("暂无报价");$("#pro-price-label-amount").html("");$("#pro-price-label-amount").hide();$("#pro-price-amount").hide();$("#pro-price-amount").html("")},afterSendFunction:ec.ui.loading.hide,successFunction:function(g){$("#package_dl").remove();_updateSelect();if(ec.product.runningSkuId!=a){return}if(g.isSuccess=="false"||(g.resultCode==0&&g.promoActivity==null)||(g.resultCode==0&&g.promoActivity=="")){ec.product.isDespositSku=2;if(b.buttonMode==7){ec.product.showPrice();return false}$("#buyProcessIDD").hide();$("#pro-price-label-amount").html("");$("#pro-price-label-amount").hide();$("#pro-price-amount").hide();$("#pro-price-amount").html("");if(b&&b.buttonMode==8){ec.product.rushbuyActivity(1)}else{ec.product.depositInit(a)}ec.product.showPrice();return}ec.product.isDespositSku=1;var j=g.promoActivity.depositSkuList;var d="";if(j!=""){d=j[0]}if(b.buttonMode==7&&(g.unStart=="unStart"||g.end=="end")){ec.product.showPrice(d);return false}ec.product.depositInit(a);if(d.isSurePrice<1){$("#pro-price").html("暂无报价")}else{var f=parseFloat($("#pro-price-hide").val());var e=parseFloat(ec.product.getSkuInfo(ec.product.getSku()).price);if(e>f){$("#pro-price").html("<em>&yen;</em>"+$("#pro-price-hide").val())}}ec.product.depositInfo=g;if(g.promoActivity.description.length>0){if($("#pro-parts-area").length>0){$("#pro-parts-area").find("dt").text("")}}$("#buyProcessIDD").show();$("#balanceStartDateIDD").html(timestampToTime(g.deposit.balanceStartTime)+"&nbsp;~&nbsp;"+timestampToTime(g.deposit.balanceEndTime));if(b&&b.buttonMode!=8){$("#startDateIDD").html(timestampToTime(g.deposit.startTime)+"&nbsp;~&nbsp;"+timestampToTime(g.deposit.endTime))}else{$("#startDateIDD").html("提前锁定购买资格")}ec.product.showPrice(d);if(ec.product.inventory.haveInventory(a)){$("#pro-operation").html('<a href="javascript:;" class="product-button02" onclick="ec.product.payDeposit(1);">支付订金</a>');$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");$("#product-operation").show()}else{$("#pro-operation").html('<a href="javascript:;" class="product-button02" onclick="ec.product.arrival()">到货通知</a>');$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");$("#product-operation").show()}ec.product.refreshStyle();deposit.business.setOffsetTime(new Date().getTime(),g.serverCurrentTime);var c=deposit.business.getSysDate();if(g.unStart=="unStart"){$("#pro-operation").html('<a href="javascript:;" class="product-button02 disabled">活动即将开始</a><div id="pro-operation-countdown" class="product-time"></div>');$("#pro-operation").css("visibility","visible");$("#product-operation").show();var k=ec.util.parseDate(g.deposit.startTime).format("yyyy-MM-dd HH:mm:ss");var i=ec.util.parseDate(g.deposit.startTime).format("MM月dd日 HH:mm");var c=deposit.business.getSysDate();ec.ui.countdown2($("#pro-operation-countdown"),{html:"<p>"+i+"开售:	</p><ul><li><span>{#day}</span></li><li><em>天</em></li><li><span>{#hours}</span></li><li><em>:</em></li><li><span>{#minutes}</span></li><li><em>:</em></li><li><span>{#seconds}</span></li>",now:c,endTime:k,callback:function(l){$("#pro-operation").html('<a href="javascript:;" class="product-button02" onclick="ec.product.payDeposit(1);">支付订金</a>');ec.product.gift.updateOperationBtns();if(rush.business.timer){clearInterval(rush.business.timer);rush.business.timer=null}}});rush.business.timer=$($("#pro-operation-countdown")).data("countdown");if(!rush.business.timer){$("#pro-operation").html('<a href="javascript:;" class="product-button02" onclick="ec.product.payDeposit(1);">支付订金</a>');if(rush.business.timer){clearInterval(rush.business.timer);rush.business.timer=null}}ec.product.refreshStyle()}if(g.end=="end"){$("#pro-operation").html('<a href="javascript:;" class="product-button02 disabled">活动已结束</a>');$("#pro-operation").css("visibility","visible");$("#product-operation").show();ec.product.refreshStyle()}if(b&&b.buttonMode==8){ec.product.rushbuyActivity(2)}else{$("#goAddressId").hide()}ec.product.gift.updateOperationBtns()}})};function timestampToTime(b){var a=ec.util.parseDate(b);Y=a.getFullYear()+".";M=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+".";D=(a.getDate()<10?"0"+a.getDate():a.getDate())+" ";h=(a.getHours()<10?"0"+a.getHours():a.getHours())+":";m=(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes());return Y+M+D+h+m}ec.product.showDepositAgreement=function(){var a='<div class="box-agreement-area">'+ec.product.depositInfo.promoActivity.ruleText+"</div>";new ec.box(a,{boxclass:"ol_box_4 ol_box_agreement",title:"订金支付协议",width:678,height:350,autoHeight:false}).open()};ec.product.pushAddress=function(){var a="";if(ec.account.isLogin()){a="0"}else{a="1"}var b={UID:ec.util.cookie.get("uid"),TID:getPtid(),TIME:getTime(),CONTENT:{SKUCode:$("#pro-sku-code2").text(),login:a}};ec.code.addAnalytics({hicloud:true});_paq.push(["trackLink","3000020503","link",b])};ec.product.payDeposit=function(a){if(!$("#pro-agreement-area-check").attr("checked")){var b='<div class="box-prompt-error-area"><div class="b"><p>您必须先勾选同意订金支付协议，才可以进行订金支付。</p></div></div>';new ec.box(b,{boxclass:"ol_box_4",title:"温馨提示",showCancel:false}).open();return}ec.account.afterLogin(function(){ec.binding.cart.withPhone(function(){dealDepositInfo(a)})})};dealDepositInfo=function(g){var i=$("#pro-quantity").val();var l=ec.product.getSku()||ec.product.defaultSku;var f=[];var j={};j.itemId=$("#pro-sku-code").val();j.qty=$("#pro-quantity").val();j.itemType="S0";var c=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()];var e=ec.product.getSku();if((c||ec.product.gift.packageGiftMap[e])&&g==1){var b=[];if(c){for(var n in c){var d={sbomCode:c[n].giftSkuCode};b.push(d)}}if(ec.product.gift.packageGiftMap[e]){for(var p=0;p<ec.product.gift.packageGiftMap[e].length;p++){var a={sbomCode:ec.product.gift.packageGiftMap[e][p]};b.push(a)}}j.gifts=b}if(g==2){$('[id="comb-pro-'+l+'"]').find("input[name=skuId]:checked").each(function(){var q={};q.itemId=$(this).attr("data-scode");q.qty=1;q.itemType="S0";f.push(q)})}j.subOrderItemReqArgs=[];j.subOrderItemReqArgs=ec.product.subServices(j.subOrderItemReqArgs);f.push(j);var o=ec.lang.json.stringify(f);var k="";k+='<input name="orderReqJson" type="text" value=\''+o+"'>";k+='<input name="state" type="text" value="0">';$("#order-confirm-deposit-form").append(k).submit()};ec.pkg("depositNew");ec.product.depositInfoNew={};ec.product.depositInit_new=function(a){if(ec.product.runningSkuId!=a){return}ec.product.depositInfoNew={};if($("#product-deposit-agreement-area")){$("#product-deposit-agreement-area").hide()}$("#pro-quantity-area").hide();$("#pro-quantity-area-nochange").hide();$("#pro-operation").css("visibility","hidden");$("#buyProcessIDD").hide();$("#pro-price-label-deposit").html("");$("#pro-price-label-deposit").show();$("#pro-price-deposit").html("");$("#pro-price-old").html("");$("#pro-price-deposit").show();$("#pro-price-old").hide();$("#pro-operation").css("visibility","hidden");$("#tab-notice-button").hide();$("#tab-addcart-button").hide()};ec.product.isDespositSku=0;ec.product.runningSkuId=0;depositNew.business={offsetTime:0,setOffsetTime:function(b,a){depositNew.business.offsetTime=a-b},getSysDate:function(){return new Date(new Date().getTime()+depositNew.business.offsetTime)}};ec.product.depositNewActivity=function(a){var b=ec.product.getSkuInfo(a);$("#product-recommend-all").hide();if($("#product-deposit-agreement-area")){$("#product-deposit-agreement-area").hide()}$("#pro-operation").css("visibility","hidden");ec.product.isDespositSku=0;ec.product.runningSkuId=a;$("#pro-operation").html("");new ec.ajax().get({url:"/product/queryDeposit.json",data:{sbomCode:b.code},timeout:10000,timeoutFunction:function(){if(ec.product.runningSkuId!=a){return}ec.product.isDespositSku=2;if(b&&b.buttonMode==7){$("#pro-operation").css("visibility","visible");return}ec.product.depositInit_new(a);alert("查询预付定金活动信息超时，请重新刷新页面。");$("#pro-price-deposit").html("暂无报价");$("#pro-price-label-amount").html("");$("#pro-price-label-amount").hide();$("#pro-price-amount").hide();$("#pro-price-amount").html("")},beforeSendFunction:function(c){ec.ui.loading.show()},afterSendFunction:ec.ui.loading.hide,successFunction:function(e){$("#package_dl").remove();_updateSelect();if(ec.product.runningSkuId!=a){return}if(e.isSuccess=="false"||(e.resultCode==0&&e.promoActivity==null)||(e.resultCode==0&&e.promoActivity=="")){ec.product.isDespositSku=2;if(b&&b.buttonMode==7){$("#pro-operation").css("visibility","visible");return}$("#pro-price-label-deposit").html("");$("#pro-price-label-deposit").show();$("#pro-price-deposit").show();$("#pro-price-deposit").html("");$("#buyProcessIDD").hide();$("#pro-price-label-amount").html("");$("#pro-price-label-amount").hide();$("#pro-price-amount").hide();$("#pro-price-amount").html("");ec.product.depositInit_new(a);return}ec.product.isDespositSku=1;ec.product.depositInit_new(a);var g=e.promoActivity.depositSkuList;var d="";if(g!=""){d=g[0]}if(d.isSurePrice<1){$("#pro-price").html("暂无报价")}else{$("#pro-price").html("<em>&yen;</em>"+$("#pro-price-hide").val())}ec.product.depositInfoNew=e;if(e.promoActivity.description.length>0){if($("#pro-parts-area").length>0){$("#pro-parts-area").find("dt").text("")}}$("#buyProcessIDD").show();$("#balanceStartDateIDD").html(timestampToTime(e.deposit.balanceStartTime)+"&nbsp;~&nbsp;"+timestampToTime(e.deposit.balanceEndTime));if(b&&b.buttonMode!=8){$("#startDateIDD").html(timestampToTime(e.deposit.startTime)+"&nbsp;~&nbsp;"+timestampToTime(e.deposit.endTime))}else{$("#startDateIDD").html("提前锁定购买资格")}$("#pro-price-label-deposit").html("订金");$("#pro-price-label-deposit").removeClass("f24").addClass("type");$("#pro-price-label-deposit").show();$("#pro-price-deposit").html("<em>&yen;</em>"+d.depositPrice.toFixed(2));$("#pro-price-deposit").show();if(d.amountPrice>0){$("#pro-price-label-amount").html("可抵");$("#pro-price-label-amount").show();$("#pro-price-amount").html("<em>&yen;</em>"+d.amountPrice.toFixed(2));$("#pro-price-amount").show()}else{$("#pro-price-label-amount").html("");$("#pro-price-label-amount").hide();$("#pro-price-amount").hide();$("#pro-price-amount").html("")}if(ec.product.inventory.haveInventory(a)){$("#pro-operation").html('<a href="javascript:;" class="product-button02" onclick="ec.product.payDepositNew(1);">支付订金</a>');$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");$("#product-operation").show()}else{$("#pro-operation").html('<a href="javascript:;" class="product-button02" onclick="ec.product.arrival()">到货通知</a>');$("#pro-quantity-area").show();$("#pro-operation").css("visibility","visible");$("#product-operation").show()}ec.product.refreshStyle();depositNew.business.setOffsetTime(new Date().getTime(),e.serverCurrentTime);var c=depositNew.business.getSysDate();if(e.unStart=="unStart"){$("#pro-operation").html('<a href="javascript:;" class="product-button02 disabled">活动即将开始</a><div id="pro-operation-countdown" class="product-time"></div>');$("#pro-operation").css("visibility","visible");$("#product-operation").show();var i=ec.util.parseDate(e.deposit.startTime).format("yyyy-MM-dd HH:mm:ss");var f=ec.util.parseDate(e.deposit.startTime).format("MM月dd日 HH:mm");var c=depositNew.business.getSysDate();ec.ui.countdown2($("#pro-operation-countdown"),{html:"<p>"+f+"开售:	</p><ul><li><span>{#day}</span></li><li><em>天</em></li><li><span>{#hours}</span></li><li><em>:</em></li><li><span>{#minutes}</span></li><li><em>:</em></li><li><span>{#seconds}</span></li>",now:c,endTime:i,callback:function(j){$("#pro-operation").html('<a href="javascript:;" class="product-button02" onclick="ec.product.payDepositNew(1);">支付订金</a>');ec.product.gift.updateOperationBtns();if(rush.business.timer){clearInterval(rush.business.timer);rush.business.timer=null}}});rush.business.timer=$($("#pro-operation-countdown")).data("countdown");if(!rush.business.timer){$("#pro-operation").html('<a href="javascript:;" class="product-button02" onclick="ec.product.payDepositNew(1);">支付订金</a>');if(rush.business.timer){clearInterval(rush.business.timer);rush.business.timer=null}}ec.product.refreshStyle()}if(e.end=="end"){$("#pro-operation").html('<a href="javascript:;" class="product-button02 disabled">活动已结束</a>');$("#pro-operation").css("visibility","visible");$("#product-operation").show();ec.product.refreshStyle()}$("#goAddressId").hide();ec.product.gift.updateOperationBtns()}})};function timestampToTime(b){var a=ec.util.parseDate(b);Y=a.getFullYear()+".";M=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+".";D=(a.getDate()<10?"0"+a.getDate():a.getDate())+" ";h=(a.getHours()<10?"0"+a.getHours():a.getHours())+":";m=(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes());return Y+M+D+h+m}ec.product.showDepositAgreement=function(){var a='<div class="box-agreement-area">'+ec.product.depositInfoNew.promoActivity.ruleText+"</div>";new ec.box(a,{boxclass:"ol_box_4 ol_box_agreement",title:"订金支付协议",width:678,height:350,autoHeight:false}).open()};ec.product.payDepositNew=function(a){if(!$("#pro-agreement-area-check").attr("checked")){var b='<div class="box-prompt-error-area"><div class="b"><p>您必须先勾选同意订金支付协议，才可以进行订金支付。</p></div></div>';new ec.box(b,{boxclass:"ol_box_4",title:"温馨提示",showCancel:false}).open();return}ec.account.afterLogin(function(){ec.binding.cart.withPhone(function(){dealDepositInfoNew(a)})})};dealDepositInfoNew=function(g){var i=$("#pro-quantity").val();var l=ec.product.getSku()||ec.product.defaultSku;var f=[];var j={};j.itemId=$("#pro-sku-code").val();j.qty=$("#pro-quantity").val();j.itemType="DE";var c=ec.product.gift.finalMainSbomGiftMap[ec.product.getSku()];var e=ec.product.getSku();if((c||ec.product.gift.packageGiftMap[e])&&g==1){var b=[];if(c){for(var n in c){var d={sbomCode:c[n].giftSkuCode};b.push(d)}}if(ec.product.gift.packageGiftMap[e]){for(var p=0;p<ec.product.gift.packageGiftMap[e].length;p++){var a={sbomCode:ec.product.gift.packageGiftMap[e][p]};b.push(a)}}j.gifts=b}if(g==2){$('[id="comb-pro-'+l+'"]').find("input[name=skuId]:checked").each(function(){var q={};q.itemId=$(this).attr("data-scode");q.qty=1;q.itemType="S0";f.push(q)})}j.subOrderItemReqArgs=[];j.subOrderItemReqArgs=ec.product.subServices(j.subOrderItemReqArgs);f.push(j);var o=ec.lang.json.stringify(f);var k="";k+='<input name="orderReqJson" type="text" value=\''+o+"'>";k+='<input name="state" type="text" value="0">';$("#order-confirm-deposit-form-new").append(k).submit()};ec.pkg("ec.product.coupon");ec.load("ec.box");ec.product.coupon={sbomCouponList:{},applyResultList:{},loadCoupon:function(a){ec.product.coupon.loadCouponEx(a,function(d){if(d&&d.success&&d.couponList&&d.couponList.length>0){ec.product.coupon.sbomCouponList[a]=d.couponList;$("#couponBtn").show();$("#couponTag").html("");var b=[];if(d.couponList.length>3){for(var c=0;c<d.couponList.length;c++){if(c<3){if(d.couponList[c].couponTag!=null){b.push("<span onclick=\"ec.product.coupon.clickBtn('"+a+'\')" class="product-ticket">'+d.couponList[c].couponTag+"</span>")}}if(c>=3){break}}}else{for(var c=0;c<d.couponList.length;c++){if(d.couponList[c].couponTag!=null){b.push("<span onclick=\"ec.product.coupon.clickBtn('"+a+'\')" class="product-ticket">'+d.couponList[c].couponTag+"</span>")}}}b.push(' <a href="javascript:;" id="immediatelyReceiveID" class="product-ticket-link" onclick="ec.product.coupon.clickBtn(\''+a+"')\">立即领取&nbsp;&gt;</a>");$("#couponTag").html(b.join(" "))}else{ec.product.coupon.sbomCouponList[a]="";$("#couponBtn").hide()}},function(b){},function(){})},loadCouponEx:function(d,a,c,b){$.ajax({url:"/product/queryCoupon.json",type:"post",data:{sbom:d},dataType:"json",timeout:10000,success:function(e){a(e);return},error:function(){c(json)}})},clickBtn:function(a){ec.product.coupon.showDialog(a)},closeDialog:function(){$("#pro-roll-page").hide()},showDialog:function(a){$("#pro-roll-message").html("");$("#pro-roll-list").html("");$("#pro-roll-page").hide();var b=ec.product.coupon.sbomCouponList[a];if(b){ec.product.coupon.showDialogEx(a,b)}else{ec.product.coupon.loadCouponEx(a,function(c){if(c&&c.success&&c.couponList&&c.couponList.length>0){ec.product.coupon.sbomCouponList[a]=c.couponList;ec.product.coupon.showDialogEx(a,c.couponList)}else{}},function(){},function(){})}},showDialogEx:function(a,c){var b=new ec.box($("#pro-roll-textarea").val(),{boxid:"successBox",boxclass:"ol_box_4 ol_box_title",width:700,title:"领取优惠券",showButton:false,onopen:function(d){ec.product.coupon.couponBuildText(a,c);d.setPosition()},onclose:function(d){ec.product.coupon.closeDialog()}});b.open()},couponBuildText:function(l,k){var e=[];for(var d=0;d<k.length;d++){var f="";var b=k[d].kind;if(b=="2"){f='<i class="tag"><span>叠加劵</span></i>'}paramsReceiveCoupon="'"+k[d].activityCode+"','"+k[d].batchCode+"','"+l+"'";var c=k[d].activityCode+"-"+k[d].batchCode;var a="";var j="";var g="";var h="";if(k[d].couponType==1&&k[d].deliveryFree==0){g="<span>"+k[d].amount+"</span><p><strong>优惠券</strong></p>"+f;h="<em>&yen;</em>"}else{if(k[d].couponType==2&&k[d].deliveryFree==0){j=" roll-discount";g="<span>"+k[d].discount*10+"</span><p><b>折</b></p>"}else{j=" roll-type";g="<span>免邮券</span>"+f}}switch(k[d].state){case -1:e.push('<li id="roll-detail-'+c+'" class="roll-detail receive'+j+'" title="'+ec.autoEncodeAttr(k[d].batchName)+'">');e.push(' <a id="roll-link-'+c+'" href="javascript:;" >'+h);a="已<br>领<br>完";break;case 1:e.push('<li id="roll-detail-'+c+'" class="roll-detail'+j+'" title="'+ec.autoEncodeAttr(k[d].batchName)+'">');e.push(' <a id="roll-link-'+c+'" href="javascript:;"  onclick="ec.product.coupon.receiveCoupon('+paramsReceiveCoupon+')">'+h);a="立<br>即<br>领<br>取";break;case 2:e.push('<li id="roll-detail-'+c+'" class="roll-detail receive'+j+'" title="'+ec.autoEncodeAttr(k[d].batchName)+'">');e.push(' <a id="roll-link-'+c+'" href="javascript:;" >'+h);a="已<br>领<br>取";break;case 3:e.push('<li id="roll-detail-'+c+'" class="roll-detail begin'+j+'" title="'+ec.autoEncodeAttr(k[d].batchName)+'">');e.push(' <a id="roll-link-'+c+'" href="javascript:;" >'+h);a="即<br>将<br>开<br>始";break;case 4:e.push('<li id="roll-detail-'+c+'" class="roll-detail disabled'+j+'" title="'+ec.autoEncodeAttr(k[d].batchName)+'">');e.push(' <a id="roll-link-'+c+'" href="javascript:;" >'+h);a="已<br>结<br>束";break;default:e.push('<li id="roll-detail-'+c+'" class="roll-detail'+j+'" title="'+ec.autoEncodeAttr(k[d].batchName)+'">');e.push(' <a id="roll-link-'+c+'" href="javascript:;" >'+h);a="";break}e.push(' <div class="roll-info">');e.push('  <div class="roll-price clearfix">');e.push(g);e.push("  </div>");e.push(' <p class="roll-word">'+ec.autoEncodeAttr(k[d].batchName)+"</p>");e.push(' <p class="roll-time">'+ec.util.parseDate(k[d].beginDate).format("yyyy.MM.dd")+" - "+ec.util.parseDate(k[d].endDate).format("yyyy.MM.dd")+"</p>");e.push("</div>");e.push('<div id="roll-state-'+c+'" class="roll-btn">'+a+"</div>");e.push("</a></li>")}var e='<ul class="clearfix">'+e.join(" ")+"</ul>";$("#pro-roll-list").html(e);if(k.length==1){$("#pro-roll-list ul li").removeClass("disabled");$("#pro-roll-list ul li").addClass("roll-detail-one")}$("#pro-roll-page").show()},goLogin:function(){$(".box-cancel").click();var a=domainMain+encodeURIComponent(window.location.pathname+"#"+ec.product.getSku());ec.account.afterLogin(function(){$("#immediatelyReceiveID").click()})},showMsg:function(c,b){b=""+b;var a="";a="<span>"+c+"</span>";switch(b){case"9206":a+='<a href="javascript:;" onclick="ec.product.coupon.goLogin()" >马上登录</a>';break;case"9208":a+='<a href="'+$("#accountCenterUrl").val()+'" target="_blank" >去绑定</a>';break;case"9209":a+='<a href="'+$("#authUrl").val()+'" target="_blank" >去认证</a>';break;case"9210":a+='<a href="'+$("#notFinishAllUPDataURL").val()+'" target="_blank" >完善资料</a>';break;default:a+=""}$("#pro-roll-message").html(a);$("#pro-roll-message").addClass("product-layer-tips")},receiveCoupon:function(b,d,a){var c=b+"-"+d;ec.product.syncCustomSession();$("#pro-roll-message").html("");$("#pro-roll-message").removeClass();$.ajax({url:openApiDomain+"/ams/coupon/receive?t="+new Date().getTime(),type:"POST",dataType:"json",data:JSON.stringify({activityCode:b,batchCode:d}),timeout:10000,beforeSend:function(e){e.withCredentials=true},success:function(e){if(e&&e.state){switch(e.state){case -1:$("#roll-detail-"+c).addClass("receive");$("#roll-state-"+c).html("已<br>领<br>完");$("#roll-link-"+c).removeAttr("onclick");break;case 1:break;case 2:$("#roll-detail-"+c).addClass("receive");$("#roll-state-"+c).html("已<br>领<br>取");$("#roll-link-"+c).removeAttr("onclick");break;case 3:$("#roll-detail-"+c).addClass("begin");$("#roll-state-"+c).html("即<br>将<br>开<br>始");$("#roll-link-"+c).removeAttr("onclick");break;case 4:$("#roll-detail-"+c).addClass("disabled");$("#roll-state-"+c).html("已<br>结<br>束");$("#roll-link-"+c).removeAttr("onclick");break;default:break}}if(e&&e.success){$("#pro-roll-message").html("<span>"+e.pcReviceSuccTip+"</span>");$("#pro-roll-message").addClass("product-layer-tips product-layer-success");delete ec.product.coupon.sbomCouponList[a];return}if(!e.code){$("#pro-roll-message").addClass("product-layer-tips");$("#pro-roll-message").html("<span>亲，瞬间被你的热情吓到了，容我缓缓，请稍候再来哦~</span>");return}ec.product.coupon.showMsg(e.errorTip,e.code)},error:function(){$("#pro-roll-message").addClass("product-layer-tips");$("#pro-roll-message").html("<span>亲，瞬间被你的热情吓到了，容我缓缓，请稍候再来哦~</span>")}})}};